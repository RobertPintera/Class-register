import{D as Ue,d as le,r as w,c as j,v as F,e as je,i as Je,F as He,a as D,o as E,b as S,f as b,g as y,h as B,j as l,w as f,k as c,n as de,t as M,l as J,m as be,T as Ke,u as ae,p as N,q as ye,s as ie,x as Z,y as Q,z as X,A as ee,B as $,C as R,E as ce,G as Y,H as ne,I as Qe,J as Ye,K as Ze,L as K,M as me,N as qe,O as Fe,P as xe,Q as Xe,R as et,S as tt,U as st,V as at,W as nt,X as ot,Y as it,Z as lt,_ as rt,$ as dt,a0 as ut,a1 as ct,a2 as mt,a3 as pt,a4 as gt,a5 as ft,a6 as vt,a7 as bt,a8 as ht,a9 as _t,aa as yt,ab as xt,ac as wt,ad as It,ae as St,af as Pt,ag as Dt,ah as Tt,ai as Ct,aj as Mt,ak as $t,al as kt,am as Gt,an as qt,ao as Ft,ap as At,aq as Bt,ar as Nt,as as Rt,at as Vt,au as Wt,av as Lt,aw as Et,ax as Ot,ay as zt}from"./vendor-hokv38EV.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();class Ut extends Ue{students;tests;grades;thresholds;settings;constructor(){super("RegisterClassDatabase"),this.version(1).stores({students:"id",tests:"id",grades:"[studentId+testId], studentId, testId",thresholds:"id",settings:"id"}),this.students=this.table("students"),this.tests=this.table("tests"),this.grades=this.table("grades"),this.thresholds=this.table("thresholds"),this.settings=this.table("settings")}}const P=new Ut;async function we(){return P.grades.toArray()}async function jt(t){return P.grades.add(t)}async function ge(t,e,o){return P.grades.update([e,t],{...o})}async function Jt(t,e){return P.grades.delete([t,e])}async function Ht(t){await P.grades.where("testId").equals(t).delete()}function Kt(t){return Math.round(t*10)/10}function k(t){return Math.round(t*100)/100}function Qt(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?o.reduce((n,s)=>n+s,0)/o.length:0}function Yt(t,e){const o=t.filter(s=>s.testId===e).map(s=>s.points).sort((s,a)=>s-a);if(!o.length)return 0;const n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function Zt(t,e){const o=t.filter(a=>a.testId===e).map(a=>a.points);if(!o.length)return 0;const n=o.reduce((a,r)=>a+r,0)/o.length,s=o.reduce((a,r)=>a+Math.pow(r-n,2),0)/o.length;return Math.sqrt(s)}function Xt(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.min(...o):0}function es(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.max(...o):0}function ue(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(r=>r.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?s.reduce((a,r)=>a+r,0)/s.length:0}function Ie(t,e,o,n){const s=t.filter(r=>r.testId===o.id&&r.points!==void 0).filter(r=>e.find(g=>g.id===r.studentId)?.gender===n).map(r=>r.points);return s.length?s.reduce((r,g)=>r+g,0)/s.length/o.maxPoints*100:0}function Se(t,e,o,n){const s=t.filter(r=>r.testId===o&&r.points!==void 0).filter(r=>e.find(g=>g.id===r.studentId)?.gender===n).map(r=>r.points).sort((r,g)=>r-g);if(!s.length)return 0;const a=Math.floor(s.length/2);return s.length%2!==0?s[a]:(s[a-1]+s[a])/2}function Pe(t,e,o,n){const s=t.filter(g=>g.testId===o&&g.points!==void 0).filter(g=>e.find(m=>m.id===g.studentId)?.gender===n).map(g=>g.points);if(!s.length)return 0;const a=s.reduce((g,m)=>g+m,0)/s.length,r=s.reduce((g,m)=>g+Math.pow(m-a,2),0)/s.length;return Math.sqrt(r)}function De(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(r=>r.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.min(...s):0}function Te(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(r=>r.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.max(...s):0}function Ae(t,e,o){const n=t.filter(r=>r.studentId===o);if(!n.length)return 0;let s=0,a=0;for(const r of n){const g=e.find(m=>m.id===r.testId);g&&g.weight>0&&(s+=r.points/g.maxPoints*g.weight,a+=g.weight)}return a>0?s/a*100:0}function ts(t,e,o){const n=t.filter(a=>a.studentId===o).map(a=>{const r=e.find(g=>g.id===a.testId);return r&&r.maxPoints>0?a.points/r.maxPoints*100:0}).sort((a,r)=>a-r);if(!n.length)return 0;const s=Math.floor(n.length/2);return n.length%2!==0?n[s]:(n[s-1]+n[s])/2}function ss(t,e,o){const n=t.filter(r=>r.studentId===o).map(r=>{const g=e.find(m=>m.id===r.testId);return g&&g.maxPoints>0?r.points/g.maxPoints*100:0});if(!n.length)return 0;const s=n.reduce((r,g)=>r+g,0)/n.length,a=n.reduce((r,g)=>r+Math.pow(g-s,2),0)/n.length;return Math.sqrt(a)}function as(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(r=>r.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.min(...n):0}function ns(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(r=>r.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.max(...n):0}function Be(t,e){let o=0,n=0;for(const s of e){const a=t.filter(g=>g.testId===s.id);if(a.length===0)continue;const r=a.reduce((g,m)=>g+m.points/s.maxPoints*100,0)/a.length;o+=r*s.weight,n+=s.weight}return n>0?o/n:0}function Ne(t,e){if(t.length===0)return 0;const o=t.map(s=>{const a=e.find(r=>r.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100}).sort((s,a)=>s-a),n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function Re(t,e){if(t.length===0)return 0;const o=t.map(a=>{const r=e.find(g=>g.id===a.testId);return!r||r.maxPoints===0?0:a.points/r.maxPoints*100}),n=o.reduce((a,r)=>a+r,0)/o.length,s=o.reduce((a,r)=>a+Math.pow(r-n,2),0)/o.length;return Math.sqrt(s)}function Ve(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.min(...o):0}function We(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.max(...o):0}const W=le("grades",()=>{const t=w([]);return{grades:j(()=>t.value),updateGrade:async u=>{const d={...u},i=t.value.find(p=>p.studentId===d.studentId&&p.testId===d.testId);i?(i.points=d.points,await ge(i.testId,i.studentId,{points:i.points})):(t.value.push(d),await jt(d))},deleteGrade:async(u,d)=>{await Jt(u,d),t.value=t.value.filter(i=>!(i.studentId===u&&i.testId===d))},getGrade:(u,d)=>t.value.find(i=>i.studentId===u&&i.testId===d),setGrades:u=>{t.value=u},reduceGradesByTest:async(u,d)=>{const i=t.value.map(p=>p.testId===u&&p.points>d?{...p,points:d}:p);await Promise.all(i.filter(p=>p.testId===u).map(p=>ge(p.testId,p.studentId,{points:p.points}))),t.value=i},normalizeGradesByTest:async(u,d,i)=>{const p=t.value.map(v=>{if(v.testId===u){const h=Kt(v.points/d*i);return{...v,points:h}}return v});await Promise.all(p.filter(v=>v.testId===u).map(v=>ge(v.testId,v.studentId,{points:v.points}))),t.value=p},deleteGradesByTest:async u=>{await Ht(u),t.value=t.value.filter(d=>d.testId!==u)}}});async function os(){if(await P.thresholds.count()===0){const e=[{id:F(),name:"5",minPercentage:90},{id:F(),name:"4.5",minPercentage:80},{id:F(),name:"4",minPercentage:70},{id:F(),name:"3.5",minPercentage:60},{id:F(),name:"3",minPercentage:50},{id:F(),name:"2",minPercentage:0}];await P.thresholds.bulkAdd(e)}}async function Ce(){return P.thresholds.toArray()}async function is(t){return P.thresholds.add(t)}async function ls(t,e){return P.thresholds.update(t,e)}async function rs(t){return P.thresholds.delete(t)}async function ds(t){await P.transaction("rw",P.thresholds,async()=>{await P.thresholds.clear(),await P.thresholds.bulkAdd(t)})}const oe=le("gradeThresholds",()=>{const t=w([]);return{gradeThresholds:j(()=>t.value),addGradeThreshold:async m=>{const u={id:F(),...m};await is(u),t.value.push(u)},updateGradeThreshold:async(m,u)=>{await ls(m,u);const d=t.value.findIndex(i=>i.id===m);d!==-1&&(t.value[d]={...t.value[d],...u})},deleteGradeThreshold:async m=>{await rs(m),t.value=t.value.filter(u=>u.id!==m)},replaceGradeThresholds:async m=>{const u=m.map(d=>({id:F(),...d}));await ds(u),t.value=u},getGradeThreshold:m=>t.value.find(u=>u.id===m),setGradeThresholds:m=>{t.value=m}}});async function us(){await P.settings.get("global")||await P.settings.add({id:"global",editWithDialog:!1})}async function Me(){return P.settings.get("global")}async function cs(t){return P.settings.update("global",t)}const he=le("settings",()=>{const t=w();return{settings:j(()=>t.value),updateSettings:async s=>{t.value&&(await cs(s),Object.assign(t.value,s))},setSettings:s=>{t.value=s}}});async function $e(){return P.students.toArray()}async function ms(t){return P.students.add(t)}async function ps(t,e){return P.students.update(t,e)}async function gs(t){await P.transaction("rw",P.students,P.grades,async()=>{await P.grades.where("studentId").equals(t).delete(),await P.students.delete(t)})}const O=le("students",()=>{const t=W(),e=w([]);return{students:j(()=>e.value),addStudent:async m=>{const u={id:F(),...m};await ms(u),e.value.push(u)},updateStudent:async(m,u)=>{await ps(m,u);const d=e.value.findIndex(i=>i.id===m);d!==-1&&(e.value[d]={...e.value[d],...u})},deleteStudent:async m=>{await gs(m),e.value=e.value.filter(u=>u.id!==m),t.setGrades(t.grades.filter(u=>u.studentId!==m))},getStudent:m=>e.value.find(u=>u.id===m),setStudents:m=>{e.value=m}}});async function ke(){return P.tests.toArray()}async function fs(t){return P.tests.add(t)}async function vs(t,e){return P.tests.update(t,e)}async function bs(t){await P.transaction("rw",P.tests,P.grades,async()=>{await P.grades.where("testId").equals(t).delete(),await P.tests.delete(t)})}const L=le("tests",()=>{const t=W(),e=w([]);return{tests:j(()=>e.value),addTest:async m=>{const u={id:F(),...m};await fs(u),e.value.push(u)},updateTest:async(m,u)=>{await vs(m,u);const d=e.value.findIndex(i=>i.id===m);d!==-1&&(e.value[d]={...e.value[d],...u})},deleteTest:async m=>{await bs(m),e.value=e.value.filter(u=>u.id!==m),t.setGrades(t.grades.filter(u=>u.testId!==m))},getTest:m=>e.value.find(u=>u.id===m),setTests:m=>{e.value=m}}});async function hs(){await P.transaction("rw",P.students,P.tests,P.grades,async()=>{await P.students.clear(),await P.tests.clear(),await P.grades.clear();const t=[{id:F(),name:"Jan",surname:"Kowalski",gender:"Male"},{id:F(),name:"John",surname:"Smith",gender:"Male"},{id:F(),name:"William",surname:"Brown",gender:"Male"},{id:F(),name:"Daniel",surname:"Novak",gender:"Male"},{id:F(),name:"Katarzyna",surname:"Wiśniewska",gender:"Female"},{id:F(),name:"Emily",surname:"Johnson",gender:"Female"},{id:F(),name:"Sofia",surname:"Rossi",gender:"Female"},{id:F(),name:"Maria",surname:"Silva",gender:"Female"}],e=[{id:F(),name:"Math - Algebra",maxPoints:20,weight:3,requiredPoints:10,isMandatory:!0},{id:F(),name:"English - Grammar",maxPoints:15,weight:3,requiredPoints:8,isMandatory:!0},{id:F(),name:"History - Ancient Rome",maxPoints:25,weight:2,requiredPoints:null,isMandatory:!0},{id:F(),name:"Science - Physics Basics",maxPoints:30,weight:2,requiredPoints:15,isMandatory:!0},{id:F(),name:"Geography - Europe",maxPoints:20,weight:2,requiredPoints:12,isMandatory:!0},{id:F(),name:"Biology - Human Body",maxPoints:25,weight:2,requiredPoints:14,isMandatory:!0},{id:F(),name:"Computer Science - Basics",maxPoints:40,weight:2,requiredPoints:20,isMandatory:!1},{id:F(),name:"Art - Painting",maxPoints:50,weight:1,requiredPoints:null,isMandatory:!1},{id:F(),name:"Music - Jazz",maxPoints:50,weight:1,requiredPoints:20,isMandatory:!1},{id:F(),name:"Chemistry - Chemical Reactions",maxPoints:50,weight:3,requiredPoints:20,isMandatory:!1}],o=[{studentId:t[0].id,testId:e[0].id,points:20},{studentId:t[0].id,testId:e[1].id,points:14},{studentId:t[0].id,testId:e[2].id,points:23},{studentId:t[0].id,testId:e[3].id,points:27},{studentId:t[0].id,testId:e[4].id,points:19},{studentId:t[0].id,testId:e[5].id,points:18},{studentId:t[0].id,testId:e[6].id,points:37},{studentId:t[0].id,testId:e[7].id,points:46},{studentId:t[0].id,testId:e[9].id,points:47},{studentId:t[1].id,testId:e[0].id,points:16},{studentId:t[1].id,testId:e[1].id,points:7},{studentId:t[1].id,testId:e[2].id,points:21},{studentId:t[1].id,testId:e[3].id,points:20},{studentId:t[1].id,testId:e[5].id,points:17},{studentId:t[1].id,testId:e[6].id,points:25},{studentId:t[1].id,testId:e[8].id,points:30},{studentId:t[2].id,testId:e[0].id,points:18},{studentId:t[2].id,testId:e[1].id,points:12},{studentId:t[2].id,testId:e[2].id,points:24},{studentId:t[2].id,testId:e[3].id,points:25},{studentId:t[2].id,testId:e[4].id,points:15},{studentId:t[2].id,testId:e[5].id,points:23},{studentId:t[2].id,testId:e[6].id,points:38},{studentId:t[2].id,testId:e[7].id,points:40},{studentId:t[2].id,testId:e[8].id,points:48},{studentId:t[2].id,testId:e[9].id,points:19},{studentId:t[3].id,testId:e[0].id,points:17},{studentId:t[3].id,testId:e[1].id,points:6},{studentId:t[3].id,testId:e[2].id,points:19},{studentId:t[3].id,testId:e[3].id,points:27},{studentId:t[3].id,testId:e[5].id,points:10},{studentId:t[3].id,testId:e[7].id,points:25},{studentId:t[4].id,testId:e[0].id,points:20},{studentId:t[4].id,testId:e[1].id,points:15},{studentId:t[4].id,testId:e[2].id,points:23},{studentId:t[4].id,testId:e[3].id,points:29},{studentId:t[4].id,testId:e[4].id,points:18},{studentId:t[4].id,testId:e[5].id,points:24},{studentId:t[4].id,testId:e[6].id,points:39},{studentId:t[4].id,testId:e[9].id,points:45},{studentId:t[5].id,testId:e[0].id,points:5},{studentId:t[5].id,testId:e[1].id,points:8},{studentId:t[5].id,testId:e[2].id,points:18},{studentId:t[5].id,testId:e[3].id,points:12},{studentId:t[5].id,testId:e[4].id,points:9},{studentId:t[5].id,testId:e[8].id,points:45},{studentId:t[5].id,testId:e[9].id,points:30},{studentId:t[6].id,testId:e[0].id,points:11},{studentId:t[6].id,testId:e[1].id,points:13},{studentId:t[6].id,testId:e[2].id,points:14},{studentId:t[6].id,testId:e[3].id,points:25},{studentId:t[6].id,testId:e[5].id,points:19},{studentId:t[6].id,testId:e[6].id,points:36},{studentId:t[7].id,testId:e[0].id,points:15},{studentId:t[7].id,testId:e[1].id,points:6},{studentId:t[7].id,testId:e[2].id,points:10},{studentId:t[7].id,testId:e[3].id,points:21},{studentId:t[7].id,testId:e[4].id,points:11},{studentId:t[7].id,testId:e[5].id,points:24},{studentId:t[7].id,testId:e[6].id,points:10},{studentId:t[7].id,testId:e[7].id,points:47},{studentId:t[7].id,testId:e[8].id,points:40},{studentId:t[7].id,testId:e[9].id,points:42}];await P.students.bulkAdd(t),await P.tests.bulkAdd(e),await P.grades.bulkAdd(o)})}async function _s(){return await je(P,{prettyJson:!0})}async function ys(t){const e=new Blob([t],{type:"application/json"});await P.transaction("rw",P.tables,async()=>{for(const o of P.tables)await o.clear()}),await Je(P,e)}const re=le("register",()=>{const t=w(!1),e=j(()=>t.value),o=W(),n=oe(),s=he(),a=O(),r=L(),g=async()=>{t.value||(t.value=!0,await us(),await os(),n.setGradeThresholds(await Ce()),s.setSettings(await Me()??{id:"global",editWithDialog:!0}),a.setStudents(await $e()),r.setTests(await ke()),o.setGrades(await we()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},m=async()=>{e.value||(t.value=!0,await hs(),n.setGradeThresholds(await Ce()),s.setSettings(await Me()??{id:"global",editWithDialog:!0}),a.setStudents(await $e()),r.setTests(await ke()),o.setGrades(await we()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},u=async()=>{const v=await _s();He.saveAs(v,"register-class-data.json")},d=async v=>{await ys(v),await g()},i=j(()=>r.tests.map(v=>({field:v.id,header:v.name}))),p=j(()=>a.students.map(v=>{const h={studentId:v.id,fullName:`${v.name} ${v.surname}`};for(const x of r.tests){const _=o.grades.find(I=>I.studentId===v.id&&I.testId===x.id);h[x.id]=_?_.points:-1}return h}));return{isLoading:e,testColumns:i,studentGrades:p,loadData:g,loadDemoData:m,exportToJson:u,importFromJson:d}}),xs=D({__name:"App",setup(t){const e=re();return E(()=>{console.log("Loading Data"),e.loadData()}),(o,n)=>{const s=b("router-view");return y(),S(s)}}}),ws=D({__name:"SideBarItem",props:{to:{type:String,required:!0},label:{type:String,required:!0},icon:String,active:{type:Boolean,default:!1}},setup(t){const e=t;return(o,n)=>{const s=b("router-link");return y(),B("li",null,[l(s,{to:t.to},{default:f(()=>[c("div",{class:de(["px-4 py-1 rounded-md hover:bg-sidebaritem-hover-background transition duration-75 space-x-2",{"bg-sidebaritem-active-background":e.active}])},[c("i",{class:de(t.icon)},null,2),c("span",null,M(t.label),1)],2)]),_:1},8,["to"])])}}}),Is={class:"font-semibold uppercase text-sm"},Ss=D({__name:"SideBar",props:{visible:{type:Boolean},isLargeScreen:{type:Boolean}},setup(t){const e=w([{label:"Home",items:[{label:"Dashboard",icon:"pi pi-home",route:"/"}]},{label:"Register",items:[{label:"Grades",icon:"pi pi-objects-column",route:"/grades"},{label:"Tests",icon:"pi pi-book",route:"/tests"},{label:"Students",icon:"pi pi-users",route:"/students"},{label:"Settings",icon:"pi pi-cog",route:"/settings"}]}]);return(o,n)=>(y(),B("nav",{class:de(["fixed w-64 flex flex-col overflow-auto transition-all duration-500 ease-in-out z-30",{"card m-4 h-[calc(100vh-6rem)] top-16":o.isLargeScreen,"bg-white h-full top-0 p-4":!o.isLargeScreen,"left-[-18rem]":!o.visible,"left-0":o.visible}])},[(y(!0),B(J,null,be(e.value,s=>(y(),B("div",{key:s.label,class:"space-y-1"},[c("h3",Is,M(s.label),1),c("ul",null,[(y(!0),B(J,null,be(s.items,a=>(y(),S(ws,{key:a.route,label:a.label,icon:a.icon,to:a.route,active:o.$route.path===a.route,onClick:n[0]||(n[0]=r=>o.$emit("select"))},null,8,["label","icon","to","active"]))),128))])]))),128))],2))}}),te=(t,e)=>{const o=t.__vccOpts||t;for(const[n,s]of e)o[n]=s;return o},Ps={},Ds={class:"fixed w-full h-16 flex items-center border-b-2 border-primary-border p-4 pl-6 shadow-md bg-topbar-background z-10 gap-4"};function Ts(t,e){const o=b("Button");return y(),B("header",Ds,[l(o,{icon:"pi pi-bars",severity:"secondary",variant:"text",rounded:"","aria-label":"Bookmark",onClick:e[0]||(e[0]=n=>t.$emit("toggle-sidebar"))}),e[1]||(e[1]=c("h3",null,"Class Register",-1))])}const Cs=te(Ps,[["render",Ts]]),Ms={class:"min-h-full"},$s={key:0,class:"fixed top-0 left-0 w-full h-full bg-black/40 z-[9999] flex items-center justify-center"},ks=D({__name:"DefaultLayout",setup(t){const e=re(),o=w(!0),n=w(window.innerWidth>=1280),s=()=>{const r=n.value;n.value=window.innerWidth>=1280,!r&&n.value&&(o.value=!0),r&&!n.value&&(o.value=!1)};window.addEventListener("resize",s),E(()=>{n.value&&(o.value=!0),n.value||(o.value=!1)});const a=()=>{o.value=!o.value};return(r,g)=>{const m=b("ProgressSpinner"),u=b("router-view"),d=b("ConfirmDialog"),i=b("Toast");return y(),B(J,null,[c("div",Ms,[l(Ke,null,{default:f(()=>[o.value&&!n.value?(y(),B("div",{key:0,class:"fixed inset-0 bg-black/50 z-20",onClick:a})):N("",!0)]),_:1}),l(Cs,{onToggleSidebar:a}),l(Ss,{visible:o.value,isLargeScreen:n.value,onSelect:g[0]||(g[0]=p=>n.value?null:a())},null,8,["visible","isLargeScreen"]),ae(e).isLoading?(y(),B("div",$s,[l(m,{style:{width:"200px",height:"200px"},strokeWidth:"4",animationDuration:".8s"})])):(y(),B("div",{key:1,class:de(["pt-16 transition-all duration-500 ease-in-out",{"ml-0":!o.value,"ml-72":o.value&&n.value}])},[l(u)],2))]),l(d,{draggable:!1}),l(i)],64)}}}),Gs=te(ks,[["__scopeId","data-v-4519c803"]]),qs={},Fs={class:"card"},As={class:"mb-2"};function Bs(t,e){return y(),B("div",Fs,[c("div",As,[ye(t.$slots,"header")]),ye(t.$slots,"body")])}const A=te(qs,[["render",Bs]]),Ns={class:"relative w-full h-[90%]"},Rs=D({__name:"ClassPassRate",setup(t){const e=O(),o=L(),n=W(),s=w(),a=w(),r=()=>{let u=0,d=0,i=0,p=0;o.tests.forEach(v=>{e.students.forEach(h=>{const x=n.getGrade(h.id,v.id);x?!v.requiredPoints||x.points>=v.requiredPoints?u++:d++:v.isMandatory?i++:p++})}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[u,d,i,p],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},g=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return E(()=>{r(),g()}),(u,d)=>{const i=b("Chart");return y(),S(A,null,{header:f(()=>d[0]||(d[0]=[c("h3",null,"Class pass rate",-1)])),body:f(()=>[c("div",Ns,[l(i,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[390px]"},null,8,["data","options"])])]),_:1})}}}),Vs={class:"flex flex-col justify-center items-center w-fit"},U=D({__name:"PerformanceCard",props:{title:{},value:{},max:{}},setup(t){const e=t;return(o,n)=>{const s=b("Knob");return y(),B("div",Vs,[c("h4",null,M(o.title),1),l(s,{modelValue:e.value,size:200,max:o.max,readonly:""},null,8,["modelValue","max"])])}}}),Ws={class:"flex justify-evenly flex-wrap gap-4 mt-2"},Ls=D({__name:"ClassPerformance",props:{classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:f(()=>n[0]||(n[0]=[c("h3",null,"Class performance",-1)])),body:f(()=>[c("div",Ws,[l(U,{title:"Weighted Average",value:e.classPerformance.weightedAverage},null,8,["value"]),l(U,{title:"Median",value:e.classPerformance.median},null,8,["value"]),l(U,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:50},null,8,["value"]),l(U,{title:"Max",value:e.classPerformance.max},null,8,["value"]),l(U,{title:"Min",value:e.classPerformance.min},null,8,["value"])])]),_:1}))}}),Es={class:"relative w-full h-[90%]"},Os=D({__name:"FinalGradeStats",setup(t){const e=O(),o=L(),n=W(),s=oe(),a=w(),r=w(),g=()=>{const d=e.students,i=o.tests,p=n.grades,v=s.gradeThresholds.slice().sort((_,I)=>_.minPercentage-I.minPercentage),h={},x={};v.forEach(_=>{h[_.name]=0,x[_.name]=0});for(const _ of d){const I=Ae(p,i,_.id),T=v.slice().sort((G,V)=>V.minPercentage-G.minPercentage).find(G=>I>=G.minPercentage);T&&(_.gender==="Male"?h[T.name]++:_.gender==="Female"&&x[T.name]++)}a.value={labels:v.map(_=>_.name),datasets:[{label:"Male",data:v.map(_=>h[_.name]),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:v.map(_=>x[_.name]),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}},m=()=>{r.value={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Students number"},ticks:{stepSize:1,callback:function(d){return Number(d)%1===0?d:null}}},x:{title:{display:!0,text:"Grade"}}}}},u=()=>{g(),m()};return E(()=>{u()}),(d,i)=>{const p=b("Chart");return y(),S(A,null,{header:f(()=>i[0]||(i[0]=[c("h3",null,"Final grade stats",-1)])),body:f(()=>[c("div",Es,[l(p,{type:"bar",data:a.value,options:r.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),zs={class:"relative w-full h-[90%]"},Us=D({__name:"MandatoryTestsCount",setup(t){const e=L(),o=w(),n=w(),s=()=>{let g=0,m=0;e.tests.forEach(u=>{u.isMandatory?g++:m++}),o.value={labels:["Mandatory","Optional"],datasets:[{data:[g,m],backgroundColor:["rgba(101, 219, 144, 0.6)","rgba(6, 182, 212, 0.6)"],borderColor:["rgb(101, 219, 144)","rgb(6, 182, 212)"],borderWidth:1}]}},a=()=>{n.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}};return E(()=>{s(),a()}),(g,m)=>{const u=b("Chart");return y(),S(A,null,{header:f(()=>m[0]||(m[0]=[c("h3",null,"Mandatory Tests Count",-1)])),body:f(()=>[c("div",zs,[l(u,{type:"bar",data:o.value,options:n.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),js={class:"relative w-full h-[90%]"},Js=D({__name:"TestGenderComparison",setup(t){const e=O(),o=L(),n=W(),s=w(),a=w(),r=()=>{const u=o.tests,d=e.students,i=n.grades,p=[],v=[],h=[],x=[];u.forEach(_=>{p.push(k(Ie(i,d,_,"Male"))),v.push(k(Ie(i,d,_,"Female"))),h.push(k(ue(i,d,_.id,"Male"))),x.push(k(ue(i,d,_.id,"Female")))}),s.value={labels:u.map(_=>_.name),datasets:[{label:"Male",data:p,rawData:h,borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.3)"},{label:"Female",data:v,rawData:x,borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.3)"}]}},g=()=>{a.value={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,min:0,max:100}},plugins:{tooltip:{callbacks:{label:u=>{const d=u.dataset,i=u.formattedValue,p=d.rawData[u.dataIndex];return`${d.label}: ${p} (${i}%)`}}}}}};return E(()=>{r(),g()}),(u,d)=>{const i=b("Chart");return y(),S(A,null,{header:f(()=>d[0]||(d[0]=[c("h3",null,"Test comparision",-1)])),body:f(()=>[c("div",js,[l(i,{type:"radar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),Hs={class:"cards-section"},Ks={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},Qs=D({__name:"DashboardView",setup(t){O();const e=L(),o=W(),n=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),s=()=>{const a=e.tests,r=o.grades;n.value={weightedAverage:k(Be(r,a)),median:k(Ne(r,a)),standardDeviation:k(Re(r,a)),min:k(Ve(r,a)),max:k(We(r,a))}};return E(()=>{s()}),(a,r)=>(y(),B(J,null,[r[0]||(r[0]=c("h2",{class:"title-section"},"Dashboard",-1)),c("div",Hs,[c("div",Ks,[l(Os,{class:"sm:col-span-2 lg:col-span-2"}),l(Rs,{class:"sm:col-span-1 lg:col-span-1"}),l(Us,{class:"sm:col-span-1 lg:col-span-1"}),l(Ls,{"class-performance":n.value,class:"sm:col-span-2 lg:col-span-2"},null,8,["class-performance"]),l(Js,{class:"sm:col-span-2 lg:col-span-2"})])])],64))}}),Ys={class:"flex flex-col gap-1"},Zs={class:"flex justify-end gap-2 mt-4"},Xs=D({__name:"EditGradeDialog",props:ie({studentId:{},testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=L(),o=W(),n=Z(t,"visible"),s=t,a=Q({name:"",maxPoints:0}),r=Q({score:null}),g=async i=>{if(i){const p=e.getTest(s.testId);p&&Object.assign(a,{name:p.name,maxPoints:p.maxPoints});const h=o.getGrade(s.studentId,s.testId)?.points??null;r.score=h,await ce(),r.score=null}};X(()=>n.value,i=>{g(i)});const m=()=>{n.value=!1},u=j(()=>ee($.object({score:$.number("Score is required").min(0,"Score cannot be less than 0").max(a.maxPoints,`Score cannot be greater than ${a.maxPoints}`).nullable()}))),d=i=>{if(i.valid){const p=i.states.score?.value;if(typeof p=="number"||p===null){const v={studentId:s.studentId,testId:s.testId,points:p};p!==void 0?o.updateGrade(v):o.deleteGrade(s.studentId,s.testId),m()}else console.error("Wrong data from form!")}};return(i,p)=>{const v=b("InputNumber"),h=b("FloatLabel"),x=b("Message"),_=b("Button"),I=b("Form"),T=b("Dialog");return y(),S(T,{header:"Edit Grade",visible:n.value,"onUpdate:visible":p[0]||(p[0]=G=>n.value=G),modal:!0,draggable:!1,class:"w-70"},{default:f(()=>[l(I,{"initial-values":r,resolver:u.value,onSubmit:d,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(G=>[c("h5",null,"Number must be between 0 and "+M(a.maxPoints),1),c("div",Ys,[l(h,{variant:"on"},{default:f(()=>[l(v,{id:"score",name:"score",class:"w-full",variant:"filled",min:0,max:a.maxPoints,maxFractionDigits:1,step:.1,allowEmpty:!0},null,8,["max"]),p[1]||(p[1]=c("label",{for:"score"},"Score",-1))]),_:1,__:[1]}),G.score?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(G.score.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Zs,[l(_,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),l(_,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initial-values","resolver"])]),_:1},8,["visible"])}}}),ea={class:"flex flex-wrap gap-2 items-center justify-between"},ta={class:"w-full cursor-pointer px-3 py-4"},sa=["onClick"],aa=D({__name:"GradesDatatable",setup(t){const e=re(),o=L(),n=he(),s=W(),a=w(),r=w(!1),g=w({}),m=()=>{g.value.fullName={operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]};for(const x of e.testColumns)g.value[x.field]||(g.value[x.field]={operator:ne.AND,constraints:[{value:null,matchMode:Y.EQUALS}]})};m(),E(()=>{a.value=n.settings?.editWithDialog}),X(()=>e.testColumns,x=>{const _=x.map(I=>I.field);for(const I of x)g.value[I.field]||(g.value[I.field]={operator:ne.AND,constraints:[{value:null,matchMode:Y.EQUALS}]});for(const I in g.value)I!=="fullName"&&!_.includes(I)&&delete g.value[I]},{immediate:!0});const u=()=>{m()},d=Q({studentId:"",testId:""}),i=(x,_)=>{a.value&&(d.studentId=x,d.testId=_,r.value=!0)},p=x=>{const{data:_,newValue:I,field:T}=x,G={studentId:_.studentId,testId:T,points:I},V=o.getTest(G.testId);if(V)if(I!=null){if(!v(G.points,V.maxPoints))return;s.updateGrade(G)}else s.deleteGrade(G.studentId,G.testId)},v=(x,_)=>x>=0&&x<=_,h=x=>{const _=o.getTest(x);return _?`Number must be between 0 and ${_.maxPoints}`:"No test info"};return(x,_)=>{const I=b("Button"),T=b("InputText"),G=b("Column"),V=b("InputNumber"),z=b("DataTable"),pe=Qe("tooltip");return y(),B(J,null,[l(z,{value:ae(e).studentGrades,editMode:"cell",class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:g.value,"onUpdate:filters":_[1]||(_[1]=q=>g.value=q),filterDisplay:"menu",onCellEditComplete:p},{header:f(()=>[c("div",ea,[l(I,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:_[0]||(_[0]=q=>u())})])]),empty:f(()=>_[3]||(_[3]=[c("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:f(()=>[l(G,{sortable:"",field:"fullName",header:"Student",filterField:"fullName",frozen:""},{body:f(({data:q})=>[c("div",ta,M(q.fullName),1)]),filter:f(({filterModel:q})=>[l(T,{modelValue:q.value,"onUpdate:modelValue":H=>q.value=H,type:"text",placeholder:"Search by FullName"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),(y(!0),B(J,null,be(ae(e).testColumns,q=>(y(),S(G,{sortable:"",key:q.field,field:q.field,header:q.header,filterField:q.field,dataType:"numeric"},Ye({body:f(({data:H})=>[c("div",{class:"w-full min-h-1 cursor-pointer px-3 py-4",onClick:se=>i(H.studentId,q.field)},M(ae(s).getGrade(H.studentId,q.field)?.points??"-"),9,sa)]),filter:f(({filterModel:H})=>[l(V,{modelValue:H.value,"onUpdate:modelValue":se=>H.value=se},null,8,["modelValue","onUpdate:modelValue"])]),_:2},[a.value?void 0:{name:"editor",fn:f(({data:H,field:se})=>[Ze(l(V,{modelValue:H[se],"onUpdate:modelValue":ze=>H[se]=ze,min:0,autofocus:"",fluid:"",allowEmpty:!0,defaultValue:H[se]===-1?null:H[se]},null,8,["modelValue","onUpdate:modelValue","defaultValue"]),[[pe,h(se),void 0,{top:!0}]])]),key:"0"}]),1032,["field","header","filterField"]))),128))]),_:1},8,["value","filters"]),l(Xs,{visible:r.value,"onUpdate:visible":_[2]||(_[2]=q=>r.value=q),studentId:d.studentId,testId:d.testId},null,8,["visible","studentId","testId"])],64)}}}),na=te(aa,[["__scopeId","data-v-2c645f2e"]]),oa={class:"cards-section"},ia={class:"flex flex-col"},la={class:"flex justify-center"},ra=D({__name:"GradesView",setup(t){return(e,o)=>(y(),B(J,null,[o[1]||(o[1]=c("h2",{class:"title-section"},"Grades",-1)),c("div",oa,[l(A,null,{header:f(()=>o[0]||(o[0]=[c("h3",null,"List of grades",-1)])),body:f(()=>[c("div",ia,[c("div",la,[l(na)])])]),_:1})])],64))}}),da={class:"flex flex-wrap gap-2 items-center justify-between"},ua={class:"w-full h-full cursor-pointer px-3 py-4"},ca={class:"w-full h-full cursor-pointer px-3 py-4"},ma=D({__name:"StudentsDatatable",setup(t){const e=O(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:Y.CONTAINS},name:{operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]},surname:{operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]}}};n();const s=()=>{n()},a=r=>{_e.push(`/student/${r.data.id}`)};return(r,g)=>{const m=b("Button"),u=b("InputIcon"),d=b("InputText"),i=b("IconField"),p=b("Column"),v=b("DataTable");return y(),S(v,{value:ae(e).students,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":g[2]||(g[2]=h=>o.value=h),filterDisplay:"menu",globalFilterFields:["name","surname"],onRowSelect:a,selectionMode:"single"},{header:f(()=>[c("div",da,[l(m,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:g[0]||(g[0]=h=>s())}),l(i,null,{default:f(()=>[l(u,null,{default:f(()=>g[3]||(g[3]=[c("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),l(d,{modelValue:o.value.global.value,"onUpdate:modelValue":g[1]||(g[1]=h=>o.value.global.value=h),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:f(()=>g[4]||(g[4]=[c("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:f(()=>[l(p,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:f(({data:h})=>[c("div",ua,M(h.name),1)]),filter:f(({filterModel:h})=>[l(d,{modelValue:h.value,"onUpdate:modelValue":x=>h.value=x,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{sortable:"",field:"surname",header:"Surname",filterField:"surname"},{body:f(({data:h})=>[c("div",ca,M(h.surname),1)]),filter:f(({filterModel:h})=>[l(d,{modelValue:h.value,"onUpdate:modelValue":x=>h.value=x,type:"text",placeholder:"Search by Surname"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])}}}),pa=te(ma,[["__scopeId","data-v-0b7dc5b3"]]);function Le(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.maxPoints=="number"&&typeof t.weight=="number"&&(typeof t.requiredPoints=="number"||t.requiredPoints===null)}function Ee(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.surname=="string"}function Oe(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.minPercentage=="number"}const ga={class:"flex flex-col gap-1"},fa={class:"flex flex-col gap-1"},va={class:"flex flex-col gap-1"},ba={class:"flex justify-end gap-2 mt-4"},ha=D({__name:"NewStudentDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=O(),o=K(),n=Z(t,"visible"),s=w(["Male","Female"]),a=Q({name:"",surname:"",gender:"Male"}),r=w(ee($.object({name:$.string("Name is required").min(1,"Name is required"),surname:$.string("Surname is required").min(1,"Surname is required"),gender:$.enum(["Male","Female"],"Gender is required")}))),g=()=>{n.value=!1},m=u=>{if(u.valid){const d={name:u.states.name.value,surname:u.states.surname.value,gender:u.states.gender.value};Ee(d)?(e.addStudent(d),o.add({severity:"success",summary:"Success",detail:"Successfully added student.",life:3e3}),g()):console.error("Wrong data from form!")}};return(u,d)=>{const i=b("InputText"),p=b("FloatLabel"),v=b("Message"),h=b("SelectButton"),x=b("Button"),_=b("Form"),I=b("Dialog");return y(),S(I,{header:"Add Student",visible:n.value,"onUpdate:visible":d[0]||(d[0]=T=>n.value=T),modal:!0,draggable:!1,class:"w-70"},{default:f(()=>[l(_,{resolver:r.value,onSubmit:m,"initial-values":a,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(T=>[c("div",ga,[l(p,{variant:"on"},{default:f(()=>[l(i,{id:"name",name:"name",variant:"filled",class:"w-60"}),d[1]||(d[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),T.name?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(T.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",fa,[l(p,{variant:"on"},{default:f(()=>[l(i,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),d[2]||(d[2]=c("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),T.surname?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(T.surname.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",va,[l(h,{name:"gender",options:s.value,allowEmpty:!1},null,8,["options"]),T.gender?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(T.gender.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",ba,[l(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:g}),l(x,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),_a={class:"cards-section"},ya={class:"mt-2 mb-4"},xa=D({__name:"StudentsListView",setup(t){const e=w(!1);return(o,n)=>{const s=b("Button");return y(),B(J,null,[n[3]||(n[3]=c("h2",{class:"title-section"},"Students",-1)),c("div",_a,[l(A,null,{header:f(()=>n[2]||(n[2]=[c("h3",null,"List of students",-1)])),body:f(()=>[c("div",ya,[l(s,{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=a=>e.value=!0)})]),l(pa)]),_:1})]),l(ha,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=a=>e.value=a)},null,8,["visible"])],64)}}}),wa={class:"flex flex-col gap-1"},Ia={class:"flex flex-col gap-1"},Sa={class:"flex flex-col gap-1"},Pa={class:"flex justify-end gap-2 mt-4"},Da=D({__name:"EditPersonalDataDialog",props:ie({studentId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=O(),o=K(),n=t,s=Z(t,"visible"),a=w(["Male","Female"]),r=Q({name:"",surname:"",gender:"Male"}),g=w(ee($.object({name:$.string("Name is required").min(1,"Name is required"),surname:$.string("Surname is required").min(1,"Surname is required"),gender:$.enum(["Male","Female"],"Gender is required")}))),m=()=>{s.value=!1},u=i=>{if(i.valid){const p={name:i.states.name.value,surname:i.states.surname.value,gender:i.states.gender.value};Ee(p)?(e.updateStudent(n.studentId,p),o.add({severity:"success",summary:"Success",detail:"Successfully edited student.",life:3e3}),m()):console.error("Wrong data from form!")}},d=i=>{if(i){const p=e.getStudent(n.studentId);p&&Object.assign(r,p)}};return X(s,i=>{d(i)}),(i,p)=>{const v=b("InputText"),h=b("FloatLabel"),x=b("Message"),_=b("SelectButton"),I=b("Button"),T=b("Form"),G=b("Dialog");return y(),S(G,{header:"Edit Student",visible:s.value,"onUpdate:visible":p[0]||(p[0]=V=>s.value=V),modal:""},{default:f(()=>[l(T,{resolver:g.value,onSubmit:u,"initial-values":r,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(V=>[c("div",wa,[l(h,{variant:"on"},{default:f(()=>[l(v,{id:"name",name:"name",variant:"filled",class:"w-60"}),p[1]||(p[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),V.name?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(V.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Ia,[l(h,{variant:"on"},{default:f(()=>[l(v,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),p[2]||(p[2]=c("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),V.surname?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(V.surname.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Sa,[l(_,{name:"gender",options:a.value,allowEmpty:!1},null,8,["options"]),V.gender?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(V.gender.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Pa,[l(I,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),l(I,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),Ta={class:"flex flex-wrap justify-evenly pb-6"},Ca={class:"flex flex-col justify-center items-center gap-1"},Ma={class:"flex flex-col justify-center items-center gap-1"},$a=D({__name:"ActionsStudent",props:{studentId:{}},setup(t){const e=O(),o=me(),n=K(),s=qe(),a=t,r=w(!1),g=()=>{o.require({message:"Are you sure you want to proceed? The student will be deleted.",header:"Delete student",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteStudent(a.studentId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted student",life:3e3}),s.push("/students")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete student",life:3e3})}}})};return(m,u)=>{const d=b("Button");return y(),S(A,null,{header:f(()=>u[3]||(u[3]=[c("h3",null,"Actions",-1)])),body:f(()=>[c("div",Ta,[c("div",Ca,[u[4]||(u[4]=c("h4",null,"Edit student data",-1)),l(d,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:u[0]||(u[0]=i=>r.value=!0)})]),c("div",Ma,[u[5]||(u[5]=c("h4",null,"Delete student",-1)),l(d,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:u[1]||(u[1]=i=>g())})])]),l(Da,{studentId:m.studentId,visible:r.value,"onUpdate:visible":u[2]||(u[2]=i=>r.value=i)},null,8,["studentId","visible"])]),_:1})}}}),ka={class:"relative w-full h-[90%]"},Ga=D({__name:"ComparisionClass",props:{individualData:{},classData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Individual",data:[e.individualData.weightedAverage,e.individualData.median,e.individualData.standardDeviation,e.individualData.min,e.individualData.max],backgroundColor:"rgba(101, 219, 144, 0.6)",borderColor:"rgb(101, 219, 144)",borderWidth:1},{label:"Class",data:[e.classData.weightedAverage,e.classData.median,e.classData.standardDeviation,e.classData.min,e.classData.max],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0,max:100}}});return E(()=>{o.value=s(),n.value=a()}),(g,m)=>{const u=b("Chart");return y(),S(A,null,{header:f(()=>m[0]||(m[0]=[c("h3",null,"Class Comparison",-1)])),body:f(()=>[c("div",ka,[l(u,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}});function Ge(t,e,o,n){const a=t.filter(d=>d.studentId===n).map(d=>{const i=e.find(p=>p.id===d.testId);if(!i)throw new Error(`Test ${d.testId} not found`);return{...i,points:d.points}}),r=a.reduce((d,i)=>d+i.weight,0),m=a.reduce((d,i)=>d+i.points/i.maxPoints*100*i.weight,0)/r,u=o.filter(d=>m>=d.minPercentage).sort((d,i)=>i.minPercentage-d.minPercentage)[0];return u?u.name:"—"}const qa={class:"flex-1 flex justify-center items-center"},Fa={class:"text-[clamp(1rem,5vw,4rem)] leading-none"},Aa={class:"mt-auto"},Ba=D({__name:"FinalGradeResult",props:{studentId:{}},setup(t){const e=O(),o=L(),n=W(),s=oe(),a=t,r=w(Ge(n.grades,o.tests,s.gradeThresholds,a.studentId)),g=j(()=>{const m=e.students,u=m.length||1,i=100-m.filter(h=>Ge(n.grades,o.tests,s.gradeThresholds,h.id)>r.value).length/u*100,p=Math.round(i),v=100-p;return[{label:"Lower or equal",color:"#60a5fa",value:p},{label:"Higher",color:"#fbbf24",value:v}]});return(m,u)=>{const d=b("MeterGroup");return y(),S(A,{class:"flex flex-col"},{header:f(()=>u[0]||(u[0]=[c("h3",null,"Final Grade",-1)])),body:f(()=>[c("div",qa,[c("h4",Fa,M(r.value),1)]),c("div",Aa,[u[1]||(u[1]=c("p",{class:"text-center my-2"},"Compared to other students' grades",-1)),l(d,{value:g.value},null,8,["value"])])]),_:1})}}}),Na=D({__name:"PersonalData",props:{name:{},surname:{},gender:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:f(()=>n[0]||(n[0]=[c("h3",null,"Personal Data",-1)])),body:f(()=>[c("h4",null,"Name: "+M(e.name),1),c("h4",null,"Surname: "+M(e.surname),1),c("h4",null,"Gender: "+M(e.gender),1)]),_:1}))}}),Ra={class:"flex-1 min-w-64 h-fit"},Va={class:"relative w-full h-[400px]"},fe=4,Wa=D({__name:"StudentResults",props:{studentId:{}},setup(t){const e=L(),o=W(),n=t,s=w(),a=w(),r=w(0),g=w(0),m=()=>{const p=o.grades.filter(_=>_.studentId===n.studentId).map(_=>{const I=e.tests.find(G=>G.id===_.testId),T=I?.maxPoints??100;return{testName:I?.name??"Unknown Test",score:_.points,maxScore:T,percentage:_.points/T*100}});g.value=p.length;const v=r.value*fe,h=v+fe,x=p.slice(v,h);s.value={labels:x.map(_=>_.testName),datasets:[{label:"Score",data:x.map(_=>_.percentage),originalScores:x.map(_=>_.score),maxScores:x.map(_=>_.maxScore),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},u=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:p=>{const v=p.dataset,h=p.dataIndex;return`${v.originalScores[h]} / ${v.maxScores[h]} points (${p.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},d=()=>{m(),u()};E(()=>{d()});const i=p=>{r.value=p.page,m()};return(p,v)=>{const h=b("Chart"),x=b("Paginator");return y(),S(A,null,{header:f(()=>v[0]||(v[0]=[c("h3",null,"Results",-1)])),body:f(()=>[c("div",Ra,[c("div",Va,[l(h,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),l(x,{rows:fe,totalRecords:g.value,page:r.value,onPage:i},null,8,["totalRecords","page"])])]),_:1})}}}),La=D({__name:"StudentResultsDatatable",props:{studentId:{}},setup(t){const e=L(),o=W(),n=t,s=j(()=>o.grades.filter(r=>r.studentId===n.studentId).map(r=>{const g=e.tests.find(p=>p.id===r.testId);if(!g)return null;const m=g.maxPoints,u=g.requiredPoints??0,d=k(r.points/m*100),i=r.points>=u;return{testName:g?.name??"Unknown Test",points:r.points,percentage:d,maxPoints:m,status:i}})),a=r=>r?"success":"warn";return(r,g)=>{const m=b("Column"),u=b("Tag"),d=b("DataTable");return y(),S(A,null,{header:f(()=>g[0]||(g[0]=[c("h3",null,"Results - details",-1)])),body:f(()=>[l(d,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:f(()=>[l(m,{field:"testName",header:"Test"}),l(m,{field:"points",header:"Score"}),l(m,{field:"percentage",header:"Normalized Score (%)"}),l(m,{field:"maxPoints",header:"Max Points"}),l(m,{field:"status",header:"Status"},{body:f(({data:i})=>[l(u,{value:i.status?"passed":"failed",severity:a(i.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),Ea=te(La,[["__scopeId","data-v-f81559d1"]]),Oa={class:"relative w-full h-[90%]"},za=D({__name:"StudentPassRate",props:{studentId:{}},setup(t){const e=L(),o=W(),n=t,s=w(),a=w(),r=()=>{let u=0,d=0,i=0,p=0;e.tests.forEach(v=>{const h=o.getGrade(n.studentId,v.id);h?!v.requiredPoints||h.points>=v.requiredPoints?u++:d++:v.isMandatory?i++:p++}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[u,d,i,p],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},g=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return E(()=>{r(),g()}),(u,d)=>{const i=b("Chart");return y(),S(A,null,{header:f(()=>d[0]||(d[0]=[c("h3",null,"Pass rate",-1)])),body:f(()=>[c("div",Oa,[l(i,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),Ua={class:"flex justify-evenly flex-wrap gap-4 mt-2"},ja=D({__name:"StudentPerformance",props:{individualPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:f(()=>n[0]||(n[0]=[c("h3",null,"Performance",-1)])),body:f(()=>[c("div",Ua,[l(U,{title:"Weighted Average",value:e.individualPerformance.weightedAverage},null,8,["value"]),l(U,{title:"Median",value:e.individualPerformance.median},null,8,["value"]),l(U,{title:"Standard Deviation",value:e.individualPerformance.standardDeviation,max:50},null,8,["value"]),l(U,{title:"Max",value:e.individualPerformance.max},null,8,["value"]),l(U,{title:"Min",value:e.individualPerformance.min},null,8,["value"])])]),_:1}))}}),Ja={class:"cards-section"},Ha={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},Ka=D({__name:"StudentDetailsView",props:{studentId:{}},setup(t){const e=O(),o=L(),n=W(),s=t,a=w(),r=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),g=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=()=>{const u=e.getStudent(s.studentId);if(!u)return;const d=n.grades;a.value=u;const i=o.tests.filter(p=>n.grades.some(v=>v.studentId===s.studentId&&v.testId===p.id));r.value={weightedAverage:k(Ae(d,i,s.studentId)),median:k(ts(d,i,s.studentId)),standardDeviation:k(ss(d,i,s.studentId)),min:k(as(d,s.studentId,i)),max:k(ns(d,s.studentId,i))},g.value={weightedAverage:k(Be(d,i)),median:k(Ne(d,i)),standardDeviation:k(Re(d,i)),min:k(Ve(d,i)),max:k(We(d,i))}};return E(()=>{m()}),X(()=>e.students,()=>{const u=e.getStudent(s.studentId);u&&(a.value=u)},{deep:!0}),(u,d)=>(y(),B(J,null,[d[0]||(d[0]=c("h2",{class:"title-section"},"Student Details",-1)),c("div",Ja,[a.value?(y(),B("div",Ha,[l(Na,{name:a.value.name,surname:a.value.surname,gender:a.value.gender,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","surname","gender"]),l($a,{"student-id":u.studentId,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["student-id"]),l(Ba,{"student-id":u.studentId,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["student-id"]),l(za,{"student-id":a.value.id,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["student-id"]),l(ja,{"individual-performance":r.value,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["individual-performance"]),l(Ga,{"individual-data":r.value,"class-data":g.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["individual-data","class-data"]),l(Wa,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["student-id"]),l(Ea,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["student-id"])])):N("",!0)])],64))}}),Qa={class:"flex flex-col gap-1"},Ya={class:"flex flex-col gap-1"},Za={class:"flex flex-col gap-1"},Xa={class:"flex items-center gap-2"},en={class:"flex flex-col gap-1"},tn={class:"flex items-center gap-2"},sn={class:"flex justify-end gap-2 mt-4"},an=D({__name:"NewTestDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=L(),o=K(),n=Z(t,"visible"),s=Q({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),a=()=>{n.value=!1},r=async i=>{i&&(s.weight=1,await ce(),s.weight=null)};X(()=>n.value,i=>{r(i)});const g={name:$.string().min(1,"Name is required"),maxPoints:$.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:$.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:$.boolean()},m=$.discriminatedUnion("isRequired",[$.object({...g,isRequired:$.literal(!0),requiredPoints:$.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(i=>i.requiredPoints<=i.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),$.object({...g,isRequired:$.literal(!1),requiredPoints:$.number().nullable().optional()})]),u=w(ee(m)),d=i=>{if(i.valid){const p={name:i.states.name.value,maxPoints:i.states.maxPoints.value,weight:i.states.weight.value,requiredPoints:i.states.isRequired.value?i.states.requiredPoints.value:null,isMandatory:i.states.isRequired.value?i.states.isMandatory.value:!1};Le(p)?(e.addTest(p),o.add({severity:"success",summary:"Success",detail:"Successfully added test.",life:3e3}),a()):console.error("Wrong data from form!")}};return(i,p)=>{const v=b("InputText"),h=b("FloatLabel"),x=b("Message"),_=b("InputNumber"),I=b("Checkbox"),T=b("Button"),G=b("Form"),V=b("Dialog");return y(),S(V,{header:"Add Test",visible:n.value,"onUpdate:visible":p[0]||(p[0]=z=>n.value=z),modal:!0,draggable:!1,class:"w-70"},{default:f(()=>[l(G,{initialValues:s,resolver:u.value,onSubmit:d,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(z=>[c("div",Qa,[l(h,{variant:"on"},{default:f(()=>[l(v,{id:"name",name:"name",variant:"filled",class:"w-full"}),p[1]||(p[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),z.name?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(z.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Ya,[l(h,{variant:"on"},{default:f(()=>[l(_,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),p[2]||(p[2]=c("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),z.maxPoints?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(z.maxPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Za,[l(h,{variant:"on"},{default:f(()=>[l(_,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1}),p[3]||(p[3]=c("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),z.weight?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(z.weight.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Xa,[l(I,{id:"isRequired",name:"isRequired",binary:""}),p[4]||(p[4]=c("label",{for:"isRequired"},"Required",-1))]),c("div",en,[l(h,{variant:"on"},{default:f(()=>[l(_,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1,disabled:!z.isRequired?.value},null,8,["disabled"]),p[5]||(p[5]=c("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),z.requiredPoints?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(z.requiredPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",tn,[l(I,{id:"isMandatory",name:"isMandatory",binary:""}),p[6]||(p[6]=c("label",{for:"isMandatory"},"Mandatory",-1))]),c("div",sn,[l(T,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),l(T,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),nn={class:"flex flex-wrap gap-2 items-center justify-between"},on={class:"w-full h-full cursor-pointer px-3 py-4"},ln={class:"w-full h-full cursor-pointer px-3 py-4"},rn={class:"w-full h-full cursor-pointer px-3 py-4"},dn=D({__name:"TestsDatatable",setup(t){const e=L(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:Y.CONTAINS},name:{operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]},weight:{operator:ne.AND,constraints:[{value:null,matchMode:Y.EQUALS}]},isMandatory:{value:null,matchMode:Y.EQUALS}}};n();const s=()=>{n()},a=g=>{_e.push(`/test/${g.data.id}`)},r=g=>g?"success":"info";return(g,m)=>{const u=b("Button"),d=b("InputIcon"),i=b("InputText"),p=b("IconField"),v=b("Column"),h=b("Tag"),x=b("Checkbox"),_=b("DataTable");return y(),S(_,{value:ae(e).tests,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":m[2]||(m[2]=I=>o.value=I),filterDisplay:"menu",globalFilterFields:["name","weight","isMandatory"],onRowSelect:a,selectionMode:"single"},{header:f(()=>[c("div",nn,[l(u,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:m[0]||(m[0]=I=>s())}),l(p,null,{default:f(()=>[l(d,null,{default:f(()=>m[3]||(m[3]=[c("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),l(i,{modelValue:o.value.global.value,"onUpdate:modelValue":m[1]||(m[1]=I=>o.value.global.value=I),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:f(()=>m[4]||(m[4]=[c("div",{class:"w-full h-full px-3 py-4"}," No tests found. ",-1)])),default:f(()=>[l(v,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:f(({data:I})=>[c("div",on,M(I.name),1)]),filter:f(({filterModel:I})=>[l(i,{modelValue:I.value,"onUpdate:modelValue":T=>I.value=T,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{field:"weight",header:"Weight",filterField:"weight"},{body:f(({data:I})=>[c("div",ln,M(I.weight),1)]),filter:f(({filterModel:I})=>[l(i,{modelValue:I.value,"onUpdate:modelValue":T=>I.value=T,type:"text",placeholder:"Search by Weight"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{field:"isMandatory",header:"Mandatory",dataType:"boolean"},{body:f(({data:I})=>[c("div",rn,[l(h,{value:I.isMandatory?"Yes":"No",severity:r(I.isMandatory)},null,8,["value","severity"])])]),filter:f(({filterModel:I})=>[m[5]||(m[5]=c("label",{for:"mandatory-filter",class:"font-bold"}," Mandatory ",-1)),l(x,{modelValue:I.value,"onUpdate:modelValue":T=>I.value=T,indeterminate:I.value===null,binary:"",inputId:"mandatory-filter"},null,8,["modelValue","onUpdate:modelValue","indeterminate"])]),_:1})]),_:1},8,["value","filters"])}}}),un=te(dn,[["__scopeId","data-v-d478af2a"]]),cn={class:"cards-section"},mn={class:"mb-4"},pn=D({__name:"TestsListView",setup(t){const e=w(!1);return(o,n)=>(y(),B(J,null,[n[3]||(n[3]=c("h2",{class:"title-section"},"Tests",-1)),c("div",cn,[l(A,null,{header:f(()=>n[2]||(n[2]=[c("h3",null,"List of tests",-1)])),body:f(()=>[c("div",mn,[l(ae(Fe),{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=s=>e.value=!0)})]),l(un)]),_:1})]),l(an,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=s=>e.value=s)},null,8,["visible"])],64))}}),gn={class:"flex flex-col gap-4"},fn={class:"flex flex-col gap-1"},vn=D({__name:"Export",setup(t){const e=re(),o=K(),n=async()=>{try{await e.exportToJson(),o.add({severity:"success",summary:"Success",detail:"Successfully saved data to json.",life:3e3})}catch(s){o.add({severity:"error",summary:"Error",detail:s.message,life:4e3})}};return(s,a)=>{const r=b("Button");return y(),S(A,null,{header:f(()=>a[1]||(a[1]=[c("h3",null,"Export",-1)])),body:f(()=>[c("div",gn,[c("div",fn,[a[2]||(a[2]=c("h4",null,"Save data",-1)),l(r,{label:"Save",icon:"pi pi-file-export",class:"w-fit",onClick:a[0]||(a[0]=g=>n())})])])]),_:1})}}}),bn={class:"flex flex-col gap-4 mt-2"},hn={class:"flex items-center gap-4"},_n=D({__name:"GeneralSettings",setup(t){const e=he(),o=w(),n=w([{name:"With dialog",code:"D"},{name:"With input",code:"I"}]);return E(()=>{e.settings?.editWithDialog?o.value={name:"With dialog",code:"D"}:o.value={name:"With input",code:"I"}}),X(o,()=>{o.value?.code==="D"?e.updateSettings({editWithDialog:!0}):e.updateSettings({editWithDialog:!1})},{deep:!0}),(s,a)=>{const r=b("Select");return y(),S(A,null,{header:f(()=>a[1]||(a[1]=[c("h3",null,"General",-1)])),body:f(()=>[c("div",bn,[c("div",hn,[a[2]||(a[2]=c("h5",null,"Editing grade:",-1)),l(r,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=g=>o.value=g),options:n.value,optionLabel:"name",placeholder:"Select",class:"w-full md:w-56"},null,8,["modelValue","options"])])])]),_:1})}}}),yn={class:"flex flex-col gap-1"},xn={class:"flex flex-col gap-1"},wn={class:"flex justify-end gap-2 mt-4"},In=D({__name:"EditGradeThresholdDialog",props:ie({id:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=oe(),o=K(),n=t,s=Z(t,"visible"),a=Q({id:"",name:"",minPercentage:null}),r=w(ee($.object({name:$.string("Grade name is required").min(1,"Grade name is required"),minPercentage:$.number("Min percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),g=async d=>{if(d){const i=e.getGradeThreshold(n.id);i&&Object.assign(a,i),await ce(),Object.assign(a,{name:"",minPercentage:null})}};X(s,d=>{g(d)});const m=()=>{s.value=!1},u=d=>{if(d.valid){const i={name:d.states.name.value,minPercentage:d.states.minPercentage.value};Oe(i)?(e.updateGradeThreshold(n.id,i),o.add({severity:"success",summary:"Success",detail:"Successfully edited grade threshold.",life:3e3}),s.value=!1):console.error("Wrong data from form")}};return(d,i)=>{const p=b("InputText"),v=b("FloatLabel"),h=b("Message"),x=b("InputNumber"),_=b("Button"),I=b("Form"),T=b("Dialog");return y(),S(T,{header:"Edit Grade Threshold",visible:s.value,"onUpdate:visible":i[0]||(i[0]=G=>s.value=G),modal:""},{default:f(()=>[l(I,{initialValues:a,resolver:r.value,onSubmit:u,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(G=>[c("div",yn,[l(v,{variant:"on"},{default:f(()=>[l(p,{id:"name",name:"name",variant:"filled",class:"w-60"}),i[1]||(i[1]=c("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),G.name?.invalid?(y(),S(h,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(G.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",xn,[l(v,{variant:"on"},{default:f(()=>[l(x,{id:"minPercentage",name:"minPercentage",class:"w-60",variant:"filled",min:0,max:100,maxFractionDigits:0,step:1}),i[2]||(i[2]=c("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),G.minPercentage?.invalid?(y(),S(h,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(G.minPercentage.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",wn,[l(_,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:m}),l(_,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),Sn={class:"w-full px-3 py-4"},Pn={class:"w-full px-3 py-4"},Dn={class:"flex gap-3 w-full justify-center min-h-1 px-3 py-1"},Tn=D({__name:"GradingScaleDatatable",setup(t){const e=oe(),o=me(),n=K(),s=w(""),a=w(!1),r=j(()=>[...e.gradeThresholds].sort((u,d)=>d.minPercentage-u.minPercentage)),g=u=>{s.value=u,a.value=!0},m=u=>{o.require({message:"Are you sure you want to proceed? The grade threshold will be deleted.",header:"Delete grade threshold",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteGradeThreshold(u),n.add({severity:"success",summary:"Success",detail:"Succesfully deleted grade threshold",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete grade threshold",life:3e3})}}})};return(u,d)=>{const i=b("Column"),p=b("Button"),v=b("DataTable");return y(),B(J,null,[l(v,{value:r.value,scrollable:"",class:"custom-table"},{default:f(()=>[l(i,{field:"name",header:"Grade"},{body:f(({data:h})=>[c("div",Sn,M(h.name),1)]),_:1}),l(i,{field:"minPercentage",header:"Percentage"},{body:f(({data:h})=>[c("div",Pn,M(h.minPercentage),1)]),_:1}),l(i,{field:"actions",header:"Actions",class:"w-40"},{body:f(({data:h})=>[c("div",Dn,[l(p,{icon:"pi pi-file-edit",rounded:"",severity:"info","aria-label":"Edit",onClick:x=>g(h.id)},null,8,["onClick"]),l(p,{icon:"pi pi-times-circle",rounded:"",severity:"danger","aria-label":"Delete",onClick:x=>m(h.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"]),l(In,{id:s.value,visible:a.value,"onUpdate:visible":d[0]||(d[0]=h=>a.value=h)},null,8,["id","visible"])],64)}}}),Cn=te(Tn,[["__scopeId","data-v-71cbc1fc"]]);function Mn(){return[{name:"Polish University",gradethresholds:[{name:"5.0",minPercentage:90},{name:"4.5",minPercentage:80},{name:"4.0",minPercentage:70},{name:"3.5",minPercentage:60},{name:"3.0",minPercentage:50},{name:"2.0",minPercentage:0}]},{name:"Polish",gradethresholds:[{name:"6",minPercentage:98},{name:"5",minPercentage:90},{name:"4",minPercentage:75},{name:"3",minPercentage:50},{name:"2",minPercentage:30},{name:"1",minPercentage:0}]},{name:"Japanese University",gradethresholds:[{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"Japanese",gradethresholds:[{name:"秀",minPercentage:90},{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"UK GCSE/A-Level",gradethresholds:[{name:"A*",minPercentage:90},{name:"A",minPercentage:80},{name:"B",minPercentage:70},{name:"C",minPercentage:60},{name:"D",minPercentage:50},{name:"E",minPercentage:40},{name:"F",minPercentage:30},{name:"G",minPercentage:20},{name:"U",minPercentage:0}]}]}const $n=D({__name:"SelectSystemDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=oe(),o=K(),n=Z(t,"visible"),s=Q(Mn()),a=w(ee(xe({system:Xe([xe({name:tt().min(1,"System is required.")}),et().refine(m=>!1,{message:"System is required."})])}))),r=()=>{n.value=!1},g=m=>{m.valid&&m.states.system&&(e.replaceGradeThresholds(m.states.system.value.gradethresholds),o.add({severity:"success",summary:"Success",detail:"Successfully changed grading system.",life:3e3}),r())};return(m,u)=>{const d=b("Listbox"),i=b("Message"),p=b("Button"),v=b("Form"),h=b("Dialog");return y(),S(h,{header:"Select Grading system",visible:n.value,"onUpdate:visible":u[0]||(u[0]=x=>n.value=x),modal:""},{default:f(()=>[l(v,{resolver:a.value,onSubmit:g,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(x=>[l(d,{name:"system",options:s,optionLabel:"name",virtualScrollerOptions:{itemSize:20},class:"w-full",listStyle:"height:250px",striped:"",fluid:""},null,8,["options"]),x.system?.invalid?(y(),S(i,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(x.system.error?.message),1)]),_:2},1024)):N("",!0),l(p,{label:"Select",type:"submit",autofocus:"",disabled:!x.system?.value},null,8,["disabled"])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),kn={class:"flex flex-col gap-1"},Gn={class:"flex flex-col gap-1"},qn={class:"flex justify-end gap-2 mt-4"},Fn=D({__name:"NewGradeThresholdDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=oe(),o=K(),n=Z(t,"visible"),s=w(ee($.object({name:$.string("Grade name is required").min(1,"Grade name is required"),minPercentage:$.number("Min Percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),a=()=>{n.value=!1},r=g=>{if(g.valid){const m={name:g.states.name.value,minPercentage:g.states.minPercentage.value};Oe(m)?(e.addGradeThreshold(m),o.add({severity:"success",summary:"Success",detail:"Successfully added grade threshold.",life:3e3}),a()):console.error("Wrong data from form!")}};return(g,m)=>{const u=b("InputText"),d=b("FloatLabel"),i=b("Message"),p=b("InputNumber"),v=b("Button"),h=b("Form"),x=b("Dialog");return y(),S(x,{header:"New Grade Threshold",visible:n.value,"onUpdate:visible":m[0]||(m[0]=_=>n.value=_),modal:""},{default:f(()=>[l(h,{resolver:s.value,onSubmit:r,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(_=>[c("div",kn,[l(d,{variant:"on"},{default:f(()=>[l(u,{id:"name",name:"name",variant:"filled",class:"w-60"}),m[1]||(m[1]=c("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),_.name?.invalid?(y(),S(i,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(_.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Gn,[l(d,{variant:"on"},{default:f(()=>[l(p,{id:"minPercentage",name:"minPercentage",class:"w-60",variant:"filled",min:0,max:100,step:1}),m[2]||(m[2]=c("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),_.minPercentage?.invalid?(y(),S(i,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(_.minPercentage.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",qn,[l(v,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),l(v,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),An={class:"mt-2 mb-4 flex justify-between"},Bn=D({__name:"GradingThresholds",setup(t){const e=w(!1),o=w(!1);return(n,s)=>{const a=b("Button");return y(),S(A,null,{header:f(()=>s[4]||(s[4]=[c("h3",null,"Grading thresholds",-1)])),body:f(()=>[c("div",An,[l(a,{label:"New",icon:"pi pi-plus",onClick:s[0]||(s[0]=r=>o.value=!0)}),l(a,{variant:"outlined",label:"Select System",icon:"pi pi-graduation-cap",onClick:s[1]||(s[1]=r=>e.value=!0)})]),l(Cn),l($n,{visible:e.value,"onUpdate:visible":s[2]||(s[2]=r=>e.value=r)},null,8,["visible"]),l(Fn,{visible:o.value,"onUpdate:visible":s[3]||(s[3]=r=>o.value=r)},null,8,["visible"])]),_:1})}}}),Nn={class:"flex flex-col gap-4"},Rn={class:"flex flex-col gap-1"},Vn={class:"flex flex-col gap-1"},Wn=D({__name:"Import",setup(t){const e=re(),o=me(),n=K(),s=w(null),a=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load demo data",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{try{await e.loadDemoData(),n.add({severity:"success",summary:"Success",detail:"Successfully loaded demo data",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to load demo data",life:3e3})}}})},r=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load data from device",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{s.value?.click()}})},g=async m=>{const u=m.target;if(!u.files?.length){n.add({severity:"info",summary:"Info",detail:"No file selected",life:3e3});return}const d=u.files[0];try{const i=await d.text();await e.importFromJson(i),n.add({severity:"success",summary:"Success",detail:"Successfully loaded data",life:3e3})}catch{n.add({severity:"error",summary:"Error",detail:"Failed to load data",life:3e3})}finally{u.value=""}};return(m,u)=>{const d=b("Button");return y(),S(A,null,{header:f(()=>u[2]||(u[2]=[c("h3",null,"Import",-1)])),body:f(()=>[c("div",Nn,[c("div",Rn,[u[3]||(u[3]=c("h4",null,"Load demo data",-1)),l(d,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:u[0]||(u[0]=i=>a())})]),c("div",Vn,[u[4]||(u[4]=c("h4",null,"Load data from device",-1)),l(d,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:u[1]||(u[1]=i=>r())}),c("input",{type:"file",ref_key:"fileInput",ref:s,accept:"application/json",class:"hidden",onChange:g},null,544)])])]),_:1})}}}),Ln={class:"cards-section"},En={class:"grid grid-cols-1 lg:grid-cols-2 auto-rows-auto w-full"},On=D({__name:"SettingsView",setup(t){return(e,o)=>(y(),B(J,null,[o[0]||(o[0]=c("h2",{class:"title-section"},"Settings",-1)),c("div",Ln,[c("div",En,[l(_n,{class:"lg:col-span-2"}),l(Bn,{class:"lg:col-span-2 row-start-2"}),l(Wn,{class:"lg:row-start-3"}),l(vn,{class:"lg:row-start-3"})])])],64))}}),zn={class:"flex flex-col gap-1"},Un={class:"flex flex-col gap-1"},jn={class:"flex flex-col gap-1"},Jn={class:"flex items-center gap-2"},Hn={class:"flex flex-col gap-1"},Kn={class:"flex items-center gap-2"},Qn={class:"flex justify-end gap-2 mt-4"},Yn=D({__name:"EditTestDialog",props:ie({testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ie(["submit"],["update:visible"]),setup(t,{emit:e}){const o=L(),n=t,s=Z(t,"visible"),a=e,r=Q({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),g={name:$.string().min(1,"Name is required"),maxPoints:$.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:$.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:$.boolean()},m=$.discriminatedUnion("isRequired",[$.object({...g,isRequired:$.literal(!0),requiredPoints:$.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(v=>v.requiredPoints<=v.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),$.object({...g,isRequired:$.literal(!1),requiredPoints:$.number().nullable().optional()})]),u=w(ee(m)),d=()=>{s.value=!1},i=v=>{if(v.valid){const h={name:v.states.name.value,maxPoints:v.states.maxPoints.value,weight:v.states.weight.value,requiredPoints:v.states.isRequired.value?v.states.requiredPoints.value:null,isMandatory:v.states.isRequired.value?v.states.isMandatory.value:!1};Le(h)?a("submit",h):console.error("Wrong data from form!")}},p=async v=>{if(v){const h=o.getTest(n.testId);h&&(Object.assign(r,h),r.isRequired=r.requiredPoints!==null),await ce(),Object.assign(r,{name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1})}};return X(()=>s.value,v=>{p(v)}),(v,h)=>{const x=b("InputText"),_=b("FloatLabel"),I=b("Message"),T=b("InputNumber"),G=b("Checkbox"),V=b("Button"),z=b("Form"),pe=b("Dialog");return y(),S(pe,{header:"Edit test",visible:s.value,"onUpdate:visible":h[0]||(h[0]=q=>s.value=q),modal:!0,draggable:!1,class:"w-70"},{default:f(()=>[l(z,{initialValues:r,resolver:u.value,onSubmit:i,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(q=>[c("div",zn,[l(_,{variant:"on"},{default:f(()=>[l(x,{id:"name",name:"name",variant:"filled",class:"w-full"}),h[1]||(h[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),q.name?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(q.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Un,[l(_,{variant:"on"},{default:f(()=>[l(T,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),h[2]||(h[2]=c("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),q.maxPoints?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(q.maxPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",jn,[l(_,{variant:"on"},{default:f(()=>[l(T,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),h[3]||(h[3]=c("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),q.weight?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(q.weight.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Jn,[l(G,{id:"isRequired",name:"isRequired",binary:""}),h[4]||(h[4]=c("label",{for:"isRequired"},"Required",-1))]),c("div",Hn,[l(_,{variant:"on"},{default:f(()=>[l(T,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1,disabled:!q.isRequired?.value},null,8,["disabled"]),h[5]||(h[5]=c("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),q.requiredPoints?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(q.requiredPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Kn,[l(G,{id:"isMandatory",name:"isMandatory",binary:""}),h[6]||(h[6]=c("label",{for:"isMandatory"},"Mandatory",-1))]),c("div",Qn,[l(V,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:d}),l(V,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),Zn={class:"flex gap-1"},Xn={class:"flex gap-1"},eo={class:"flex gap-1"},to={class:"flex justify-end gap-2 mt-4"},so=D({__name:"ChangeGradesDialog",props:ie({testId:{},editedTest:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=K(),o=L(),n=W(),s=t,a=Z(t,"visible"),r=Q({option:"Reduce"}),g=w(ee($.object({ingredient:$.string().min(1,{message:"Option is required."})}))),m=()=>{a.value=!1},u=async d=>{if(d.valid){let i=!1;const p=d.states.option.value;if(console.log(p),console.log(s.editedTest),console.log(o.getTest(s.testId)),p==="Reduce")await n.reduceGradesByTest(s.testId,s.editedTest.maxPoints),i=!0;else if(p==="Normalize"){const v=o.getTest(s.testId);v?(await n.normalizeGradesByTest(s.testId,v.maxPoints,s.editedTest.maxPoints),i=!0):console.error("Test doesn't exists!")}else p==="Delete"?(await n.deleteGradesByTest(s.testId),i=!0):console.error("Wrong data from form!");i&&(await o.updateTest(s.testId,s.editedTest),a.value=!1,e.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))}};return(d,i)=>{const p=b("RadioButton"),v=b("RadioButtonGroup"),h=b("Message"),x=b("Button"),_=b("Form"),I=b("Dialog");return y(),S(I,{header:"Change grades",visible:a.value,"onUpdate:visible":i[0]||(i[0]=T=>a.value=T),modal:!0,draggable:!1,class:"w-70"},{default:f(()=>[l(_,{initialValues:r,resolver:g.value,onSubmit:u,class:"flex flex-col gap-3 mt-2 w-full"},{default:f(T=>[l(v,{name:"option",class:"flex flex-col gap-3 w-full"},{default:f(()=>[c("div",Zn,[l(p,{inputId:"reduce",value:"Reduce"}),i[1]||(i[1]=c("label",{for:"reduce"},"Reduce grades to new maximum points",-1))]),c("div",Xn,[l(p,{inputId:"normalize",value:"Normalize"}),i[2]||(i[2]=c("label",{for:"normalize"},"Normalize grades to new maximum points",-1))]),c("div",eo,[l(p,{inputId:"delete",value:"Delete"}),i[3]||(i[3]=c("label",{for:"delete"},"Delete all grades",-1))])]),_:1}),T.option?.invalid?(y(),S(h,{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[R(M(T.option.error?.message),1)]),_:2},1024)):N("",!0),c("div",to,[l(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),l(x,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),ao={class:"flex flex-wrap justify-evenly pb-6"},no={class:"flex flex-col justify-center items-center gap-1"},oo={class:"flex flex-col justify-center items-center gap-1"},io=D({__name:"ActionsTest",props:{testId:{},maxPoints:{}},setup(t){const e=L(),o=me(),n=K(),s=qe(),a=t,r=w(!1),g=w(!1),m=Q({name:"",maxPoints:1,weight:0,requiredPoints:null,isMandatory:!1}),u=()=>{o.require({message:"Are you sure you want to proceed? The test will be deleted.",header:"Delete test",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteTest(a.testId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted test",life:3e3}),s.push("/tests")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete test",life:3e3})}}})},d=i=>{Object.assign(m,i),r.value=!1,m.maxPoints!==a.maxPoints?g.value=!0:(e.updateTest(a.testId,m),n.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))};return(i,p)=>{const v=b("Button");return y(),S(A,null,{header:f(()=>p[4]||(p[4]=[c("h3",null,"Actions",-1)])),body:f(()=>[c("div",ao,[c("div",no,[p[5]||(p[5]=c("h4",null,"Edit test data",-1)),l(v,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:p[0]||(p[0]=h=>r.value=!0)})]),c("div",oo,[p[6]||(p[6]=c("h4",null,"Delete test",-1)),l(v,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:p[1]||(p[1]=h=>u())})])]),l(Yn,{"test-id":i.testId,visible:r.value,"onUpdate:visible":p[2]||(p[2]=h=>r.value=h),onSubmit:d},null,8,["test-id","visible"]),l(so,{"test-id":i.testId,editedTest:m,visible:g.value,"onUpdate:visible":p[3]||(p[3]=h=>g.value=h)},null,8,["test-id","editedTest","visible"])]),_:1})}}}),lo=D({__name:"InfoData",props:{name:{},weight:{},requiredPoints:{},maxPoints:{},isMandatory:{type:Boolean}},setup(t){const e=t,o=n=>n?"success":"info";return(n,s)=>{const a=b("Tag");return y(),S(A,null,{header:f(()=>s[0]||(s[0]=[c("h3",null,"Info data",-1)])),body:f(()=>[c("h4",null,"Name: "+M(e.name),1),c("h4",null,"Weight: "+M(e.weight),1),c("h4",null,"Required points: "+M(e.requiredPoints??"-"),1),c("h4",null,"Max points: "+M(e.maxPoints),1),c("h4",null,[s[1]||(s[1]=R("Mandatory: ")),l(a,{value:n.isMandatory?"Yes":"No",severity:o(n.isMandatory)},null,8,["value","severity"])])]),_:1})}}}),ro={class:"flex justify-evenly flex-wrap gap-4 mt-2"},uo=D({__name:"TestPerformance",props:{maxPoints:{},classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:f(()=>n[0]||(n[0]=[c("h3",null,"Performance",-1)])),body:f(()=>[c("div",ro,[l(U,{title:"Weighted Average",value:e.classPerformance.weightedAverage,max:o.maxPoints},null,8,["value","max"]),l(U,{title:"Median",value:e.classPerformance.median,max:o.maxPoints},null,8,["value","max"]),l(U,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:o.maxPoints/2},null,8,["value","max"]),l(U,{title:"Max",value:e.classPerformance.max,max:o.maxPoints},null,8,["value","max"]),l(U,{title:"Min",value:e.classPerformance.min,max:o.maxPoints},null,8,["value","max"])])]),_:1}))}}),co={class:"flex-1 min-w-64 h-fit"},mo={class:"relative w-full h-[400px]"},ve=4,po=D({__name:"TestResults",props:{testId:{},maxScore:{}},setup(t){const e=O(),o=W(),n=t,s=w(),a=w(),r=w(0),g=w(0),m=()=>{const p=o.grades.filter(_=>_.testId===n.testId).map(_=>{const I=e.students.find(T=>T.id===_.studentId);return{name:I?.name,surname:I?.surname,score:_.points,percentage:_.points/n.maxScore*100}});g.value=p.length;const v=r.value*ve,h=v+ve,x=p.slice(v,h);s.value={labels:x.map(_=>`${_.name} ${_.surname}`),datasets:[{label:"Score",data:x.map(_=>_.percentage),scores:x.map(_=>_.score),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},u=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:p=>{const v=p.dataset,h=p.dataIndex;return`${v.scores[h]} / ${n.maxScore} points (${p.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},d=()=>{m(),u()};E(()=>{d()});const i=p=>{r.value=p.page,m()};return(p,v)=>{const h=b("Chart"),x=b("Paginator");return y(),S(A,null,{header:f(()=>v[0]||(v[0]=[c("h3",null,"Results",-1)])),body:f(()=>[c("div",co,[c("div",mo,[l(h,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),l(x,{rows:ve,totalRecords:g.value,page:r.value,onPage:i},null,8,["totalRecords","page"])])]),_:1})}}}),go=D({__name:"TestResultsDatatable",props:{testId:{},requiredPoints:{},maxPoints:{}},setup(t){const e=O(),o=W(),n=t,s=j(()=>o.grades.filter(r=>r.testId===n.testId).map(r=>{const g=e.students.find(d=>d.id===r.studentId);if(!g)return null;const m=k(r.points/n.maxPoints*100),u=n.requiredPoints!==null?r.points>=n.requiredPoints:!0;return{name:g.name,surname:g.surname,points:r.points,percentage:m,status:u}})),a=r=>r?"success":"warn";return(r,g)=>{const m=b("Column"),u=b("Tag"),d=b("DataTable");return y(),S(A,null,{header:f(()=>g[0]||(g[0]=[c("h3",null,"Results - details",-1)])),body:f(()=>[l(d,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:f(()=>[l(m,{field:"name",header:"Name"}),l(m,{field:"surname",header:"Surname"}),l(m,{field:"points",header:"Score"}),l(m,{field:"percentage",header:"Normalized Score (%)"}),l(m,{field:"status",header:"Status"},{body:f(({data:i})=>[l(u,{value:i.status?"passed":"failed",severity:a(i.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),fo=te(go,[["__scopeId","data-v-67e41818"]]),vo={class:"relative w-full h-[90%]"},bo=D({__name:"TestPassRate",props:{testId:{},requiredPoints:{}},setup(t){const e=O(),o=W(),n=t,s=w(),a=w(),r=()=>{let u=0,d=0,i=0;return e.students.filter(p=>{const v=o.getGrade(p.id,n.testId);v?n.requiredPoints===null||v.points>=n.requiredPoints?u++:d++:i++}),{labels:["Passed","Failed","Not Taken"],datasets:[{data:[u,d,i],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(156, 163, 175)"],borderWidth:1}]}},g=()=>({indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}),m=()=>{s.value=r(),a.value=g()};return E(()=>{m()}),(u,d)=>{const i=b("Chart");return y(),S(A,null,{header:f(()=>d[0]||(d[0]=[c("h3",null,"Pass Rate",-1)])),body:f(()=>[c("div",vo,[l(i,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),ho={class:"relative w-full h-[90%]"},_o=D({__name:"TestPassRateByGender",props:{testId:{},requiredPoints:{}},setup(t){const e=O(),o=W(),n=t,s=w(),a=w(),r=()=>{const u=["Male","Female"],d={};u.forEach(i=>d[i]={passed:0,failed:0,notTaken:0}),e.students.forEach(i=>{const p=o.getGrade(i.id,n.testId),v=i.gender;p?n.requiredPoints===null||p.points>=n.requiredPoints?d[v].passed++:d[v].failed++:d[v].notTaken++}),s.value={labels:["Passed","Failed","Not taken"],datasets:[{label:"Male",data:[d.Male.passed,d.Male.failed,d.Male.notTaken],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1},{label:"Female",data:[d.Female.passed,d.Female.failed,d.Female.notTaken],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}},g=()=>{a.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}},m=()=>{r(),g()};return E(()=>{m()}),(u,d)=>{const i=b("Chart");return y(),S(A,null,{header:f(()=>d[0]||(d[0]=[c("h3",null,"Pass rate by gender",-1)])),body:f(()=>[c("div",ho,[l(i,{type:"bar",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),yo={class:"relative w-full h-[90%]"},xo=D({__name:"TestPerformanceByGender",props:{maleData:{},femaleData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Male",data:[e.maleData.weightedAverage,e.maleData.median,e.maleData.standardDeviation,e.maleData.min,e.maleData.max],backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:[e.femaleData.weightedAverage,e.femaleData.median,e.femaleData.standardDeviation,e.femaleData.min,e.femaleData.max],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0}}});return E(()=>{o.value=s(),n.value=a()}),(g,m)=>{const u=b("Chart");return y(),S(A,null,{header:f(()=>m[0]||(m[0]=[c("h3",null,"Performance by gender",-1)])),body:f(()=>[c("div",yo,[l(u,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),wo={class:"cards-section"},Io={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},So=D({__name:"TestDetailsView",props:{testId:{}},setup(t){const e=O(),o=L(),n=W(),s=t,a=w(),r=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),g=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),u=()=>{const d=o.getTest(s.testId);if(!d)return;const i=e.students,p=n.grades;a.value=d,r.value={weightedAverage:k(Qt(p,s.testId)),median:k(Yt(p,s.testId)),standardDeviation:k(Zt(p,s.testId)),min:k(Xt(p,s.testId)),max:k(es(p,s.testId))},g.value={weightedAverage:k(ue(p,i,s.testId,"Male")),median:k(Se(p,i,s.testId,"Male")),standardDeviation:k(Pe(p,i,s.testId,"Male")),min:k(De(p,i,s.testId,"Male")),max:k(Te(p,i,s.testId,"Male"))},m.value={weightedAverage:k(ue(p,i,s.testId,"Female")),median:k(Se(p,i,s.testId,"Female")),standardDeviation:k(Pe(p,i,s.testId,"Female")),min:k(De(p,i,s.testId,"Female")),max:k(Te(p,i,s.testId,"Female"))}};return E(()=>{u()}),X(()=>o.tests,()=>{u()},{deep:!0}),(d,i)=>(y(),B(J,null,[i[0]||(i[0]=c("h2",{class:"title-section"},"Test Details",-1)),c("div",wo,[a.value?(y(),B("div",Io,[l(lo,{name:a.value?.name,weight:a.value?.weight,"required-points":a.value?.requiredPoints,"max-points":a.value?.maxPoints,"is-mandatory":a.value?.isMandatory,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","weight","required-points","max-points","is-mandatory"]),l(io,{"test-id":d.testId,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["test-id","max-points"]),l(bo,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["test-id","required-points"]),l(_o,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["test-id","required-points"]),l(uo,{"class-performance":r.value,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["class-performance","max-points"]),l(xo,{"male-data":g.value,"female-data":m.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["male-data","female-data"]),l(po,{"test-id":a.value.id,"max-score":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["test-id","max-score"]),l(fo,{"test-id":a.value.id,"required-points":a.value.requiredPoints,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["test-id","required-points","max-points"])])):N("",!0)])],64))}}),Po=[{path:"/",component:Gs,children:[{path:"",component:Qs},{path:"grades",component:ra},{path:"tests",component:pn},{path:"test/:testId",component:So,props:!0},{path:"students",component:xa},{path:"student/:studentId",component:Ka,props:!0},{path:"settings",component:On}]}],_e=st({history:at("/Class-register/"),routes:Po}),C=nt(xs),Do=ot(zt,{semantic:{primary:{50:"{sky.50}",100:"{sky.100}",200:"{sky.200}",300:"{sky.300}",400:"{sky.400}",500:"{sky.500}",600:"{sky.600}",700:"{sky.700}",800:"{sky.800}",900:"{sky.900}",950:"{sky.950}"}}});C.use(it,{theme:{preset:Do,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});C.directive("ripple",lt);C.directive("tooltip",rt);C.use(dt);C.use(ut);C.component("Button",Fe);C.component("ButtonGroup",ct);C.component("Column",mt);C.component("DataTable",pt);C.component("Dialog",gt);C.component("InputText",ft);C.component("InputNumber",vt);C.component("InputIcon",bt);C.component("IconField",ht);C.component("FloatLabel",_t);C.component("Menubar",yt);C.component("Message",xt);C.component("Form",wt);C.component("Toolbar",It);C.component("DataView",DataView);C.component("Accordion",St);C.component("AccordionPanel",Pt);C.component("AccordionHeader",Dt);C.component("AccordionContent",Tt);C.component("Knob",Ct);C.component("Chart",Mt);C.component("Select",$t);C.component("ToggleSwitch",kt);C.component("ProgressSpinner",Gt);C.component("Listbox",qt);C.component("MeterGroup",Ft);C.component("SelectButton",At);C.component("Checkbox",Bt);C.component("Paginator",Nt);C.component("ConfirmDialog",Rt);C.component("Toast",Vt);C.component("Tag",Wt);C.component("RadioButton",Lt);C.component("RadioButtonGroup",Et);const To=Ot();C.use(To);C.use(_e);C.mount("#app");
