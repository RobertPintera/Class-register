import{D as at,d as re,r as w,c as K,v as R,e as nt,i as ot,F as it,a as D,o as U,b as lt,f as P,g as h,h as y,j as F,k as l,l as L,w as g,m as d,n as me,t as M,p as O,q as pe,s as We,u as rt,x as dt,y as se,T as ut,z as $e,A as ce,B as ae,C as Z,E as ne,G as oe,H as k,I as E,J as ve,K as ct,L as mt,M as pt,N as ee,O as le,P as Q,Q as he,R as Se,S as ze,U as Me,V as ft,W as gt,X as vt,Y as ht,Z as _t,_ as bt,$ as yt,a0 as xt,a1 as wt,a2 as It,a3 as St,a4 as Pt,a5 as Dt,a6 as Tt,a7 as Ct,a8 as $t,a9 as Mt,aa as kt,ab as Gt,ac as qt,ad as Ft,ae as Bt,af as At,ag as Rt,ah as Nt,ai as Lt,aj as Vt,ak as Et,al as Wt,am as zt,an as jt,ao as Ut,ap as Ot,aq as Ht,ar as Jt,as as Kt,at as Xt,au as Qt,av as Zt,aw as Yt,ax as es,ay as ts,az as ss,aA as as,aB as ns,aC as os,aD as is,aE as ls}from"./vendor-DwV5syqi.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();class rs extends at{students;tests;grades;thresholds;settings;constructor(){super("RegisterClassDatabase"),this.version(1).stores({students:"id",tests:"id",grades:"[studentId+testId], studentId, testId",thresholds:"id",settings:"id"}),this.students=this.table("students"),this.tests=this.table("tests"),this.grades=this.table("grades"),this.thresholds=this.table("thresholds"),this.settings=this.table("settings")}}const T=new rs;async function ke(){return T.grades.toArray()}async function ds(t){return T.grades.add(t)}async function ye(t,e,o){return T.grades.update([e,t],{...o})}async function us(t,e){return T.grades.delete([t,e])}async function cs(t){await T.grades.where("testId").equals(t).delete()}function ms(t){return Math.round(t*10)/10}function q(t){return Math.round(t*100)/100}function ps(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?o.reduce((n,s)=>n+s,0)/o.length:0}function fs(t,e){const o=t.filter(s=>s.testId===e).map(s=>s.points).sort((s,a)=>s-a);if(!o.length)return 0;const n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function gs(t,e){const o=t.filter(a=>a.testId===e).map(a=>a.points);if(!o.length)return 0;const n=o.reduce((a,i)=>a+i,0)/o.length,s=o.reduce((a,i)=>a+Math.pow(i-n,2),0)/o.length;return Math.sqrt(s)}function vs(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.min(...o):0}function hs(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.max(...o):0}function ge(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?s.reduce((a,i)=>a+i,0)/s.length:0}function Ge(t,e,o,n){const s=t.filter(i=>i.testId===o.id&&i.points!==void 0).filter(i=>e.find(m=>m.id===i.studentId)?.gender===n).map(i=>i.points);return s.length?s.reduce((i,m)=>i+m,0)/s.length/o.maxPoints*100:0}function qe(t,e,o,n){const s=t.filter(i=>i.testId===o&&i.points!==void 0).filter(i=>e.find(m=>m.id===i.studentId)?.gender===n).map(i=>i.points).sort((i,m)=>i-m);if(!s.length)return 0;const a=Math.floor(s.length/2);return s.length%2!==0?s[a]:(s[a-1]+s[a])/2}function Fe(t,e,o,n){const s=t.filter(m=>m.testId===o&&m.points!==void 0).filter(m=>e.find(p=>p.id===m.studentId)?.gender===n).map(m=>m.points);if(!s.length)return 0;const a=s.reduce((m,p)=>m+p,0)/s.length,i=s.reduce((m,p)=>m+Math.pow(p-a,2),0)/s.length;return Math.sqrt(i)}function Be(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.min(...s):0}function Ae(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.max(...s):0}function je(t,e,o){const n=t.filter(i=>i.studentId===o);if(!n.length)return 0;let s=0,a=0;for(const i of n){const m=e.find(p=>p.id===i.testId);m&&m.weight>0&&(s+=i.points/m.maxPoints*m.weight,a+=m.weight)}return a>0?s/a*100:0}function _s(t,e,o){const n=t.filter(a=>a.studentId===o).map(a=>{const i=e.find(m=>m.id===a.testId);return i&&i.maxPoints>0?a.points/i.maxPoints*100:0}).sort((a,i)=>a-i);if(!n.length)return 0;const s=Math.floor(n.length/2);return n.length%2!==0?n[s]:(n[s-1]+n[s])/2}function bs(t,e,o){const n=t.filter(i=>i.studentId===o).map(i=>{const m=e.find(p=>p.id===i.testId);return m&&m.maxPoints>0?i.points/m.maxPoints*100:0});if(!n.length)return 0;const s=n.reduce((i,m)=>i+m,0)/n.length,a=n.reduce((i,m)=>i+Math.pow(m-s,2),0)/n.length;return Math.sqrt(a)}function ys(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.min(...n):0}function xs(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.max(...n):0}function Ue(t,e){let o=0,n=0;for(const s of e){const a=t.filter(m=>m.testId===s.id);if(a.length===0)continue;const i=a.reduce((m,p)=>m+p.points/s.maxPoints*100,0)/a.length;o+=i*s.weight,n+=s.weight}return n>0?o/n:0}function Oe(t,e){if(t.length===0)return 0;const o=t.map(s=>{const a=e.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100}).sort((s,a)=>s-a),n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function He(t,e){if(t.length===0)return 0;const o=t.map(a=>{const i=e.find(m=>m.id===a.testId);return!i||i.maxPoints===0?0:a.points/i.maxPoints*100}),n=o.reduce((a,i)=>a+i,0)/o.length,s=o.reduce((a,i)=>a+Math.pow(i-n,2),0)/o.length;return Math.sqrt(s)}function Je(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.min(...o):0}function Ke(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.max(...o):0}const W=re("grades",()=>{const t=w([]);return{grades:K(()=>t.value),updateGrade:async c=>{const u={...c},r=t.value.find(f=>f.studentId===u.studentId&&f.testId===u.testId);r?(r.points=u.points,await ye(r.testId,r.studentId,{points:r.points})):(t.value.push(u),await ds(u))},deleteGrade:async(c,u)=>{await us(c,u),t.value=t.value.filter(r=>!(r.studentId===c&&r.testId===u))},getGrade:(c,u)=>t.value.find(r=>r.studentId===c&&r.testId===u),setGrades:c=>{t.value=c},reduceGradesByTest:async(c,u)=>{const r=t.value.map(f=>f.testId===c&&f.points>u?{...f,points:u}:f);await Promise.all(r.filter(f=>f.testId===c).map(f=>ye(f.testId,f.studentId,{points:f.points}))),t.value=r},normalizeGradesByTest:async(c,u,r)=>{const f=t.value.map(v=>{if(v.testId===c){const _=ms(v.points/u*r);return{...v,points:_}}return v});await Promise.all(f.filter(v=>v.testId===c).map(v=>ye(v.testId,v.studentId,{points:v.points}))),t.value=f},deleteGradesByTest:async c=>{await cs(c),t.value=t.value.filter(u=>u.testId!==c)}}});async function ws(){if(await T.thresholds.count()===0){const e=[{id:R(),name:"5",minPercentage:90},{id:R(),name:"4.5",minPercentage:80},{id:R(),name:"4",minPercentage:70},{id:R(),name:"3.5",minPercentage:60},{id:R(),name:"3",minPercentage:50},{id:R(),name:"2",minPercentage:0}];await T.thresholds.bulkAdd(e)}}async function Re(){return T.thresholds.toArray()}async function Is(t){return T.thresholds.add(t)}async function Ss(t,e){return T.thresholds.update(t,e)}async function Ps(t){return T.thresholds.delete(t)}async function Ds(t){await T.transaction("rw",T.thresholds,async()=>{await T.thresholds.clear(),await T.thresholds.bulkAdd(t)})}const de=re("gradeThresholds",()=>{const t=w([]);return{gradeThresholds:K(()=>t.value),addGradeThreshold:async p=>{const c={id:R(),...p};await Is(c),t.value.push(c)},updateGradeThreshold:async(p,c)=>{await Ss(p,c);const u=t.value.findIndex(r=>r.id===p);u!==-1&&(t.value[u]={...t.value[u],...c})},deleteGradeThreshold:async p=>{await Ps(p),t.value=t.value.filter(c=>c.id!==p)},replaceGradeThresholds:async p=>{const c=p.map(u=>({id:R(),...u}));await Ds(c),t.value=c},getGradeThreshold:p=>t.value.find(c=>c.id===p),setGradeThresholds:p=>{t.value=p}}});async function Ts(){await T.settings.get("global")||await T.settings.add({id:"global",editWithDialog:!1})}async function Ne(){return T.settings.get("global")}async function Cs(t){return T.settings.update("global",t)}const Pe=re("settings",()=>{const t=w();return{settings:K(()=>t.value),updateSettings:async s=>{t.value&&(await Cs(s),Object.assign(t.value,s))},setSettings:s=>{t.value=s}}});async function Le(){return T.students.toArray()}async function $s(t){return T.students.add(t)}async function Ms(t,e){return T.students.update(t,e)}async function ks(t){await T.transaction("rw",T.students,T.grades,async()=>{await T.grades.where("studentId").equals(t).delete(),await T.students.delete(t)})}const H=re("students",()=>{const t=W(),e=w([]);return{students:K(()=>e.value),addStudent:async p=>{const c={id:R(),...p};await $s(c),e.value.push(c)},updateStudent:async(p,c)=>{await Ms(p,c);const u=e.value.findIndex(r=>r.id===p);u!==-1&&(e.value[u]={...e.value[u],...c})},deleteStudent:async p=>{await ks(p),e.value=e.value.filter(c=>c.id!==p),t.setGrades(t.grades.filter(c=>c.studentId!==p))},getStudent:p=>e.value.find(c=>c.id===p),setStudents:p=>{e.value=p}}});async function Ve(){return T.tests.toArray()}async function Gs(t){return T.tests.add(t)}async function qs(t,e){return T.tests.update(t,e)}async function Fs(t){await T.transaction("rw",T.tests,T.grades,async()=>{await T.grades.where("testId").equals(t).delete(),await T.tests.delete(t)})}const z=re("tests",()=>{const t=W(),e=w([]);return{tests:K(()=>e.value),addTest:async p=>{const c={id:R(),...p};await Gs(c),e.value.push(c)},updateTest:async(p,c)=>{await qs(p,c);const u=e.value.findIndex(r=>r.id===p);u!==-1&&(e.value[u]={...e.value[u],...c})},deleteTest:async p=>{await Fs(p),e.value=e.value.filter(c=>c.id!==p),t.setGrades(t.grades.filter(c=>c.testId!==p))},getTest:p=>e.value.find(c=>c.id===p),setTests:p=>{e.value=p}}});async function Bs(){await T.transaction("rw",T.students,T.tests,T.grades,async()=>{await T.students.clear(),await T.tests.clear(),await T.grades.clear();const t=[{id:R(),name:"Jan",surname:"Kowalski",gender:"Male"},{id:R(),name:"John",surname:"Smith",gender:"Male"},{id:R(),name:"William",surname:"Brown",gender:"Male"},{id:R(),name:"Daniel",surname:"Novak",gender:"Male"},{id:R(),name:"Katarzyna",surname:"Wiśniewska",gender:"Female"},{id:R(),name:"Emily",surname:"Johnson",gender:"Female"},{id:R(),name:"Sofia",surname:"Rossi",gender:"Female"},{id:R(),name:"Maria",surname:"Silva",gender:"Female"}],e=[{id:R(),name:"Math - Algebra",maxPoints:20,weight:3,requiredPoints:10,isMandatory:!0},{id:R(),name:"English - Grammar",maxPoints:15,weight:3,requiredPoints:8,isMandatory:!0},{id:R(),name:"History - Ancient Rome",maxPoints:25,weight:2,requiredPoints:null,isMandatory:!0},{id:R(),name:"Science - Physics Basics",maxPoints:30,weight:2,requiredPoints:15,isMandatory:!0},{id:R(),name:"Geography - Europe",maxPoints:20,weight:2,requiredPoints:12,isMandatory:!0},{id:R(),name:"Biology - Human Body",maxPoints:25,weight:2,requiredPoints:14,isMandatory:!0},{id:R(),name:"Computer Science - Basics",maxPoints:40,weight:2,requiredPoints:20,isMandatory:!1},{id:R(),name:"Art - Painting",maxPoints:50,weight:1,requiredPoints:null,isMandatory:!1},{id:R(),name:"Music - Jazz",maxPoints:50,weight:1,requiredPoints:20,isMandatory:!1},{id:R(),name:"Chemistry - Chemical Reactions",maxPoints:50,weight:3,requiredPoints:20,isMandatory:!1}],o=[{studentId:t[0].id,testId:e[0].id,points:20},{studentId:t[0].id,testId:e[1].id,points:14},{studentId:t[0].id,testId:e[2].id,points:23},{studentId:t[0].id,testId:e[3].id,points:27},{studentId:t[0].id,testId:e[4].id,points:19},{studentId:t[0].id,testId:e[5].id,points:18},{studentId:t[0].id,testId:e[6].id,points:37},{studentId:t[0].id,testId:e[7].id,points:46},{studentId:t[0].id,testId:e[9].id,points:47},{studentId:t[1].id,testId:e[0].id,points:16},{studentId:t[1].id,testId:e[1].id,points:7},{studentId:t[1].id,testId:e[2].id,points:21},{studentId:t[1].id,testId:e[3].id,points:20},{studentId:t[1].id,testId:e[5].id,points:17},{studentId:t[1].id,testId:e[6].id,points:25},{studentId:t[1].id,testId:e[8].id,points:30},{studentId:t[2].id,testId:e[0].id,points:18},{studentId:t[2].id,testId:e[1].id,points:12},{studentId:t[2].id,testId:e[2].id,points:24},{studentId:t[2].id,testId:e[3].id,points:25},{studentId:t[2].id,testId:e[4].id,points:15},{studentId:t[2].id,testId:e[5].id,points:23},{studentId:t[2].id,testId:e[6].id,points:38},{studentId:t[2].id,testId:e[7].id,points:40},{studentId:t[2].id,testId:e[8].id,points:48},{studentId:t[2].id,testId:e[9].id,points:19},{studentId:t[3].id,testId:e[0].id,points:17},{studentId:t[3].id,testId:e[1].id,points:6},{studentId:t[3].id,testId:e[2].id,points:19},{studentId:t[3].id,testId:e[3].id,points:27},{studentId:t[3].id,testId:e[5].id,points:10},{studentId:t[3].id,testId:e[7].id,points:25},{studentId:t[4].id,testId:e[0].id,points:20},{studentId:t[4].id,testId:e[1].id,points:15},{studentId:t[4].id,testId:e[2].id,points:23},{studentId:t[4].id,testId:e[3].id,points:29},{studentId:t[4].id,testId:e[4].id,points:18},{studentId:t[4].id,testId:e[5].id,points:24},{studentId:t[4].id,testId:e[6].id,points:39},{studentId:t[4].id,testId:e[9].id,points:45},{studentId:t[5].id,testId:e[0].id,points:5},{studentId:t[5].id,testId:e[1].id,points:8},{studentId:t[5].id,testId:e[2].id,points:18},{studentId:t[5].id,testId:e[3].id,points:12},{studentId:t[5].id,testId:e[4].id,points:9},{studentId:t[5].id,testId:e[8].id,points:45},{studentId:t[5].id,testId:e[9].id,points:30},{studentId:t[6].id,testId:e[0].id,points:11},{studentId:t[6].id,testId:e[1].id,points:13},{studentId:t[6].id,testId:e[2].id,points:14},{studentId:t[6].id,testId:e[3].id,points:25},{studentId:t[6].id,testId:e[5].id,points:19},{studentId:t[6].id,testId:e[6].id,points:36},{studentId:t[7].id,testId:e[0].id,points:15},{studentId:t[7].id,testId:e[1].id,points:6},{studentId:t[7].id,testId:e[2].id,points:10},{studentId:t[7].id,testId:e[3].id,points:21},{studentId:t[7].id,testId:e[4].id,points:11},{studentId:t[7].id,testId:e[5].id,points:24},{studentId:t[7].id,testId:e[6].id,points:10},{studentId:t[7].id,testId:e[7].id,points:47},{studentId:t[7].id,testId:e[8].id,points:40},{studentId:t[7].id,testId:e[9].id,points:42}];await T.students.bulkAdd(t),await T.tests.bulkAdd(e),await T.grades.bulkAdd(o)})}async function As(){return await nt(T,{prettyJson:!0})}async function Rs(t){const e=new Blob([t],{type:"application/json"});await T.transaction("rw",T.tables,async()=>{for(const o of T.tables)await o.clear()}),await ot(T,e)}const fe=re("register",()=>{const t=w(!1),e=K(()=>t.value),o=W(),n=de(),s=Pe(),a=H(),i=z(),m=async()=>{t.value||(t.value=!0,await Ts(),await ws(),n.setGradeThresholds(await Re()),s.setSettings(await Ne()??{id:"global",editWithDialog:!0}),a.setStudents(await Le()),i.setTests(await Ve()),o.setGrades(await ke()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},p=async()=>{e.value||(t.value=!0,await Bs(),n.setGradeThresholds(await Re()),s.setSettings(await Ne()??{id:"global",editWithDialog:!0}),a.setStudents(await Le()),i.setTests(await Ve()),o.setGrades(await ke()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},c=async()=>{const v=await As();it.saveAs(v,"register-class-data.json")},u=async v=>{await Rs(v),await m()},r=K(()=>i.tests.map(v=>({field:v.id,header:v.name}))),f=K(()=>a.students.map(v=>{const _={studentId:v.id,fullName:`${v.name} ${v.surname}`};for(const x of i.tests){const b=o.grades.find(I=>I.studentId===v.id&&I.testId===x.id);_[x.id]=b?b.points:-1}return _}));return{isLoading:e,testColumns:r,studentGrades:f,loadData:m,loadDemoData:p,exportToJson:c,importFromJson:u}}),Ns=D({__name:"App",setup(t){const e=fe(),o=window.matchMedia("(prefers-color-scheme: dark)"),n=s=>document.documentElement.classList.toggle("dark",s.matches);return U(()=>{document.documentElement.classList.toggle("dark",o.matches),o.addEventListener("change",n),console.log("Loading Data"),e.loadData()}),lt(()=>{o.removeEventListener("change",n)}),(s,a)=>{const i=h("router-view");return y(),P(i)}}}),Ls={key:0,class:"pl-6"},Vs=D({__name:"SideBarItem",props:{label:{},icon:{},route:{},items:{},active:{type:Boolean}},setup(t){const e=t;return(o,n)=>{const s=h("router-link"),a=h("SideBarItem",!0);return y(),F("li",null,[l(s,{to:o.route},{default:g(()=>[d("div",{class:me(["px-4 py-1 rounded-md hover:bg-sidebaritem-hover-background transition duration-75 space-x-2",{"bg-sidebaritem-active-background":o.active}])},[d("i",{class:me(o.icon)},null,2),d("span",null,M(o.label),1)],2)]),_:1},8,["to"]),e.items?.length?(y(),F("ul",Ls,[(y(!0),F(O,null,pe(e.items,i=>(y(),P(a,We({key:i.route},{ref_for:!0},i,{active:o.$route.path===i.route}),null,16,["active"]))),128))])):L("",!0)])}}}),Es={class:"font-semibold uppercase text-sm"},Ws=D({__name:"SideBar",props:{visible:{type:Boolean},isLargeScreen:{type:Boolean}},setup(t){const e=H(),o=z(),n=rt(),s=K(()=>{const a=n.params.studentId,i=n.params.testId,m=a?e.getStudent(a):null,p=i?o.getTest(i):null;return[{label:"Home",items:[{label:"Dashboard",icon:"pi pi-home",route:"/main/dashboard"}]},{label:"Register",items:[{label:"Grades",icon:"pi pi-objects-column",route:"/main/grades"},{label:"Tests",icon:"pi pi-book",route:"/main/tests",items:[...p?[{label:p?`${p.name}`:"test",icon:"pi pi-clipboard",route:`/main/tests/test/${i}`}]:[]]},{label:"Students",icon:"pi pi-users",route:"/main/students",items:[...m?[{label:m?`${m.name} ${m.surname}`:"student",icon:"pi pi-user",route:`/main/students/student/${a}`}]:[]]},{label:"Settings",icon:"pi pi-cog",route:"/main/settings"}]}]});return(a,i)=>(y(),F("nav",{class:me(["fixed w-64 flex flex-col z-30 transition-[left,top] duration-500 ease-in-out",{"top-16":a.isLargeScreen,"top-0":!a.isLargeScreen,"left-[-18rem]":!a.visible,"left-0":a.visible}])},[d("div",{class:me(["bg-sidebar-background w-full overflow-auto transition-colors duration-[var(--p-transition-duration)] ease-in-out",{"sidebar m-4 h-[calc(100vh-6rem)]":a.isLargeScreen,"h-[100vh] p-4":!a.isLargeScreen}])},[(y(!0),F(O,null,pe(s.value,m=>(y(),F("div",{key:m.label,class:"space-y-1"},[d("h3",Es,M(m.label),1),d("ul",null,[(y(!0),F(O,null,pe(m.items,p=>(y(),P(Vs,We({key:p.route},{ref_for:!0},p,{active:a.$route.path===p.route,onClick:i[0]||(i[0]=c=>a.$emit("select"))}),null,16,["active"]))),128))])]))),128))],2)],2))}}),zs="/Class-register/logo_class_register.svg",Xe=re("global",()=>{const t=dt({disableTransition:!1});return{isDark:K(()=>t.value),toggleDark:()=>{t.value=!t.value}}}),js={class:"fixed justify-between w-full h-16 flex items-center border-b-2 border-primary-border p-4 pl-6 shadow-md bg-topbar-background z-10 gap-4"},Us={class:"flex items-center gap-4"},Qe=D({__name:"TopBar",props:{isToggleSidebar:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(t,{emit:e}){const o=Xe(),n=e,s=K(()=>o.isDark?"pi pi-moon":"pi pi-sun");return(a,i)=>{const m=h("Button"),p=h("router-link");return y(),F("header",js,[d("div",Us,[a.isToggleSidebar?(y(),P(m,{key:0,icon:"pi pi-bars",severity:"secondary",variant:"text",rounded:"","aria-label":"Bookmark",onClick:i[0]||(i[0]=c=>n("toggle-sidebar"))})):L("",!0),l(p,{to:"/"},{default:g(()=>i[1]||(i[1]=[d("div",{class:"flex gap-2 justify-center items-center"},[d("img",{src:zs,alt:"Logo",class:"h-full"}),d("h3",{class:"text-xl sm:text-2xl"},"Class Register")],-1)])),_:1,__:[1]})]),l(m,{icon:s.value,severity:"secondary",variant:"text",rounded:"","aria-label":"Bookmark",onClick:se(o).toggleDark},null,8,["icon","onClick"])])}}}),Os={class:"min-h-full"},Hs={key:0,class:"fixed top-0 left-0 w-full h-full bg-black/40 z-[9999] flex items-center justify-center"},Js=D({__name:"DefaultLayout",setup(t){const e=fe(),o=w(!0),n=w(window.innerWidth>=1280),s=()=>{const i=n.value;n.value=window.innerWidth>=1280,!i&&n.value&&(o.value=!0),i&&!n.value&&(o.value=!1)};window.addEventListener("resize",s),U(()=>{n.value&&(o.value=!0),n.value||(o.value=!1)});const a=()=>{o.value=!o.value};return(i,m)=>{const p=h("ProgressSpinner"),c=h("router-view"),u=h("ConfirmDialog"),r=h("Toast");return y(),F(O,null,[d("div",Os,[l(ut,null,{default:g(()=>[o.value&&!n.value?(y(),F("div",{key:0,class:"fixed inset-0 bg-black/50 z-20",onClick:m[0]||(m[0]=f=>o.value=!1)})):L("",!0)]),_:1}),l(Qe,{"is-toggle-sidebar":!0,onToggleSidebar:a}),l(Ws,{visible:o.value,isLargeScreen:n.value,onSelect:m[1]||(m[1]=f=>n.value?null:a())},null,8,["visible","isLargeScreen"]),se(e).isLoading?(y(),F("div",Hs,[l(p,{style:{width:"200px",height:"200px"},strokeWidth:"4",animationDuration:".8s"})])):(y(),F("div",{key:1,class:me(["pt-16 transition-[margin-left] duration-500 ease-in-out",{"ml-0":!o.value,"ml-72":o.value&&n.value}])},[d("div",null,[l(c)])],2))]),l(u,{draggable:!1}),l(r)],64)}}}),te=(t,e)=>{const o=t.__vccOpts||t;for(const[n,s]of e)o[n]=s;return o},Ks=te(Js,[["__scopeId","data-v-cf2b6b3e"]]),Xs={},Qs={class:"card"},Zs={class:"mb-2"};function Ys(t,e){return y(),F("div",Qs,[d("div",Zs,[$e(t.$slots,"header")]),$e(t.$slots,"body")])}const N=te(Xs,[["render",Ys]]),ea={class:"relative w-full h-[90%]"},ta=D({__name:"ClassPassRate",setup(t){const e=H(),o=z(),n=W(),s=w(),a=w(),i=()=>{let c=0,u=0,r=0,f=0;o.tests.forEach(v=>{e.students.forEach(_=>{const x=n.getGrade(_.id,v.id);x?!v.requiredPoints||x.points>=v.requiredPoints?c++:u++:v.isMandatory?r++:f++})}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[c,u,r,f],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},m=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return U(()=>{i(),m()}),(c,u)=>{const r=h("Chart");return y(),P(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Class pass rate",-1)])),body:g(()=>[d("div",ea,[l(r,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[390px]"},null,8,["data","options"])])]),_:1})}}}),sa={class:"flex flex-col justify-center items-center w-fit"},X=D({__name:"PerformanceCard",props:{title:{},value:{},max:{}},setup(t){const e=t;return(o,n)=>{const s=h("Knob");return y(),F("div",sa,[d("h4",null,M(o.title),1),l(s,{modelValue:e.value,size:200,max:o.max,readonly:""},null,8,["modelValue","max"])])}}}),aa={class:"flex justify-evenly flex-wrap gap-4 mt-2"},na=D({__name:"ClassPerformance",props:{classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),P(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Class performance",-1)])),body:g(()=>[d("div",aa,[l(X,{title:"Weighted Average",value:e.classPerformance.weightedAverage},null,8,["value"]),l(X,{title:"Median",value:e.classPerformance.median},null,8,["value"]),l(X,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:50},null,8,["value"]),l(X,{title:"Max",value:e.classPerformance.max},null,8,["value"]),l(X,{title:"Min",value:e.classPerformance.min},null,8,["value"])])]),_:1}))}}),oa={class:"relative w-full h-[90%]"},ia=D({__name:"FinalGradeStats",setup(t){const e=H(),o=z(),n=W(),s=de(),a=w(),i=w(),m=()=>{const u=e.students,r=o.tests,f=n.grades,v=s.gradeThresholds.slice().sort((b,I)=>b.minPercentage-I.minPercentage),_={},x={};v.forEach(b=>{_[b.name]=0,x[b.name]=0});for(const b of u){const I=je(f,r,b.id),C=v.slice().sort((G,V)=>V.minPercentage-G.minPercentage).find(G=>I>=G.minPercentage);C&&(b.gender==="Male"?_[C.name]++:b.gender==="Female"&&x[C.name]++)}a.value={labels:v.map(b=>b.name),datasets:[{label:"Male",data:v.map(b=>_[b.name]),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:v.map(b=>x[b.name]),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}},p=()=>{i.value={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Students number"},ticks:{stepSize:1,callback:function(u){return Number(u)%1===0?u:null}}},x:{title:{display:!0,text:"Grade"}}}}},c=()=>{m(),p()};return U(()=>{c()}),(u,r)=>{const f=h("Chart");return y(),P(N,null,{header:g(()=>r[0]||(r[0]=[d("h3",null,"Final grade stats",-1)])),body:g(()=>[d("div",oa,[l(f,{type:"bar",data:a.value,options:i.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),la={class:"relative w-full h-[90%]"},ra=D({__name:"MandatoryTestsCount",setup(t){const e=z(),o=w(),n=w(),s=()=>{let m=0,p=0;e.tests.forEach(c=>{c.isMandatory?m++:p++}),o.value={labels:["Mandatory","Optional"],datasets:[{data:[m,p],backgroundColor:["rgba(101, 219, 144, 0.6)","rgba(6, 182, 212, 0.6)"],borderColor:["rgb(101, 219, 144)","rgb(6, 182, 212)"],borderWidth:1}]}},a=()=>{n.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}};return U(()=>{s(),a()}),(m,p)=>{const c=h("Chart");return y(),P(N,null,{header:g(()=>p[0]||(p[0]=[d("h3",null,"Mandatory Tests Count",-1)])),body:g(()=>[d("div",la,[l(c,{type:"bar",data:o.value,options:n.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),da={class:"relative w-full h-[90%]"},ua=D({__name:"TestGenderComparison",setup(t){const e=H(),o=z(),n=W(),s=w(),a=w(),i=()=>{const c=o.tests,u=e.students,r=n.grades,f=[],v=[],_=[],x=[];c.forEach(b=>{f.push(q(Ge(r,u,b,"Male"))),v.push(q(Ge(r,u,b,"Female"))),_.push(q(ge(r,u,b.id,"Male"))),x.push(q(ge(r,u,b.id,"Female")))}),s.value={labels:c.map(b=>b.name),datasets:[{label:"Male",data:f,rawData:_,borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.3)"},{label:"Female",data:v,rawData:x,borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.3)"}]}},m=()=>{a.value={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,min:0,max:100,ticks:{backdropColor:"transparent"}}},plugins:{tooltip:{callbacks:{label:c=>{const u=c.dataset,r=c.formattedValue,f=u.rawData[c.dataIndex];return`${u.label}: ${f} (${r}%)`}}}}}};return U(()=>{i(),m()}),(c,u)=>{const r=h("Chart");return y(),P(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Test comparision",-1)])),body:g(()=>[d("div",da,[l(r,{type:"radar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),ca={class:"cards-section"},ma={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},pa=D({__name:"DashboardView",setup(t){H();const e=z(),o=W(),n=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),s=()=>{const a=e.tests,i=o.grades;n.value={weightedAverage:q(Ue(i,a)),median:q(Oe(i,a)),standardDeviation:q(He(i,a)),min:q(Je(i,a)),max:q(Ke(i,a))}};return U(()=>{s()}),(a,i)=>(y(),F(O,null,[i[0]||(i[0]=d("h2",{class:"title-section"},"Dashboard",-1)),d("div",ca,[d("div",ma,[l(ia,{class:"sm:col-span-2 lg:col-span-2"}),l(ta,{class:"sm:col-span-1 lg:col-span-1"}),l(ra,{class:"sm:col-span-1 lg:col-span-1"}),l(na,{"class-performance":n.value,class:"sm:col-span-2 lg:col-span-2"},null,8,["class-performance"]),l(ua,{class:"sm:col-span-2 lg:col-span-2"})])])],64))}}),fa={class:"flex flex-col gap-1"},ga={class:"flex justify-end gap-2 mt-4"},va=D({__name:"EditGradeDialog",props:ce({studentId:{},testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=z(),o=W(),n=ae(t,"visible"),s=t,a=Z({name:"",maxPoints:0}),i=Z({score:null}),m=async r=>{if(r){const f=e.getTest(s.testId);f&&Object.assign(a,{name:f.name,maxPoints:f.maxPoints});const _=o.getGrade(s.studentId,s.testId)?.points??null;i.score=_,await ve(),i.score=null}};ne(()=>n.value,r=>{m(r)});const p=()=>{n.value=!1},c=K(()=>oe(k.object({score:k.number("Score is required").min(0,"Score cannot be less than 0").max(a.maxPoints,`Score cannot be greater than ${a.maxPoints}`).nullable()}))),u=r=>{if(r.valid){const f=r.states.score?.value;if(typeof f=="number"||f===null){const v={studentId:s.studentId,testId:s.testId,points:f};f!==void 0?o.updateGrade(v):o.deleteGrade(s.studentId,s.testId),p()}else console.error("Wrong data from form!")}};return(r,f)=>{const v=h("InputNumber"),_=h("FloatLabel"),x=h("Message"),b=h("Button"),I=h("Form"),C=h("Dialog");return y(),P(C,{header:"Edit Grade",visible:n.value,"onUpdate:visible":f[0]||(f[0]=G=>n.value=G),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(I,{"initial-values":i,resolver:c.value,onSubmit:u,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(G=>[d("h5",null,"Number must be between 0 and "+M(a.maxPoints),1),d("div",fa,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"score",name:"score",class:"w-full",variant:"filled",min:0,max:a.maxPoints,maxFractionDigits:1,step:.1,allowEmpty:!0},null,8,["max"]),f[1]||(f[1]=d("label",{for:"score"},"Score",-1))]),_:1,__:[1]}),G.score?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(G.score.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",ga,[l(b,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:p}),l(b,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initial-values","resolver"])]),_:1},8,["visible"])}}}),ha={class:"flex flex-wrap gap-2 items-center justify-between"},_a={class:"w-full cursor-pointer px-3 py-4"},ba=["onClick"],ya=D({__name:"GradesDatatable",setup(t){const e=fe(),o=z(),n=Pe(),s=W(),a=w(),i=w(!1),m=w({}),p=()=>{m.value.fullName={operator:le.AND,constraints:[{value:null,matchMode:ee.STARTS_WITH}]};for(const x of e.testColumns)m.value[x.field]||(m.value[x.field]={operator:le.AND,constraints:[{value:null,matchMode:ee.EQUALS}]})};p(),U(()=>{a.value=n.settings?.editWithDialog}),ne(()=>e.testColumns,x=>{const b=x.map(I=>I.field);for(const I of x)m.value[I.field]||(m.value[I.field]={operator:le.AND,constraints:[{value:null,matchMode:ee.EQUALS}]});for(const I in m.value)I!=="fullName"&&!b.includes(I)&&delete m.value[I]},{immediate:!0});const c=()=>{p()},u=Z({studentId:"",testId:""}),r=(x,b)=>{a.value&&(u.studentId=x,u.testId=b,i.value=!0)},f=x=>{const{data:b,newValue:I,field:C}=x,G={studentId:b.studentId,testId:C,points:I},V=o.getTest(G.testId);if(V)if(I!=null){if(!v(G.points,V.maxPoints))return;s.updateGrade(G)}else s.deleteGrade(G.studentId,G.testId)},v=(x,b)=>x>=0&&x<=b,_=x=>{const b=o.getTest(x);return b?`Number must be between 0 and ${b.maxPoints}`:"No test info"};return(x,b)=>{const I=h("Button"),C=h("InputText"),G=h("Column"),V=h("InputNumber"),j=h("DataTable"),ue=pt("tooltip");return y(),F(O,null,[l(j,{value:se(e).studentGrades,editMode:"cell",class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:m.value,"onUpdate:filters":b[1]||(b[1]=S=>m.value=S),filterDisplay:"menu",onCellEditComplete:f},{header:g(()=>[d("div",ha,[l(I,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:b[0]||(b[0]=S=>c())})])]),empty:g(()=>b[3]||(b[3]=[d("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:g(()=>[l(G,{sortable:"",field:"fullName",header:"Student",filterField:"fullName",frozen:""},{body:g(({data:S})=>[d("div",_a,M(S.fullName),1)]),filter:g(({filterModel:S})=>[l(C,{modelValue:S.value,"onUpdate:modelValue":A=>S.value=A,type:"text",placeholder:"Search by FullName"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),(y(!0),F(O,null,pe(se(e).testColumns,S=>(y(),P(G,{sortable:"",key:S.field,field:S.field,header:S.header,filterField:S.field,dataType:"numeric"},ct({body:g(({data:A})=>[d("div",{class:"w-full min-h-1 cursor-pointer px-3 py-4",onClick:B=>r(A.studentId,S.field)},M(se(s).getGrade(A.studentId,S.field)?.points??"-"),9,ba)]),filter:g(({filterModel:A})=>[l(V,{modelValue:A.value,"onUpdate:modelValue":B=>A.value=B},null,8,["modelValue","onUpdate:modelValue"])]),_:2},[a.value?void 0:{name:"editor",fn:g(({data:A,field:B})=>[mt(l(V,{modelValue:A[B],"onUpdate:modelValue":J=>A[B]=J,min:0,autofocus:"",fluid:"",allowEmpty:!0,defaultValue:A[B]===-1?null:A[B]},null,8,["modelValue","onUpdate:modelValue","defaultValue"]),[[ue,_(B),void 0,{top:!0}]])]),key:"0"}]),1032,["field","header","filterField"]))),128))]),_:1},8,["value","filters"]),l(va,{visible:i.value,"onUpdate:visible":b[2]||(b[2]=S=>i.value=S),studentId:u.studentId,testId:u.testId},null,8,["visible","studentId","testId"])],64)}}}),xa=te(ya,[["__scopeId","data-v-fe46c1fc"]]),wa={class:"cards-section"},Ia={class:"flex flex-col"},Sa={class:"flex justify-center"},Pa=D({__name:"GradesView",setup(t){return(e,o)=>(y(),F(O,null,[o[1]||(o[1]=d("h2",{class:"title-section"},"Grades",-1)),d("div",wa,[l(N,null,{header:g(()=>o[0]||(o[0]=[d("h3",null,"List of grades",-1)])),body:g(()=>[d("div",Ia,[d("div",Sa,[l(xa)])])]),_:1})])],64))}}),Da={class:"flex flex-wrap gap-2 items-center justify-between"},Ta={class:"w-full h-full cursor-pointer px-3 py-4"},Ca={class:"w-full h-full cursor-pointer px-3 py-4"},$a=D({__name:"StudentsDatatable",setup(t){const e=H(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:ee.CONTAINS},name:{operator:le.AND,constraints:[{value:null,matchMode:ee.STARTS_WITH}]},surname:{operator:le.AND,constraints:[{value:null,matchMode:ee.STARTS_WITH}]}}};n();const s=()=>{n()},a=i=>{De.push(`/main/students/student/${i.data.id}`)};return(i,m)=>{const p=h("Button"),c=h("InputIcon"),u=h("InputText"),r=h("IconField"),f=h("Column"),v=h("DataTable");return y(),P(v,{value:se(e).students,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":m[2]||(m[2]=_=>o.value=_),filterDisplay:"menu",globalFilterFields:["name","surname"],onRowSelect:a,selectionMode:"single"},{header:g(()=>[d("div",Da,[l(p,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:m[0]||(m[0]=_=>s())}),l(r,null,{default:g(()=>[l(c,null,{default:g(()=>m[3]||(m[3]=[d("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),l(u,{modelValue:o.value.global.value,"onUpdate:modelValue":m[1]||(m[1]=_=>o.value.global.value=_),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:g(()=>m[4]||(m[4]=[d("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:g(()=>[l(f,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:g(({data:_})=>[d("div",Ta,M(_.name),1)]),filter:g(({filterModel:_})=>[l(u,{modelValue:_.value,"onUpdate:modelValue":x=>_.value=x,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(f,{sortable:"",field:"surname",header:"Surname",filterField:"surname"},{body:g(({data:_})=>[d("div",Ca,M(_.surname),1)]),filter:g(({filterModel:_})=>[l(u,{modelValue:_.value,"onUpdate:modelValue":x=>_.value=x,type:"text",placeholder:"Search by Surname"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])}}}),Ma=te($a,[["__scopeId","data-v-2b7d8f3f"]]);function Ze(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.maxPoints=="number"&&typeof t.weight=="number"&&(typeof t.requiredPoints=="number"||t.requiredPoints===null)}function Ye(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.surname=="string"}function et(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.minPercentage=="number"}const ka={class:"flex flex-col gap-1"},Ga={class:"flex flex-col gap-1"},qa={class:"flex flex-col gap-1"},Fa={class:"flex justify-end gap-2 mt-4"},Ba=D({__name:"NewStudentDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=H(),o=Q(),n=ae(t,"visible"),s=w(["Male","Female"]),a=Z({name:"",surname:"",gender:"Male"}),i=w(oe(k.object({name:k.string("Name is required").min(1,"Name is required"),surname:k.string("Surname is required").min(1,"Surname is required"),gender:k.enum(["Male","Female"],"Gender is required")}))),m=()=>{n.value=!1},p=c=>{if(c.valid){const u={name:c.states.name.value,surname:c.states.surname.value,gender:c.states.gender.value};Ye(u)?(e.addStudent(u),o.add({severity:"success",summary:"Success",detail:"Successfully added student.",life:3e3}),m()):console.error("Wrong data from form!")}};return(c,u)=>{const r=h("InputText"),f=h("FloatLabel"),v=h("Message"),_=h("SelectButton"),x=h("Button"),b=h("Form"),I=h("Dialog");return y(),P(I,{header:"Add Student",visible:n.value,"onUpdate:visible":u[0]||(u[0]=C=>n.value=C),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(b,{resolver:i.value,onSubmit:p,"initial-values":a,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(C=>[d("div",ka,[l(f,{variant:"on"},{default:g(()=>[l(r,{id:"name",name:"name",variant:"filled",class:"w-60"}),u[1]||(u[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),C.name?.invalid?(y(),P(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(C.name.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Ga,[l(f,{variant:"on"},{default:g(()=>[l(r,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),u[2]||(u[2]=d("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),C.surname?.invalid?(y(),P(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(C.surname.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",qa,[l(_,{name:"gender",options:s.value,allowEmpty:!1},null,8,["options"]),C.gender?.invalid?(y(),P(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(C.gender.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Fa,[l(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),l(x,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),Aa={class:"cards-section"},Ra={class:"mt-2 mb-4"},Na=D({__name:"StudentsListView",setup(t){const e=w(!1);return(o,n)=>{const s=h("Button");return y(),F(O,null,[n[3]||(n[3]=d("h2",{class:"title-section"},"Students",-1)),d("div",Aa,[l(N,null,{header:g(()=>n[2]||(n[2]=[d("h3",null,"List of students",-1)])),body:g(()=>[d("div",Ra,[l(s,{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=a=>e.value=!0)})]),l(Ma)]),_:1})]),l(Ba,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=a=>e.value=a)},null,8,["visible"])],64)}}}),La={class:"flex flex-col gap-1"},Va={class:"flex flex-col gap-1"},Ea={class:"flex flex-col gap-1"},Wa={class:"flex justify-end gap-2 mt-4"},za=D({__name:"EditPersonalDataDialog",props:ce({studentId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=H(),o=Q(),n=t,s=ae(t,"visible"),a=w(["Male","Female"]),i=Z({name:"",surname:"",gender:"Male"}),m=w(oe(k.object({name:k.string("Name is required").min(1,"Name is required"),surname:k.string("Surname is required").min(1,"Surname is required"),gender:k.enum(["Male","Female"],"Gender is required")}))),p=()=>{s.value=!1},c=r=>{if(r.valid){const f={name:r.states.name.value,surname:r.states.surname.value,gender:r.states.gender.value};Ye(f)?(e.updateStudent(n.studentId,f),o.add({severity:"success",summary:"Success",detail:"Successfully edited student.",life:3e3}),p()):console.error("Wrong data from form!")}},u=r=>{if(r){const f=e.getStudent(n.studentId);f&&Object.assign(i,f)}};return ne(s,r=>{u(r)}),(r,f)=>{const v=h("InputText"),_=h("FloatLabel"),x=h("Message"),b=h("SelectButton"),I=h("Button"),C=h("Form"),G=h("Dialog");return y(),P(G,{header:"Edit Student",visible:s.value,"onUpdate:visible":f[0]||(f[0]=V=>s.value=V),modal:""},{default:g(()=>[l(C,{resolver:m.value,onSubmit:c,"initial-values":i,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(V=>[d("div",La,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"name",name:"name",variant:"filled",class:"w-60"}),f[1]||(f[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),V.name?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(V.name.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Va,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),f[2]||(f[2]=d("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),V.surname?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(V.surname.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Ea,[l(b,{name:"gender",options:a.value,allowEmpty:!1},null,8,["options"]),V.gender?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(V.gender.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Wa,[l(I,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:p}),l(I,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),ja={class:"flex flex-wrap justify-evenly pb-6"},Ua={class:"flex flex-col justify-center items-center gap-1"},Oa={class:"flex flex-col justify-center items-center gap-1"},Ha=D({__name:"ActionsStudent",props:{studentId:{}},setup(t){const e=H(),o=he(),n=Q(),s=Se(),a=t,i=w(!1),m=()=>{o.require({message:"Are you sure you want to proceed? The student will be deleted.",header:"Delete student",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteStudent(a.studentId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted student",life:3e3}),s.push("/students")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete student",life:3e3})}}})};return(p,c)=>{const u=h("Button");return y(),P(N,null,{header:g(()=>c[3]||(c[3]=[d("h3",null,"Actions",-1)])),body:g(()=>[d("div",ja,[d("div",Ua,[c[4]||(c[4]=d("h4",null,"Edit student data",-1)),l(u,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:c[0]||(c[0]=r=>i.value=!0)})]),d("div",Oa,[c[5]||(c[5]=d("h4",null,"Delete student",-1)),l(u,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:c[1]||(c[1]=r=>m())})])]),l(za,{studentId:p.studentId,visible:i.value,"onUpdate:visible":c[2]||(c[2]=r=>i.value=r)},null,8,["studentId","visible"])]),_:1})}}}),Ja={class:"relative w-full h-[90%]"},Ka=D({__name:"ComparisionClass",props:{individualData:{},classData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Individual",data:[e.individualData.weightedAverage,e.individualData.median,e.individualData.standardDeviation,e.individualData.min,e.individualData.max],backgroundColor:"rgba(101, 219, 144, 0.6)",borderColor:"rgb(101, 219, 144)",borderWidth:1},{label:"Class",data:[e.classData.weightedAverage,e.classData.median,e.classData.standardDeviation,e.classData.min,e.classData.max],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0,max:100}}});return U(()=>{o.value=s(),n.value=a()}),(m,p)=>{const c=h("Chart");return y(),P(N,null,{header:g(()=>p[0]||(p[0]=[d("h3",null,"Class Comparison",-1)])),body:g(()=>[d("div",Ja,[l(c,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}});function Ee(t,e,o,n){const a=t.filter(u=>u.studentId===n).map(u=>{const r=e.find(f=>f.id===u.testId);if(!r)throw new Error(`Test ${u.testId} not found`);return{...r,points:u.points}}),i=a.reduce((u,r)=>u+r.weight,0),p=a.reduce((u,r)=>u+r.points/r.maxPoints*100*r.weight,0)/i,c=o.filter(u=>p>=u.minPercentage).sort((u,r)=>r.minPercentage-u.minPercentage)[0];return c?c.name:"—"}const Xa={class:"flex-1 flex justify-center items-center"},Qa={class:"text-[clamp(1rem,5vw,4rem)] leading-none"},Za={class:"mt-auto"},Ya=D({__name:"FinalGradeResult",props:{studentId:{}},setup(t){const e=H(),o=z(),n=W(),s=de(),a=t,i=w(Ee(n.grades,o.tests,s.gradeThresholds,a.studentId)),m=K(()=>{const p=e.students,c=p.length||1,r=100-p.filter(_=>Ee(n.grades,o.tests,s.gradeThresholds,_.id)>i.value).length/c*100,f=Math.round(r),v=100-f;return[{label:"Lower or equal",color:"#60a5fa",value:f},{label:"Higher",color:"#fbbf24",value:v}]});return(p,c)=>{const u=h("MeterGroup");return y(),P(N,{class:"flex flex-col"},{header:g(()=>c[0]||(c[0]=[d("h3",null,"Final Grade",-1)])),body:g(()=>[d("div",Xa,[d("h4",Qa,M(i.value),1)]),d("div",Za,[c[1]||(c[1]=d("p",{class:"text-center my-2"},"Compared to other students' grades",-1)),l(u,{value:m.value},null,8,["value"])])]),_:1})}}}),en=D({__name:"PersonalData",props:{name:{},surname:{},gender:{}},setup(t){const e=t;return(o,n)=>(y(),P(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Personal Data",-1)])),body:g(()=>[d("h4",null,"Name: "+M(e.name),1),d("h4",null,"Surname: "+M(e.surname),1),d("h4",null,"Gender: "+M(e.gender),1)]),_:1}))}}),tn={class:"flex-1 min-w-64 h-fit"},sn={class:"relative w-full h-[400px]"},xe=4,an=D({__name:"StudentResults",props:{studentId:{}},setup(t){const e=z(),o=W(),n=t,s=w(),a=w(),i=w(0),m=w(0),p=()=>{const f=o.grades.filter(b=>b.studentId===n.studentId).map(b=>{const I=e.tests.find(G=>G.id===b.testId),C=I?.maxPoints??100;return{testName:I?.name??"Unknown Test",score:b.points,maxScore:C,percentage:b.points/C*100}});m.value=f.length;const v=i.value*xe,_=v+xe,x=f.slice(v,_);s.value={labels:x.map(b=>b.testName),datasets:[{label:"Score",data:x.map(b=>b.percentage),originalScores:x.map(b=>b.score),maxScores:x.map(b=>b.maxScore),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},c=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:f=>{const v=f.dataset,_=f.dataIndex;return`${v.originalScores[_]} / ${v.maxScores[_]} points (${f.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},u=()=>{p(),c()};U(()=>{u()});const r=f=>{i.value=f.page,p()};return(f,v)=>{const _=h("Chart"),x=h("Paginator");return y(),P(N,null,{header:g(()=>v[0]||(v[0]=[d("h3",null,"Results",-1)])),body:g(()=>[d("div",tn,[d("div",sn,[l(_,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),l(x,{rows:xe,totalRecords:m.value,page:i.value,onPage:r},null,8,["totalRecords","page"])])]),_:1})}}}),nn=D({__name:"StudentResultsDatatable",props:{studentId:{}},setup(t){const e=z(),o=W(),n=t,s=K(()=>o.grades.filter(i=>i.studentId===n.studentId).map(i=>{const m=e.tests.find(f=>f.id===i.testId);if(!m)return null;const p=m.maxPoints,c=m.requiredPoints??0,u=q(i.points/p*100),r=i.points>=c;return{testName:m?.name??"Unknown Test",points:i.points,percentage:u,maxPoints:p,status:r}})),a=i=>i?"success":"warn";return(i,m)=>{const p=h("Column"),c=h("Tag"),u=h("DataTable");return y(),P(N,null,{header:g(()=>m[0]||(m[0]=[d("h3",null,"Results - details",-1)])),body:g(()=>[l(u,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:g(()=>[l(p,{field:"testName",header:"Test"}),l(p,{field:"points",header:"Score"}),l(p,{field:"percentage",header:"Normalized Score (%)"}),l(p,{field:"maxPoints",header:"Max Points"}),l(p,{field:"status",header:"Status"},{body:g(({data:r})=>[l(c,{value:r.status?"passed":"failed",severity:a(r.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),on=te(nn,[["__scopeId","data-v-f81559d1"]]),ln={class:"relative w-full h-[90%]"},rn=D({__name:"StudentPassRate",props:{studentId:{}},setup(t){const e=z(),o=W(),n=t,s=w(),a=w(),i=()=>{let c=0,u=0,r=0,f=0;e.tests.forEach(v=>{const _=o.getGrade(n.studentId,v.id);_?!v.requiredPoints||_.points>=v.requiredPoints?c++:u++:v.isMandatory?r++:f++}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[c,u,r,f],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},m=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return U(()=>{i(),m()}),(c,u)=>{const r=h("Chart");return y(),P(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Pass rate",-1)])),body:g(()=>[d("div",ln,[l(r,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),dn={class:"flex justify-evenly flex-wrap gap-4 mt-2"},un=D({__name:"StudentPerformance",props:{individualPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),P(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Performance",-1)])),body:g(()=>[d("div",dn,[l(X,{title:"Weighted Average",value:e.individualPerformance.weightedAverage},null,8,["value"]),l(X,{title:"Median",value:e.individualPerformance.median},null,8,["value"]),l(X,{title:"Standard Deviation",value:e.individualPerformance.standardDeviation,max:50},null,8,["value"]),l(X,{title:"Max",value:e.individualPerformance.max},null,8,["value"]),l(X,{title:"Min",value:e.individualPerformance.min},null,8,["value"])])]),_:1}))}}),cn={class:"cards-section"},mn={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},pn=D({__name:"StudentDetailsView",props:{studentId:{}},setup(t){const e=H(),o=z(),n=W(),s=t,a=w(),i=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),p=()=>{const c=e.getStudent(s.studentId);if(!c)return;const u=n.grades;a.value=c;const r=o.tests.filter(f=>n.grades.some(v=>v.studentId===s.studentId&&v.testId===f.id));i.value={weightedAverage:q(je(u,r,s.studentId)),median:q(_s(u,r,s.studentId)),standardDeviation:q(bs(u,r,s.studentId)),min:q(ys(u,s.studentId,r)),max:q(xs(u,s.studentId,r))},m.value={weightedAverage:q(Ue(u,r)),median:q(Oe(u,r)),standardDeviation:q(He(u,r)),min:q(Je(u,r)),max:q(Ke(u,r))}};return U(()=>{p()}),ne(()=>e.students,()=>{const c=e.getStudent(s.studentId);c&&(a.value=c)},{deep:!0}),(c,u)=>(y(),F(O,null,[u[0]||(u[0]=d("h2",{class:"title-section"},"Student Details",-1)),d("div",cn,[a.value?(y(),F("div",mn,[l(en,{name:a.value.name,surname:a.value.surname,gender:a.value.gender,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","surname","gender"]),l(Ha,{"student-id":c.studentId,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["student-id"]),l(Ya,{"student-id":c.studentId,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["student-id"]),l(rn,{"student-id":a.value.id,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["student-id"]),l(un,{"individual-performance":i.value,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["individual-performance"]),l(Ka,{"individual-data":i.value,"class-data":m.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["individual-data","class-data"]),l(an,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["student-id"]),l(on,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["student-id"])])):L("",!0)])],64))}}),fn={class:"flex flex-col gap-1"},gn={class:"flex flex-col gap-1"},vn={class:"flex flex-col gap-1"},hn={class:"flex items-center gap-2"},_n={class:"flex flex-col gap-1"},bn={class:"flex items-center gap-2"},yn={class:"flex justify-end gap-2 mt-4"},xn=D({__name:"NewTestDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=z(),o=Q(),n=ae(t,"visible"),s=Z({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),a=()=>{n.value=!1},i=async r=>{r&&(s.weight=1,await ve(),s.weight=null)};ne(()=>n.value,r=>{i(r)});const m={name:k.string().min(1,"Name is required"),maxPoints:k.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:k.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:k.boolean()},p=k.discriminatedUnion("isRequired",[k.object({...m,isRequired:k.literal(!0),requiredPoints:k.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(r=>r.requiredPoints<=r.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),k.object({...m,isRequired:k.literal(!1),requiredPoints:k.number().nullable().optional()})]),c=w(oe(p)),u=r=>{if(r.valid){const f={name:r.states.name.value,maxPoints:r.states.maxPoints.value,weight:r.states.weight.value,requiredPoints:r.states.isRequired.value?r.states.requiredPoints.value:null,isMandatory:r.states.isRequired.value?r.states.isMandatory.value:!1};Ze(f)?(e.addTest(f),o.add({severity:"success",summary:"Success",detail:"Successfully added test.",life:3e3}),a()):console.error("Wrong data from form!")}};return(r,f)=>{const v=h("InputText"),_=h("FloatLabel"),x=h("Message"),b=h("InputNumber"),I=h("Checkbox"),C=h("Button"),G=h("Form"),V=h("Dialog");return y(),P(V,{header:"Add Test",visible:n.value,"onUpdate:visible":f[0]||(f[0]=j=>n.value=j),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(G,{initialValues:s,resolver:c.value,onSubmit:u,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(j=>[d("div",fn,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"name",name:"name",variant:"filled",class:"w-full"}),f[1]||(f[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),j.name?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(j.name.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",gn,[l(_,{variant:"on"},{default:g(()=>[l(b,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),f[2]||(f[2]=d("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),j.maxPoints?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(j.maxPoints.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",vn,[l(_,{variant:"on"},{default:g(()=>[l(b,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1}),f[3]||(f[3]=d("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),j.weight?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(j.weight.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",hn,[l(I,{id:"isRequired",name:"isRequired",binary:""}),f[4]||(f[4]=d("label",{for:"isRequired"},"Required",-1))]),d("div",_n,[l(_,{variant:"on"},{default:g(()=>[l(b,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1,disabled:!j.isRequired?.value},null,8,["disabled"]),f[5]||(f[5]=d("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),j.requiredPoints?.invalid?(y(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(j.requiredPoints.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",bn,[l(I,{id:"isMandatory",name:"isMandatory",binary:""}),f[6]||(f[6]=d("label",{for:"isMandatory"},"Mandatory",-1))]),d("div",yn,[l(C,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),l(C,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),wn={class:"flex flex-wrap gap-2 items-center justify-between"},In={class:"w-full h-full cursor-pointer px-3 py-4"},Sn={class:"w-full h-full cursor-pointer px-3 py-4"},Pn={class:"w-full h-full cursor-pointer px-3 py-4"},Dn=D({__name:"TestsDatatable",setup(t){const e=z(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:ee.CONTAINS},name:{operator:le.AND,constraints:[{value:null,matchMode:ee.STARTS_WITH}]},weight:{operator:le.AND,constraints:[{value:null,matchMode:ee.EQUALS}]},isMandatory:{value:null,matchMode:ee.EQUALS}}};n();const s=()=>{n()},a=m=>{De.push(`/main/tests/test/${m.data.id}`)},i=m=>m?"success":"info";return(m,p)=>{const c=h("Button"),u=h("InputIcon"),r=h("InputText"),f=h("IconField"),v=h("Column"),_=h("Tag"),x=h("Checkbox"),b=h("DataTable");return y(),P(b,{value:se(e).tests,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":p[2]||(p[2]=I=>o.value=I),filterDisplay:"menu",globalFilterFields:["name","weight","isMandatory"],onRowSelect:a,selectionMode:"single"},{header:g(()=>[d("div",wn,[l(c,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:p[0]||(p[0]=I=>s())}),l(f,null,{default:g(()=>[l(u,null,{default:g(()=>p[3]||(p[3]=[d("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),l(r,{modelValue:o.value.global.value,"onUpdate:modelValue":p[1]||(p[1]=I=>o.value.global.value=I),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:g(()=>p[4]||(p[4]=[d("div",{class:"w-full h-full px-3 py-4"}," No tests found. ",-1)])),default:g(()=>[l(v,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:g(({data:I})=>[d("div",In,M(I.name),1)]),filter:g(({filterModel:I})=>[l(r,{modelValue:I.value,"onUpdate:modelValue":C=>I.value=C,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{field:"weight",header:"Weight",filterField:"weight"},{body:g(({data:I})=>[d("div",Sn,M(I.weight),1)]),filter:g(({filterModel:I})=>[l(r,{modelValue:I.value,"onUpdate:modelValue":C=>I.value=C,type:"text",placeholder:"Search by Weight"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{field:"isMandatory",header:"Mandatory",dataType:"boolean"},{body:g(({data:I})=>[d("div",Pn,[l(_,{value:I.isMandatory?"Yes":"No",severity:i(I.isMandatory)},null,8,["value","severity"])])]),filter:g(({filterModel:I})=>[p[5]||(p[5]=d("label",{for:"mandatory-filter",class:"font-bold"}," Mandatory ",-1)),l(x,{modelValue:I.value,"onUpdate:modelValue":C=>I.value=C,indeterminate:I.value===null,binary:"",inputId:"mandatory-filter"},null,8,["modelValue","onUpdate:modelValue","indeterminate"])]),_:1})]),_:1},8,["value","filters"])}}}),Tn=te(Dn,[["__scopeId","data-v-8df28073"]]),Cn={class:"cards-section"},$n={class:"mb-4"},Mn=D({__name:"TestsListView",setup(t){const e=w(!1);return(o,n)=>(y(),F(O,null,[n[3]||(n[3]=d("h2",{class:"title-section"},"Tests",-1)),d("div",Cn,[l(N,null,{header:g(()=>n[2]||(n[2]=[d("h3",null,"List of tests",-1)])),body:g(()=>[d("div",$n,[l(se(ze),{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=s=>e.value=!0)})]),l(Tn)]),_:1})]),l(xn,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=s=>e.value=s)},null,8,["visible"])],64))}}),kn={class:"flex flex-col gap-4"},Gn={class:"flex flex-col gap-1"},qn=D({__name:"Export",setup(t){const e=fe(),o=Q(),n=async()=>{try{await e.exportToJson(),o.add({severity:"success",summary:"Success",detail:"Successfully saved data to json.",life:3e3})}catch(s){o.add({severity:"error",summary:"Error",detail:s.message,life:4e3})}};return(s,a)=>{const i=h("Button");return y(),P(N,null,{header:g(()=>a[1]||(a[1]=[d("h3",null,"Export",-1)])),body:g(()=>[d("div",kn,[d("div",Gn,[a[2]||(a[2]=d("h4",null,"Save data",-1)),l(i,{label:"Save",icon:"pi pi-file-export",class:"w-fit",onClick:a[0]||(a[0]=m=>n())})])])]),_:1})}}}),Fn={class:"flex flex-col gap-4 mt-2"},Bn={class:"flex items-center gap-4"},An=D({__name:"GeneralSettings",setup(t){const e=Pe(),o=w(),n=w([{name:"With dialog",code:"D"},{name:"With input",code:"I"}]);return U(()=>{e.settings?.editWithDialog?o.value={name:"With dialog",code:"D"}:o.value={name:"With input",code:"I"}}),ne(o,()=>{o.value?.code==="D"?e.updateSettings({editWithDialog:!0}):e.updateSettings({editWithDialog:!1})},{deep:!0}),(s,a)=>{const i=h("Select");return y(),P(N,null,{header:g(()=>a[1]||(a[1]=[d("h3",null,"General",-1)])),body:g(()=>[d("div",Fn,[d("div",Bn,[a[2]||(a[2]=d("h5",null,"Editing grade:",-1)),l(i,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=m=>o.value=m),options:n.value,optionLabel:"name",placeholder:"Select",class:"w-full md:w-56"},null,8,["modelValue","options"])])])]),_:1})}}}),Rn={class:"flex flex-col gap-1"},Nn={class:"flex flex-col gap-1"},Ln={class:"flex justify-end gap-2 mt-4"},Vn=D({__name:"EditGradeThresholdDialog",props:ce({id:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=de(),o=Q(),n=t,s=ae(t,"visible"),a=Z({id:"",name:"",minPercentage:null}),i=w(oe(k.object({name:k.string("Grade name is required").min(1,"Grade name is required"),minPercentage:k.number("Min percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),m=async u=>{if(u){const r=e.getGradeThreshold(n.id);r&&Object.assign(a,r),await ve(),Object.assign(a,{name:"",minPercentage:null})}};ne(s,u=>{m(u)});const p=()=>{s.value=!1},c=u=>{if(u.valid){const r={name:u.states.name.value,minPercentage:u.states.minPercentage.value};et(r)?(e.updateGradeThreshold(n.id,r),o.add({severity:"success",summary:"Success",detail:"Successfully edited grade threshold.",life:3e3}),s.value=!1):console.error("Wrong data from form")}};return(u,r)=>{const f=h("InputText"),v=h("FloatLabel"),_=h("Message"),x=h("InputNumber"),b=h("Button"),I=h("Form"),C=h("Dialog");return y(),P(C,{header:"Edit Grade Threshold",visible:s.value,"onUpdate:visible":r[0]||(r[0]=G=>s.value=G),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[l(I,{initialValues:a,resolver:i.value,onSubmit:c,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(G=>[d("div",Rn,[l(v,{variant:"on"},{default:g(()=>[l(f,{id:"name",name:"name",variant:"filled",class:"w-full"}),r[1]||(r[1]=d("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),G.name?.invalid?(y(),P(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(G.name.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Nn,[l(v,{variant:"on"},{default:g(()=>[l(x,{id:"minPercentage",name:"minPercentage",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:0,step:1}),r[2]||(r[2]=d("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),G.minPercentage?.invalid?(y(),P(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(G.minPercentage.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Ln,[l(b,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:p}),l(b,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),En={class:"w-full px-3 py-4"},Wn={class:"w-full px-3 py-4"},zn={class:"flex gap-3 w-full justify-center min-h-1 px-3 py-1"},jn=D({__name:"GradingScaleDatatable",setup(t){const e=de(),o=he(),n=Q(),s=w(""),a=w(!1),i=K(()=>[...e.gradeThresholds].sort((c,u)=>u.minPercentage-c.minPercentage)),m=c=>{s.value=c,a.value=!0},p=c=>{o.require({message:"Are you sure you want to proceed? The grade threshold will be deleted.",header:"Delete grade threshold",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteGradeThreshold(c),n.add({severity:"success",summary:"Success",detail:"Succesfully deleted grade threshold",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete grade threshold",life:3e3})}}})};return(c,u)=>{const r=h("Column"),f=h("Button"),v=h("DataTable");return y(),F(O,null,[l(v,{value:i.value,scrollable:"",class:"custom-table"},{default:g(()=>[l(r,{field:"name",header:"Grade"},{body:g(({data:_})=>[d("div",En,M(_.name),1)]),_:1}),l(r,{field:"minPercentage",header:"Percentage"},{body:g(({data:_})=>[d("div",Wn,M(_.minPercentage),1)]),_:1}),l(r,{field:"actions",header:"Actions",class:"w-40"},{body:g(({data:_})=>[d("div",zn,[l(f,{icon:"pi pi-file-edit",rounded:"",severity:"info","aria-label":"Edit",onClick:x=>m(_.id)},null,8,["onClick"]),l(f,{icon:"pi pi-times-circle",rounded:"",severity:"danger","aria-label":"Delete",onClick:x=>p(_.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"]),l(Vn,{id:s.value,visible:a.value,"onUpdate:visible":u[0]||(u[0]=_=>a.value=_)},null,8,["id","visible"])],64)}}}),Un=te(jn,[["__scopeId","data-v-71cbc1fc"]]);function On(){return[{name:"Polish University",gradethresholds:[{name:"5.0",minPercentage:90},{name:"4.5",minPercentage:80},{name:"4.0",minPercentage:70},{name:"3.5",minPercentage:60},{name:"3.0",minPercentage:50},{name:"2.0",minPercentage:0}]},{name:"Polish",gradethresholds:[{name:"6",minPercentage:98},{name:"5",minPercentage:90},{name:"4",minPercentage:75},{name:"3",minPercentage:50},{name:"2",minPercentage:30},{name:"1",minPercentage:0}]},{name:"Japanese University",gradethresholds:[{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"Japanese",gradethresholds:[{name:"秀",minPercentage:90},{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"UK GCSE/A-Level",gradethresholds:[{name:"A*",minPercentage:90},{name:"A",minPercentage:80},{name:"B",minPercentage:70},{name:"C",minPercentage:60},{name:"D",minPercentage:50},{name:"E",minPercentage:40},{name:"F",minPercentage:30},{name:"G",minPercentage:20},{name:"U",minPercentage:0}]}]}const Hn=D({__name:"SelectSystemDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=de(),o=Q(),n=ae(t,"visible"),s=Z(On()),a=w(oe(Me({system:ft([Me({name:vt().min(1,"System is required.")}),gt().refine(p=>!1,{message:"System is required."})])}))),i=()=>{n.value=!1},m=p=>{p.valid&&p.states.system&&(e.replaceGradeThresholds(p.states.system.value.gradethresholds),o.add({severity:"success",summary:"Success",detail:"Successfully changed grading system.",life:3e3}),i())};return(p,c)=>{const u=h("Listbox"),r=h("Message"),f=h("Button"),v=h("Form"),_=h("Dialog");return y(),P(_,{header:"Select Grading system",visible:n.value,"onUpdate:visible":c[0]||(c[0]=x=>n.value=x),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[l(v,{resolver:a.value,onSubmit:m,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(x=>[l(u,{name:"system",options:s,optionLabel:"name",virtualScrollerOptions:{itemSize:20},class:"w-full",listStyle:"height:250px",striped:"",fluid:""},null,8,["options"]),x.system?.invalid?(y(),P(r,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(x.system.error?.message),1)]),_:2},1024)):L("",!0),l(f,{label:"Select",type:"submit",autofocus:"",disabled:!x.system?.value},null,8,["disabled"])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),Jn={class:"flex flex-col gap-1"},Kn={class:"flex flex-col gap-1"},Xn={class:"flex justify-end gap-2 mt-4"},Qn=D({__name:"NewGradeThresholdDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=de(),o=Q(),n=ae(t,"visible"),s=w(oe(k.object({name:k.string("Grade name is required").min(1,"Grade name is required"),minPercentage:k.number("Min Percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),a=()=>{n.value=!1},i=m=>{if(m.valid){const p={name:m.states.name.value,minPercentage:m.states.minPercentage.value};et(p)?(e.addGradeThreshold(p),o.add({severity:"success",summary:"Success",detail:"Successfully added grade threshold.",life:3e3}),a()):console.error("Wrong data from form!")}};return(m,p)=>{const c=h("InputText"),u=h("FloatLabel"),r=h("Message"),f=h("InputNumber"),v=h("Button"),_=h("Form"),x=h("Dialog");return y(),P(x,{header:"New Grade Threshold",visible:n.value,"onUpdate:visible":p[0]||(p[0]=b=>n.value=b),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[l(_,{resolver:s.value,onSubmit:i,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(b=>[d("div",Jn,[l(u,{variant:"on"},{default:g(()=>[l(c,{id:"name",name:"name",variant:"filled",class:"w-full"}),p[1]||(p[1]=d("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),b.name?.invalid?(y(),P(r,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(b.name.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Kn,[l(u,{variant:"on"},{default:g(()=>[l(f,{id:"minPercentage",name:"minPercentage",class:"w-full",variant:"filled",min:0,max:100,step:1}),p[2]||(p[2]=d("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),b.minPercentage?.invalid?(y(),P(r,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(b.minPercentage.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",Xn,[l(v,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),l(v,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),Zn={class:"mt-2 mb-4 flex justify-between"},Yn=D({__name:"GradingThresholds",setup(t){const e=w(!1),o=w(!1);return(n,s)=>{const a=h("Button");return y(),P(N,null,{header:g(()=>s[4]||(s[4]=[d("h3",null,"Grading thresholds",-1)])),body:g(()=>[d("div",Zn,[l(a,{label:"New",icon:"pi pi-plus",onClick:s[0]||(s[0]=i=>o.value=!0)}),l(a,{variant:"outlined",label:"Select System",icon:"pi pi-graduation-cap",onClick:s[1]||(s[1]=i=>e.value=!0)})]),l(Un),l(Hn,{visible:e.value,"onUpdate:visible":s[2]||(s[2]=i=>e.value=i)},null,8,["visible"]),l(Qn,{visible:o.value,"onUpdate:visible":s[3]||(s[3]=i=>o.value=i)},null,8,["visible"])]),_:1})}}}),eo={class:"flex flex-col gap-4"},to={class:"flex flex-col gap-1"},so={class:"flex flex-col gap-1"},ao=D({__name:"Import",setup(t){const e=fe(),o=he(),n=Q(),s=w(null),a=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load demo data",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{try{await e.loadDemoData(),n.add({severity:"success",summary:"Success",detail:"Successfully loaded demo data",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to load demo data",life:3e3})}}})},i=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load data from device",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{s.value?.click()}})},m=async p=>{const c=p.target;if(!c.files?.length){n.add({severity:"info",summary:"Info",detail:"No file selected",life:3e3});return}const u=c.files[0];try{const r=await u.text();await e.importFromJson(r),n.add({severity:"success",summary:"Success",detail:"Successfully loaded data",life:3e3})}catch{n.add({severity:"error",summary:"Error",detail:"Failed to load data",life:3e3})}finally{c.value=""}};return(p,c)=>{const u=h("Button");return y(),P(N,null,{header:g(()=>c[2]||(c[2]=[d("h3",null,"Import",-1)])),body:g(()=>[d("div",eo,[d("div",to,[c[3]||(c[3]=d("h4",null,"Load demo data",-1)),l(u,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:c[0]||(c[0]=r=>a())})]),d("div",so,[c[4]||(c[4]=d("h4",null,"Load data from device",-1)),l(u,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:c[1]||(c[1]=r=>i())}),d("input",{type:"file",ref_key:"fileInput",ref:s,accept:"application/json",class:"hidden",onChange:m},null,544)])])]),_:1})}}}),no={class:"cards-section"},oo={class:"grid grid-cols-1 lg:grid-cols-2 auto-rows-auto w-full"},io=D({__name:"SettingsView",setup(t){return(e,o)=>(y(),F(O,null,[o[0]||(o[0]=d("h2",{class:"title-section"},"Settings",-1)),d("div",no,[d("div",oo,[l(An,{class:"lg:col-span-2"}),l(Yn,{class:"lg:col-span-2 row-start-2"}),l(ao,{class:"lg:row-start-3"}),l(qn,{class:"lg:row-start-3"})])])],64))}}),lo={class:"flex flex-col gap-1"},ro={class:"flex flex-col gap-1"},uo={class:"flex flex-col gap-1"},co={class:"flex items-center gap-2"},mo={class:"flex flex-col gap-1"},po={class:"flex items-center gap-2"},fo={class:"flex justify-end gap-2 mt-4"},go=D({__name:"EditTestDialog",props:ce({testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ce(["submit"],["update:visible"]),setup(t,{emit:e}){const o=z(),n=t,s=ae(t,"visible"),a=e,i=Z({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),m={name:k.string().min(1,"Name is required"),maxPoints:k.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:k.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:k.boolean()},p=k.discriminatedUnion("isRequired",[k.object({...m,isRequired:k.literal(!0),requiredPoints:k.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(v=>v.requiredPoints<=v.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),k.object({...m,isRequired:k.literal(!1),requiredPoints:k.number().nullable().optional()})]),c=w(oe(p)),u=()=>{s.value=!1},r=v=>{if(v.valid){const _={name:v.states.name.value,maxPoints:v.states.maxPoints.value,weight:v.states.weight.value,requiredPoints:v.states.isRequired.value?v.states.requiredPoints.value:null,isMandatory:v.states.isRequired.value?v.states.isMandatory.value:!1};Ze(_)?a("submit",_):console.error("Wrong data from form!")}},f=async v=>{if(v){const _=o.getTest(n.testId);_&&(Object.assign(i,_),i.isRequired=i.requiredPoints!==null),await ve(),Object.assign(i,{name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1})}};return ne(()=>s.value,v=>{f(v)}),(v,_)=>{const x=h("InputText"),b=h("FloatLabel"),I=h("Message"),C=h("InputNumber"),G=h("Checkbox"),V=h("Button"),j=h("Form"),ue=h("Dialog");return y(),P(ue,{header:"Edit test",visible:s.value,"onUpdate:visible":_[0]||(_[0]=S=>s.value=S),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(j,{initialValues:i,resolver:c.value,onSubmit:r,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(S=>[d("div",lo,[l(b,{variant:"on"},{default:g(()=>[l(x,{id:"name",name:"name",variant:"filled",class:"w-full"}),_[1]||(_[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),S.name?.invalid?(y(),P(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(S.name.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",ro,[l(b,{variant:"on"},{default:g(()=>[l(C,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),_[2]||(_[2]=d("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),S.maxPoints?.invalid?(y(),P(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(S.maxPoints.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",uo,[l(b,{variant:"on"},{default:g(()=>[l(C,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),_[3]||(_[3]=d("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),S.weight?.invalid?(y(),P(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(S.weight.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",co,[l(G,{id:"isRequired",name:"isRequired",binary:""}),_[4]||(_[4]=d("label",{for:"isRequired"},"Required",-1))]),d("div",mo,[l(b,{variant:"on"},{default:g(()=>[l(C,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1,disabled:!S.isRequired?.value},null,8,["disabled"]),_[5]||(_[5]=d("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),S.requiredPoints?.invalid?(y(),P(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(S.requiredPoints.error?.message),1)]),_:2},1024)):L("",!0)]),d("div",po,[l(G,{id:"isMandatory",name:"isMandatory",binary:""}),_[6]||(_[6]=d("label",{for:"isMandatory"},"Mandatory",-1))]),d("div",fo,[l(V,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:u}),l(V,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),vo={class:"flex gap-1"},ho={class:"flex gap-1"},_o={class:"flex gap-1"},bo={class:"flex justify-end gap-2 mt-4"},yo=D({__name:"ChangeGradesDialog",props:ce({testId:{},editedTest:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=Q(),o=z(),n=W(),s=t,a=ae(t,"visible"),i=Z({option:"Reduce"}),m=w(oe(k.object({ingredient:k.string().min(1,{message:"Option is required."})}))),p=()=>{a.value=!1},c=async u=>{if(u.valid){let r=!1;const f=u.states.option.value;if(console.log(f),console.log(s.editedTest),console.log(o.getTest(s.testId)),f==="Reduce")await n.reduceGradesByTest(s.testId,s.editedTest.maxPoints),r=!0;else if(f==="Normalize"){const v=o.getTest(s.testId);v?(await n.normalizeGradesByTest(s.testId,v.maxPoints,s.editedTest.maxPoints),r=!0):console.error("Test doesn't exists!")}else f==="Delete"?(await n.deleteGradesByTest(s.testId),r=!0):console.error("Wrong data from form!");r&&(await o.updateTest(s.testId,s.editedTest),a.value=!1,e.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))}};return(u,r)=>{const f=h("RadioButton"),v=h("RadioButtonGroup"),_=h("Message"),x=h("Button"),b=h("Form"),I=h("Dialog");return y(),P(I,{header:"Change grades",visible:a.value,"onUpdate:visible":r[0]||(r[0]=C=>a.value=C),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(b,{initialValues:i,resolver:m.value,onSubmit:c,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(C=>[l(v,{name:"option",class:"flex flex-col gap-3 w-full"},{default:g(()=>[d("div",vo,[l(f,{inputId:"reduce",value:"Reduce"}),r[1]||(r[1]=d("label",{for:"reduce"},"Reduce grades to new maximum points",-1))]),d("div",ho,[l(f,{inputId:"normalize",value:"Normalize"}),r[2]||(r[2]=d("label",{for:"normalize"},"Normalize grades to new maximum points",-1))]),d("div",_o,[l(f,{inputId:"delete",value:"Delete"}),r[3]||(r[3]=d("label",{for:"delete"},"Delete all grades",-1))])]),_:1}),C.option?.invalid?(y(),P(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[E(M(C.option.error?.message),1)]),_:2},1024)):L("",!0),d("div",bo,[l(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:p}),l(x,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),xo={class:"flex flex-wrap justify-evenly pb-6"},wo={class:"flex flex-col justify-center items-center gap-1"},Io={class:"flex flex-col justify-center items-center gap-1"},So=D({__name:"ActionsTest",props:{testId:{},maxPoints:{}},setup(t){const e=z(),o=he(),n=Q(),s=Se(),a=t,i=w(!1),m=w(!1),p=Z({name:"",maxPoints:1,weight:0,requiredPoints:null,isMandatory:!1}),c=()=>{o.require({message:"Are you sure you want to proceed? The test will be deleted.",header:"Delete test",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteTest(a.testId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted test",life:3e3}),s.push("/tests")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete test",life:3e3})}}})},u=r=>{Object.assign(p,r),i.value=!1,p.maxPoints!==a.maxPoints?m.value=!0:(e.updateTest(a.testId,p),n.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))};return(r,f)=>{const v=h("Button");return y(),P(N,null,{header:g(()=>f[4]||(f[4]=[d("h3",null,"Actions",-1)])),body:g(()=>[d("div",xo,[d("div",wo,[f[5]||(f[5]=d("h4",null,"Edit test data",-1)),l(v,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:f[0]||(f[0]=_=>i.value=!0)})]),d("div",Io,[f[6]||(f[6]=d("h4",null,"Delete test",-1)),l(v,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:f[1]||(f[1]=_=>c())})])]),l(go,{"test-id":r.testId,visible:i.value,"onUpdate:visible":f[2]||(f[2]=_=>i.value=_),onSubmit:u},null,8,["test-id","visible"]),l(yo,{"test-id":r.testId,editedTest:p,visible:m.value,"onUpdate:visible":f[3]||(f[3]=_=>m.value=_)},null,8,["test-id","editedTest","visible"])]),_:1})}}}),Po=D({__name:"InfoData",props:{name:{},weight:{},requiredPoints:{},maxPoints:{},isMandatory:{type:Boolean}},setup(t){const e=t,o=n=>n?"success":"info";return(n,s)=>{const a=h("Tag");return y(),P(N,null,{header:g(()=>s[0]||(s[0]=[d("h3",null,"Info data",-1)])),body:g(()=>[d("h4",null,"Name: "+M(e.name),1),d("h4",null,"Weight: "+M(e.weight),1),d("h4",null,"Required points: "+M(e.requiredPoints??"-"),1),d("h4",null,"Max points: "+M(e.maxPoints),1),d("h4",null,[s[1]||(s[1]=E("Mandatory: ")),l(a,{value:n.isMandatory?"Yes":"No",severity:o(n.isMandatory)},null,8,["value","severity"])])]),_:1})}}}),Do={class:"flex justify-evenly flex-wrap gap-4 mt-2"},To=D({__name:"TestPerformance",props:{maxPoints:{},classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),P(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Performance",-1)])),body:g(()=>[d("div",Do,[l(X,{title:"Weighted Average",value:e.classPerformance.weightedAverage,max:o.maxPoints},null,8,["value","max"]),l(X,{title:"Median",value:e.classPerformance.median,max:o.maxPoints},null,8,["value","max"]),l(X,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:o.maxPoints/2},null,8,["value","max"]),l(X,{title:"Max",value:e.classPerformance.max,max:o.maxPoints},null,8,["value","max"]),l(X,{title:"Min",value:e.classPerformance.min,max:o.maxPoints},null,8,["value","max"])])]),_:1}))}}),Co={class:"relative w-full h-[90%]"},$o=D({__name:"TestPassRate",props:{testId:{},requiredPoints:{}},setup(t){const e=H(),o=W(),n=t,s=w(),a=w(),i=()=>{let c=0,u=0,r=0;return e.students.filter(f=>{const v=o.getGrade(f.id,n.testId);v?n.requiredPoints===null||v.points>=n.requiredPoints?c++:u++:r++}),{labels:["Passed","Failed","Not Taken"],datasets:[{data:[c,u,r],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(156, 163, 175)"],borderWidth:1}]}},m=()=>({indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}),p=()=>{s.value=i(),a.value=m()};return U(()=>{p()}),(c,u)=>{const r=h("Chart");return y(),P(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Pass Rate",-1)])),body:g(()=>[d("div",Co,[l(r,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),Mo={class:"relative w-full h-[90%]"},ko=D({__name:"TestPassRateByGender",props:{testId:{},requiredPoints:{}},setup(t){const e=H(),o=W(),n=t,s=w(),a=w(),i=()=>{const c=["Male","Female"],u={};c.forEach(r=>u[r]={passed:0,failed:0,notTaken:0}),e.students.forEach(r=>{const f=o.getGrade(r.id,n.testId),v=r.gender;f?n.requiredPoints===null||f.points>=n.requiredPoints?u[v].passed++:u[v].failed++:u[v].notTaken++}),s.value={labels:["Passed","Failed","Not taken"],datasets:[{label:"Male",data:[u.Male.passed,u.Male.failed,u.Male.notTaken],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1},{label:"Female",data:[u.Female.passed,u.Female.failed,u.Female.notTaken],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}},m=()=>{a.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}},p=()=>{i(),m()};return U(()=>{p()}),(c,u)=>{const r=h("Chart");return y(),P(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Pass rate by gender",-1)])),body:g(()=>[d("div",Mo,[l(r,{type:"bar",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),Go={class:"relative w-full h-[90%]"},qo=D({__name:"TestPerformanceByGender",props:{maleData:{},femaleData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Male",data:[e.maleData.weightedAverage,e.maleData.median,e.maleData.standardDeviation,e.maleData.min,e.maleData.max],backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:[e.femaleData.weightedAverage,e.femaleData.median,e.femaleData.standardDeviation,e.femaleData.min,e.femaleData.max],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0}}});return U(()=>{o.value=s(),n.value=a()}),(m,p)=>{const c=h("Chart");return y(),P(N,null,{header:g(()=>p[0]||(p[0]=[d("h3",null,"Performance by gender",-1)])),body:g(()=>[d("div",Go,[l(c,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),Fo=D({__name:"TestResultsDatatable",props:{testId:{},requiredPoints:{},maxPoints:{}},setup(t){const e=H(),o=W(),n=t,s=K(()=>o.grades.filter(i=>i.testId===n.testId).map(i=>{const m=e.students.find(u=>u.id===i.studentId);if(!m)return null;const p=q(i.points/n.maxPoints*100),c=n.requiredPoints!==null?i.points>=n.requiredPoints:!0;return{name:m.name,surname:m.surname,points:i.points,percentage:p,status:c}})),a=i=>i?"success":"warn";return(i,m)=>{const p=h("Column"),c=h("Tag"),u=h("DataTable");return y(),P(N,null,{header:g(()=>m[0]||(m[0]=[d("h3",null,"Results - details",-1)])),body:g(()=>[l(u,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:g(()=>[l(p,{field:"name",header:"Name"}),l(p,{field:"surname",header:"Surname"}),l(p,{field:"points",header:"Score"}),l(p,{field:"percentage",header:"Normalized Score (%)"}),l(p,{field:"status",header:"Status"},{body:g(({data:r})=>[l(c,{value:r.status?"passed":"failed",severity:a(r.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),Bo=te(Fo,[["__scopeId","data-v-67e41818"]]),Ao={class:"flex-1 min-w-64 h-fit"},Ro={class:"relative w-full h-[400px]"},we=4,No=D({__name:"TestResults",props:{testId:{},maxScore:{}},setup(t){const e=H(),o=W(),n=t,s=w(),a=w(),i=w(0),m=w(0),p=()=>{const f=o.grades.filter(b=>b.testId===n.testId).map(b=>{const I=e.students.find(C=>C.id===b.studentId);return{name:I?.name,surname:I?.surname,score:b.points,percentage:b.points/n.maxScore*100}});m.value=f.length;const v=i.value*we,_=v+we,x=f.slice(v,_);s.value={labels:x.map(b=>`${b.name} ${b.surname}`),datasets:[{label:"Score",data:x.map(b=>b.percentage),scores:x.map(b=>b.score),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},c=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:f=>{const v=f.dataset,_=f.dataIndex;return`${v.scores[_]} / ${n.maxScore} points (${f.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},u=()=>{p(),c()};U(()=>{u()});const r=f=>{i.value=f.page,p()};return(f,v)=>{const _=h("Chart"),x=h("Paginator");return y(),P(N,null,{header:g(()=>v[0]||(v[0]=[d("h3",null,"Results",-1)])),body:g(()=>[d("div",Ao,[d("div",Ro,[l(_,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),l(x,{rows:we,totalRecords:m.value,page:i.value,onPage:r},null,8,["totalRecords","page"])])]),_:1})}}}),Lo={class:"cards-section"},Vo={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},Eo=D({__name:"TestDetailsView",props:{testId:{}},setup(t){const e=H(),o=z(),n=W(),s=t,a=w(),i=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),p=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),c=()=>{const u=o.getTest(s.testId);if(!u)return;const r=e.students,f=n.grades;a.value=u,i.value={weightedAverage:q(ps(f,s.testId)),median:q(fs(f,s.testId)),standardDeviation:q(gs(f,s.testId)),min:q(vs(f,s.testId)),max:q(hs(f,s.testId))},m.value={weightedAverage:q(ge(f,r,s.testId,"Male")),median:q(qe(f,r,s.testId,"Male")),standardDeviation:q(Fe(f,r,s.testId,"Male")),min:q(Be(f,r,s.testId,"Male")),max:q(Ae(f,r,s.testId,"Male"))},p.value={weightedAverage:q(ge(f,r,s.testId,"Female")),median:q(qe(f,r,s.testId,"Female")),standardDeviation:q(Fe(f,r,s.testId,"Female")),min:q(Be(f,r,s.testId,"Female")),max:q(Ae(f,r,s.testId,"Female"))}};return U(()=>{c()}),ne(()=>o.tests,()=>{c()},{deep:!0}),(u,r)=>(y(),F(O,null,[r[0]||(r[0]=d("h2",{class:"title-section"},"Test Details",-1)),d("div",Lo,[a.value?(y(),F("div",Vo,[l(Po,{name:a.value?.name,weight:a.value?.weight,"required-points":a.value?.requiredPoints,"max-points":a.value?.maxPoints,"is-mandatory":a.value?.isMandatory,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","weight","required-points","max-points","is-mandatory"]),l(So,{"test-id":u.testId,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["test-id","max-points"]),l($o,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["test-id","required-points"]),l(ko,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["test-id","required-points"]),l(To,{"class-performance":i.value,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["class-performance","max-points"]),l(qo,{"male-data":m.value,"female-data":p.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["male-data","female-data"]),l(No,{"test-id":a.value.id,"max-score":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["test-id","max-score"]),l(Bo,{"test-id":a.value.id,"required-points":a.value.requiredPoints,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["test-id","required-points","max-points"])])):L("",!0)])],64))}}),Wo={},zo={class:"p-4 w-full bg-footer-background justify-center text-center"};function jo(t,e){return y(),F("footer",zo,e[0]||(e[0]=[d("p",null,[E("Project hosted on "),d("a",{href:"https://github.com/RobertPintera/Class-register",class:"hover:text-blue-600 underline"},"Github")],-1)]))}const Uo=te(Wo,[["render",jo]]),Oo={class:"pt-16"},Ho=D({__name:"HomeLayout",setup(t){return(e,o)=>{const n=h("router-view");return y(),F(O,null,[l(Qe,{"is-toggle-sidebar":!1}),d("div",Oo,[l(n)]),l(Uo)],64)}}}),Jo={},Ko={class:"px-12 lg:px-48 py-16 w-full flex flex-col gap-8 items-center justify-center bg-secondary-background"};function Xo(t,e){return y(),F("div",Ko,e[0]||(e[0]=[ht('<h1>Features</h1><div class="flex flex-wrap justify-center gap-y-6"><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Data management</h2><h4>Manage the full set of student and test information: create, edit, delete, and organize data in one convenient place.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Analysis of results</h2><h4>View clear statistics and reports to quickly assess individual student progress and overall class performance.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Browser data storage</h2><h4>All data is stored locally in the browser (IndexedDB), enabling offline use.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Flexible settings</h2><h4>Customize how grades are entered and edited to fit your workflow.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Export and import</h2><h4>Easily transfer data between devices by importing or exporting complete information in .json format.</h4></div></div>',2)]))}const Qo=te(Jo,[["render",Xo]]),Zo={class:"py-48 px-12 lg:px-48 w-full flex flex-col justify-center items-center gap-5 text-center"},Yo=D({__name:"MainSection",setup(t){const e=Se(),o=()=>{e.push("/main/dashboard")};return(n,s)=>{const a=h("Button");return y(),F("div",Zo,[s[0]||(s[0]=d("h1",{class:"text-6xl"},"Class register",-1)),s[1]||(s[1]=d("h2",null,"The offline tool to manage student grades and track their progress.",-1)),l(a,{label:"Start to use",size:"large",onClick:o})])}}}),ei={class:"relative flex justify-center gap-10 w-full"},ti={class:"flex gap-8"},si=["src","alt"],Ie=32,ai=D({__name:"Carousel",setup(t){const e=[{alt:"Dashboard",src:new URL("/Class-register/assets/preview_dashboard-CRp4RkkV.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_dashboard_dark-CEzZsSK2.png",import.meta.url).href},{alt:"StudentDetails",src:new URL("/Class-register/assets/preview_studentDetails_1-PAPteEDK.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_studentDetails_1_dark-CHtWqfiZ.png",import.meta.url).href},{alt:"TestDetails",src:new URL("/Class-register/assets/preview_testDetails_1-BkK1pp58.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_testDetails_1_dark-jbl5XXj_.png",import.meta.url).href},{alt:"TestsList",src:new URL("/Class-register/assets/preview_testsList-nvfPi89z.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_testsList_dark-CSzK1hvS.png",import.meta.url).href}],o=Xe(),n=w(),s=w(0),a=w([]),i=w(0),m=w(0),p=()=>{s.value=(s.value+1)%a.value.length,ue()},c=()=>{s.value=(s.value-1+a.value.length)%a.value.length,ue()},u=()=>{a.value.forEach(B=>{B.width=B.ref.offsetWidth,B.startPosition=B.ref.offsetLeft});const S=a.value.map(B=>B.width),A=(e.length-1)*Ie;i.value=S.reduce((B,J)=>B+J,0)+A,console.log(i.value)};function r(S,A=400){const B=performance.now(),J=m.value;function Y(ie){const _e=Math.min((ie-B)/A,1),be=1-Math.pow(1-_e,3);m.value=J+(S-J)*be,m.value=(m.value%i.value+i.value)%i.value,f(),_e<1&&requestAnimationFrame(Y)}requestAnimationFrame(Y)}const f=()=>{n.value&&a.value.forEach((S,A)=>{const B=S.startPosition+m.value+S.width;B>i.value?S.ref.style.transform=`translateX(${m.value-i.value-Ie}px)`:B<0?S.ref.style.transform=`translateX(${i.value-m.value+Ie}px)`:S.ref.style.transform=`translateX(${m.value}px)`})},v=()=>{if(!n.value||a.value.length===0)return;const S=n.value.getBoundingClientRect(),A=S.width/2;let B=0,J=1/0;a.value.forEach((be,tt)=>{const Te=be.ref.getBoundingClientRect(),st=Te.left-S.left+Te.width/2,Ce=Math.abs(st-A);Ce<J&&(J=Ce,B=tt)});const Y=a.value[B].ref.getBoundingClientRect(),ie=Y.left-S.left+Y.width/2;return{offsetToCenter:A-ie,closestIndex:B}},_=S=>{if(!n.value)return;const A=n.value.getBoundingClientRect(),B=A.width/2,J=a.value[S].ref.getBoundingClientRect(),Y=J.left-A.left+J.width/2,ie=B-Y;return s.value=S,ie};let x=!1,b=0,I=0;const C=S=>{x=!0,b="touches"in S?S.touches[0].clientX:S.clientX,I=m.value,f()},G=S=>{if(!x)return;const B=("touches"in S?S.touches[0].clientX:S.clientX)-b;m.value=I+B,f()},V=()=>{if(!x)return;x=!1;const S=v();S&&(r(m.value+S.offsetToCenter),s.value=S?.closestIndex,f())},j=()=>{u();const S=_(s.value);S&&(m.value=m.value+S,m.value=(m.value%i.value+i.value)%i.value,f())},ue=()=>{const S=_(s.value);S&&(r(m.value+S),f())};return U(()=>{setTimeout(()=>{j()},10),window.addEventListener("resize",j)}),_t(()=>{window.removeEventListener("resize",j)}),(S,A)=>{const B=h("Button");return y(),F("div",ei,[l(B,{icon:"pi pi-arrow-left",rounded:"",variant:"outlined",onClick:c,class:"absolute top-1/2 left-8 z-20"}),l(B,{icon:"pi pi-arrow-right",rounded:"",variant:"outlined",onClick:p,class:"absolute top-1/2 right-8 z-20"}),A[0]||(A[0]=d("div",{class:"absolute left-0 top-0 h-full w-64 bg-gradient-to-r from-primary-background to-transparent z-10 pointer-events-none"},null,-1)),A[1]||(A[1]=d("div",{class:"absolute right-0 top-0 h-full w-64 bg-gradient-to-l from-primary-background to-transparent z-10 pointer-events-none"},null,-1)),d("div",{ref_key:"container",ref:n,class:"relative overflow-hidden",onMousedown:C,onMousemove:G,onMouseup:V,onMouseleave:V,onTouchstart:C,onTouchmove:G,onTouchend:V},[d("ul",ti,[(y(),F(O,null,pe(e,(J,Y)=>d("li",{key:Y,ref_for:!0,ref:ie=>{ie&&(a.value[Y]={ref:ie,width:0,startPosition:0})},class:"flex-shrink-0"},[d("img",{src:se(o).isDark?J.srcDark:J.src,alt:J.alt,class:"w-full min-w-[128px] max-w-[50vw] border-4 border-primary-border rounded-2xl select-none",draggable:!1},null,8,si)])),64))])],544)])}}}),ni={class:"px-12 py-16 w-full flex flex-col gap-8 items-center justify-center"},oi=D({__name:"PresentationSection",setup(t){return(e,o)=>(y(),F("div",ni,[o[0]||(o[0]=d("h1",null,"Presentation",-1)),l(ai)]))}}),ii=D({__name:"HomeView",setup(t){return(e,o)=>(y(),F(O,null,[l(Yo),l(Qo),l(oi)],64))}}),li=[{path:"/",component:Ho,children:[{path:"",component:ii}]},{path:"/main",component:Ks,children:[{path:"dashboard",component:pa},{path:"grades",component:Pa},{path:"tests",component:Mn},{path:"tests/test/:testId",component:Eo,props:!0},{path:"students",component:Na},{path:"students/student/:studentId",component:pn,props:!0},{path:"settings",component:io}]}],De=bt({history:yt("/Class-register/"),routes:li}),$=xt(Ns),ri=wt(ls,{semantic:{primary:{50:"{sky.50}",100:"{sky.100}",200:"{sky.200}",300:"{sky.300}",400:"{sky.400}",500:"{sky.500}",600:"{sky.600}",700:"{sky.700}",800:"{sky.800}",900:"{sky.900}",950:"{sky.950}"},colorScheme:{dark:{surface:{0:"#ffffff",800:"var(--color-second-border)",900:"var(--color-card)",950:"var(--color-card)"}}}}});$.use(It,{theme:{preset:ri,options:{cssLayer:{name:"primevue",order:"base, primevue, theme"},darkModeSelector:".dark"}}});$.directive("ripple",St);$.directive("tooltip",Pt);$.use(Dt);$.use(Tt);$.component("Button",ze);$.component("ButtonGroup",Ct);$.component("Column",$t);$.component("DataTable",Mt);$.component("Dialog",kt);$.component("InputText",Gt);$.component("InputNumber",qt);$.component("InputIcon",Ft);$.component("IconField",Bt);$.component("FloatLabel",At);$.component("Menubar",Rt);$.component("Message",Nt);$.component("Form",Lt);$.component("Toolbar",Vt);$.component("DataView",DataView);$.component("Accordion",Et);$.component("AccordionPanel",Wt);$.component("AccordionHeader",zt);$.component("AccordionContent",jt);$.component("Knob",Ut);$.component("Chart",Ot);$.component("Select",Ht);$.component("ToggleSwitch",Jt);$.component("ProgressSpinner",Kt);$.component("Listbox",Xt);$.component("MeterGroup",Qt);$.component("SelectButton",Zt);$.component("Checkbox",Yt);$.component("Paginator",es);$.component("ConfirmDialog",ts);$.component("Toast",ss);$.component("Tag",as);$.component("RadioButton",ns);$.component("RadioButtonGroup",os);const di=is();$.use(di);$.use(De);$.mount("#app");
