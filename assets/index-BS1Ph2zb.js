import{D as je,d as le,r as w,c as j,v as F,e as Je,i as He,F as Ke,a as D,o as E,b as S,f as b,g as y,h as B,j as r,k as N,w as g,l as c,n as de,t as M,m as J,p as ue,q as qe,u as Qe,T as Ye,s as ae,x as ye,y as ie,z as Z,A as Q,B as X,C as ee,E as $,G as R,H as me,I as Y,J as ne,K as Ze,L as Xe,M as et,N as K,O as pe,P as Fe,Q as Ae,R as xe,S as tt,U as st,V as at,W as nt,X as ot,Y as it,Z as lt,_ as rt,$ as dt,a0 as ut,a1 as ct,a2 as mt,a3 as pt,a4 as ft,a5 as gt,a6 as vt,a7 as bt,a8 as ht,a9 as _t,aa as yt,ab as xt,ac as wt,ad as It,ae as St,af as Pt,ag as Dt,ah as Tt,ai as Ct,aj as Mt,ak as $t,al as kt,am as Gt,an as qt,ao as Ft,ap as At,aq as Bt,ar as Nt,as as Rt,at as Vt,au as Wt,av as Lt,aw as Et,ax as Ot,ay as zt,az as Ut,aA as jt}from"./vendor-D7yUqLP7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();class Jt extends je{students;tests;grades;thresholds;settings;constructor(){super("RegisterClassDatabase"),this.version(1).stores({students:"id",tests:"id",grades:"[studentId+testId], studentId, testId",thresholds:"id",settings:"id"}),this.students=this.table("students"),this.tests=this.table("tests"),this.grades=this.table("grades"),this.thresholds=this.table("thresholds"),this.settings=this.table("settings")}}const P=new Jt;async function we(){return P.grades.toArray()}async function Ht(t){return P.grades.add(t)}async function ge(t,e,o){return P.grades.update([e,t],{...o})}async function Kt(t,e){return P.grades.delete([t,e])}async function Qt(t){await P.grades.where("testId").equals(t).delete()}function Yt(t){return Math.round(t*10)/10}function k(t){return Math.round(t*100)/100}function Zt(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?o.reduce((n,s)=>n+s,0)/o.length:0}function Xt(t,e){const o=t.filter(s=>s.testId===e).map(s=>s.points).sort((s,a)=>s-a);if(!o.length)return 0;const n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function es(t,e){const o=t.filter(a=>a.testId===e).map(a=>a.points);if(!o.length)return 0;const n=o.reduce((a,i)=>a+i,0)/o.length,s=o.reduce((a,i)=>a+Math.pow(i-n,2),0)/o.length;return Math.sqrt(s)}function ts(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.min(...o):0}function ss(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.max(...o):0}function ce(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?s.reduce((a,i)=>a+i,0)/s.length:0}function Ie(t,e,o,n){const s=t.filter(i=>i.testId===o.id&&i.points!==void 0).filter(i=>e.find(f=>f.id===i.studentId)?.gender===n).map(i=>i.points);return s.length?s.reduce((i,f)=>i+f,0)/s.length/o.maxPoints*100:0}function Se(t,e,o,n){const s=t.filter(i=>i.testId===o&&i.points!==void 0).filter(i=>e.find(f=>f.id===i.studentId)?.gender===n).map(i=>i.points).sort((i,f)=>i-f);if(!s.length)return 0;const a=Math.floor(s.length/2);return s.length%2!==0?s[a]:(s[a-1]+s[a])/2}function Pe(t,e,o,n){const s=t.filter(f=>f.testId===o&&f.points!==void 0).filter(f=>e.find(m=>m.id===f.studentId)?.gender===n).map(f=>f.points);if(!s.length)return 0;const a=s.reduce((f,m)=>f+m,0)/s.length,i=s.reduce((f,m)=>f+Math.pow(m-a,2),0)/s.length;return Math.sqrt(i)}function De(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.min(...s):0}function Te(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.max(...s):0}function Be(t,e,o){const n=t.filter(i=>i.studentId===o);if(!n.length)return 0;let s=0,a=0;for(const i of n){const f=e.find(m=>m.id===i.testId);f&&f.weight>0&&(s+=i.points/f.maxPoints*f.weight,a+=f.weight)}return a>0?s/a*100:0}function as(t,e,o){const n=t.filter(a=>a.studentId===o).map(a=>{const i=e.find(f=>f.id===a.testId);return i&&i.maxPoints>0?a.points/i.maxPoints*100:0}).sort((a,i)=>a-i);if(!n.length)return 0;const s=Math.floor(n.length/2);return n.length%2!==0?n[s]:(n[s-1]+n[s])/2}function ns(t,e,o){const n=t.filter(i=>i.studentId===o).map(i=>{const f=e.find(m=>m.id===i.testId);return f&&f.maxPoints>0?i.points/f.maxPoints*100:0});if(!n.length)return 0;const s=n.reduce((i,f)=>i+f,0)/n.length,a=n.reduce((i,f)=>i+Math.pow(f-s,2),0)/n.length;return Math.sqrt(a)}function os(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.min(...n):0}function is(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.max(...n):0}function Ne(t,e){let o=0,n=0;for(const s of e){const a=t.filter(f=>f.testId===s.id);if(a.length===0)continue;const i=a.reduce((f,m)=>f+m.points/s.maxPoints*100,0)/a.length;o+=i*s.weight,n+=s.weight}return n>0?o/n:0}function Re(t,e){if(t.length===0)return 0;const o=t.map(s=>{const a=e.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100}).sort((s,a)=>s-a),n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function Ve(t,e){if(t.length===0)return 0;const o=t.map(a=>{const i=e.find(f=>f.id===a.testId);return!i||i.maxPoints===0?0:a.points/i.maxPoints*100}),n=o.reduce((a,i)=>a+i,0)/o.length,s=o.reduce((a,i)=>a+Math.pow(i-n,2),0)/o.length;return Math.sqrt(s)}function We(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.min(...o):0}function Le(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.max(...o):0}const W=le("grades",()=>{const t=w([]);return{grades:j(()=>t.value),updateGrade:async u=>{const d={...u},l=t.value.find(p=>p.studentId===d.studentId&&p.testId===d.testId);l?(l.points=d.points,await ge(l.testId,l.studentId,{points:l.points})):(t.value.push(d),await Ht(d))},deleteGrade:async(u,d)=>{await Kt(u,d),t.value=t.value.filter(l=>!(l.studentId===u&&l.testId===d))},getGrade:(u,d)=>t.value.find(l=>l.studentId===u&&l.testId===d),setGrades:u=>{t.value=u},reduceGradesByTest:async(u,d)=>{const l=t.value.map(p=>p.testId===u&&p.points>d?{...p,points:d}:p);await Promise.all(l.filter(p=>p.testId===u).map(p=>ge(p.testId,p.studentId,{points:p.points}))),t.value=l},normalizeGradesByTest:async(u,d,l)=>{const p=t.value.map(v=>{if(v.testId===u){const h=Yt(v.points/d*l);return{...v,points:h}}return v});await Promise.all(p.filter(v=>v.testId===u).map(v=>ge(v.testId,v.studentId,{points:v.points}))),t.value=p},deleteGradesByTest:async u=>{await Qt(u),t.value=t.value.filter(d=>d.testId!==u)}}});async function ls(){if(await P.thresholds.count()===0){const e=[{id:F(),name:"5",minPercentage:90},{id:F(),name:"4.5",minPercentage:80},{id:F(),name:"4",minPercentage:70},{id:F(),name:"3.5",minPercentage:60},{id:F(),name:"3",minPercentage:50},{id:F(),name:"2",minPercentage:0}];await P.thresholds.bulkAdd(e)}}async function Ce(){return P.thresholds.toArray()}async function rs(t){return P.thresholds.add(t)}async function ds(t,e){return P.thresholds.update(t,e)}async function us(t){return P.thresholds.delete(t)}async function cs(t){await P.transaction("rw",P.thresholds,async()=>{await P.thresholds.clear(),await P.thresholds.bulkAdd(t)})}const oe=le("gradeThresholds",()=>{const t=w([]);return{gradeThresholds:j(()=>t.value),addGradeThreshold:async m=>{const u={id:F(),...m};await rs(u),t.value.push(u)},updateGradeThreshold:async(m,u)=>{await ds(m,u);const d=t.value.findIndex(l=>l.id===m);d!==-1&&(t.value[d]={...t.value[d],...u})},deleteGradeThreshold:async m=>{await us(m),t.value=t.value.filter(u=>u.id!==m)},replaceGradeThresholds:async m=>{const u=m.map(d=>({id:F(),...d}));await cs(u),t.value=u},getGradeThreshold:m=>t.value.find(u=>u.id===m),setGradeThresholds:m=>{t.value=m}}});async function ms(){await P.settings.get("global")||await P.settings.add({id:"global",editWithDialog:!1})}async function Me(){return P.settings.get("global")}async function ps(t){return P.settings.update("global",t)}const he=le("settings",()=>{const t=w();return{settings:j(()=>t.value),updateSettings:async s=>{t.value&&(await ps(s),Object.assign(t.value,s))},setSettings:s=>{t.value=s}}});async function $e(){return P.students.toArray()}async function fs(t){return P.students.add(t)}async function gs(t,e){return P.students.update(t,e)}async function vs(t){await P.transaction("rw",P.students,P.grades,async()=>{await P.grades.where("studentId").equals(t).delete(),await P.students.delete(t)})}const O=le("students",()=>{const t=W(),e=w([]);return{students:j(()=>e.value),addStudent:async m=>{const u={id:F(),...m};await fs(u),e.value.push(u)},updateStudent:async(m,u)=>{await gs(m,u);const d=e.value.findIndex(l=>l.id===m);d!==-1&&(e.value[d]={...e.value[d],...u})},deleteStudent:async m=>{await vs(m),e.value=e.value.filter(u=>u.id!==m),t.setGrades(t.grades.filter(u=>u.studentId!==m))},getStudent:m=>e.value.find(u=>u.id===m),setStudents:m=>{e.value=m}}});async function ke(){return P.tests.toArray()}async function bs(t){return P.tests.add(t)}async function hs(t,e){return P.tests.update(t,e)}async function _s(t){await P.transaction("rw",P.tests,P.grades,async()=>{await P.grades.where("testId").equals(t).delete(),await P.tests.delete(t)})}const L=le("tests",()=>{const t=W(),e=w([]);return{tests:j(()=>e.value),addTest:async m=>{const u={id:F(),...m};await bs(u),e.value.push(u)},updateTest:async(m,u)=>{await hs(m,u);const d=e.value.findIndex(l=>l.id===m);d!==-1&&(e.value[d]={...e.value[d],...u})},deleteTest:async m=>{await _s(m),e.value=e.value.filter(u=>u.id!==m),t.setGrades(t.grades.filter(u=>u.testId!==m))},getTest:m=>e.value.find(u=>u.id===m),setTests:m=>{e.value=m}}});async function ys(){await P.transaction("rw",P.students,P.tests,P.grades,async()=>{await P.students.clear(),await P.tests.clear(),await P.grades.clear();const t=[{id:F(),name:"Jan",surname:"Kowalski",gender:"Male"},{id:F(),name:"John",surname:"Smith",gender:"Male"},{id:F(),name:"William",surname:"Brown",gender:"Male"},{id:F(),name:"Daniel",surname:"Novak",gender:"Male"},{id:F(),name:"Katarzyna",surname:"Wiśniewska",gender:"Female"},{id:F(),name:"Emily",surname:"Johnson",gender:"Female"},{id:F(),name:"Sofia",surname:"Rossi",gender:"Female"},{id:F(),name:"Maria",surname:"Silva",gender:"Female"}],e=[{id:F(),name:"Math - Algebra",maxPoints:20,weight:3,requiredPoints:10,isMandatory:!0},{id:F(),name:"English - Grammar",maxPoints:15,weight:3,requiredPoints:8,isMandatory:!0},{id:F(),name:"History - Ancient Rome",maxPoints:25,weight:2,requiredPoints:null,isMandatory:!0},{id:F(),name:"Science - Physics Basics",maxPoints:30,weight:2,requiredPoints:15,isMandatory:!0},{id:F(),name:"Geography - Europe",maxPoints:20,weight:2,requiredPoints:12,isMandatory:!0},{id:F(),name:"Biology - Human Body",maxPoints:25,weight:2,requiredPoints:14,isMandatory:!0},{id:F(),name:"Computer Science - Basics",maxPoints:40,weight:2,requiredPoints:20,isMandatory:!1},{id:F(),name:"Art - Painting",maxPoints:50,weight:1,requiredPoints:null,isMandatory:!1},{id:F(),name:"Music - Jazz",maxPoints:50,weight:1,requiredPoints:20,isMandatory:!1},{id:F(),name:"Chemistry - Chemical Reactions",maxPoints:50,weight:3,requiredPoints:20,isMandatory:!1}],o=[{studentId:t[0].id,testId:e[0].id,points:20},{studentId:t[0].id,testId:e[1].id,points:14},{studentId:t[0].id,testId:e[2].id,points:23},{studentId:t[0].id,testId:e[3].id,points:27},{studentId:t[0].id,testId:e[4].id,points:19},{studentId:t[0].id,testId:e[5].id,points:18},{studentId:t[0].id,testId:e[6].id,points:37},{studentId:t[0].id,testId:e[7].id,points:46},{studentId:t[0].id,testId:e[9].id,points:47},{studentId:t[1].id,testId:e[0].id,points:16},{studentId:t[1].id,testId:e[1].id,points:7},{studentId:t[1].id,testId:e[2].id,points:21},{studentId:t[1].id,testId:e[3].id,points:20},{studentId:t[1].id,testId:e[5].id,points:17},{studentId:t[1].id,testId:e[6].id,points:25},{studentId:t[1].id,testId:e[8].id,points:30},{studentId:t[2].id,testId:e[0].id,points:18},{studentId:t[2].id,testId:e[1].id,points:12},{studentId:t[2].id,testId:e[2].id,points:24},{studentId:t[2].id,testId:e[3].id,points:25},{studentId:t[2].id,testId:e[4].id,points:15},{studentId:t[2].id,testId:e[5].id,points:23},{studentId:t[2].id,testId:e[6].id,points:38},{studentId:t[2].id,testId:e[7].id,points:40},{studentId:t[2].id,testId:e[8].id,points:48},{studentId:t[2].id,testId:e[9].id,points:19},{studentId:t[3].id,testId:e[0].id,points:17},{studentId:t[3].id,testId:e[1].id,points:6},{studentId:t[3].id,testId:e[2].id,points:19},{studentId:t[3].id,testId:e[3].id,points:27},{studentId:t[3].id,testId:e[5].id,points:10},{studentId:t[3].id,testId:e[7].id,points:25},{studentId:t[4].id,testId:e[0].id,points:20},{studentId:t[4].id,testId:e[1].id,points:15},{studentId:t[4].id,testId:e[2].id,points:23},{studentId:t[4].id,testId:e[3].id,points:29},{studentId:t[4].id,testId:e[4].id,points:18},{studentId:t[4].id,testId:e[5].id,points:24},{studentId:t[4].id,testId:e[6].id,points:39},{studentId:t[4].id,testId:e[9].id,points:45},{studentId:t[5].id,testId:e[0].id,points:5},{studentId:t[5].id,testId:e[1].id,points:8},{studentId:t[5].id,testId:e[2].id,points:18},{studentId:t[5].id,testId:e[3].id,points:12},{studentId:t[5].id,testId:e[4].id,points:9},{studentId:t[5].id,testId:e[8].id,points:45},{studentId:t[5].id,testId:e[9].id,points:30},{studentId:t[6].id,testId:e[0].id,points:11},{studentId:t[6].id,testId:e[1].id,points:13},{studentId:t[6].id,testId:e[2].id,points:14},{studentId:t[6].id,testId:e[3].id,points:25},{studentId:t[6].id,testId:e[5].id,points:19},{studentId:t[6].id,testId:e[6].id,points:36},{studentId:t[7].id,testId:e[0].id,points:15},{studentId:t[7].id,testId:e[1].id,points:6},{studentId:t[7].id,testId:e[2].id,points:10},{studentId:t[7].id,testId:e[3].id,points:21},{studentId:t[7].id,testId:e[4].id,points:11},{studentId:t[7].id,testId:e[5].id,points:24},{studentId:t[7].id,testId:e[6].id,points:10},{studentId:t[7].id,testId:e[7].id,points:47},{studentId:t[7].id,testId:e[8].id,points:40},{studentId:t[7].id,testId:e[9].id,points:42}];await P.students.bulkAdd(t),await P.tests.bulkAdd(e),await P.grades.bulkAdd(o)})}async function xs(){return await Je(P,{prettyJson:!0})}async function ws(t){const e=new Blob([t],{type:"application/json"});await P.transaction("rw",P.tables,async()=>{for(const o of P.tables)await o.clear()}),await He(P,e)}const re=le("register",()=>{const t=w(!1),e=j(()=>t.value),o=W(),n=oe(),s=he(),a=O(),i=L(),f=async()=>{t.value||(t.value=!0,await ms(),await ls(),n.setGradeThresholds(await Ce()),s.setSettings(await Me()??{id:"global",editWithDialog:!0}),a.setStudents(await $e()),i.setTests(await ke()),o.setGrades(await we()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},m=async()=>{e.value||(t.value=!0,await ys(),n.setGradeThresholds(await Ce()),s.setSettings(await Me()??{id:"global",editWithDialog:!0}),a.setStudents(await $e()),i.setTests(await ke()),o.setGrades(await we()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},u=async()=>{const v=await xs();Ke.saveAs(v,"register-class-data.json")},d=async v=>{await ws(v),await f()},l=j(()=>i.tests.map(v=>({field:v.id,header:v.name}))),p=j(()=>a.students.map(v=>{const h={studentId:v.id,fullName:`${v.name} ${v.surname}`};for(const x of i.tests){const _=o.grades.find(I=>I.studentId===v.id&&I.testId===x.id);h[x.id]=_?_.points:-1}return h}));return{isLoading:e,testColumns:l,studentGrades:p,loadData:f,loadDemoData:m,exportToJson:u,importFromJson:d}}),Is=D({__name:"App",setup(t){const e=re();return E(()=>{console.log("Loading Data"),e.loadData()}),(o,n)=>{const s=b("router-view");return y(),S(s)}}}),Ss={key:0,class:"pl-6"},Ps=D({__name:"SideBarItem",props:{label:{},icon:{},route:{},items:{},active:{type:Boolean}},setup(t){const e=t;return(o,n)=>{const s=b("router-link"),a=b("SideBarItem",!0);return y(),B("li",null,[r(s,{to:o.route},{default:g(()=>[c("div",{class:de(["px-4 py-1 rounded-md hover:bg-sidebaritem-hover-background transition duration-75 space-x-2",{"bg-sidebaritem-active-background":o.active}])},[c("i",{class:de(o.icon)},null,2),c("span",null,M(o.label),1)],2)]),_:1},8,["to"]),e.items?.length?(y(),B("ul",Ss,[(y(!0),B(J,null,ue(e.items,i=>(y(),S(a,qe({key:i.route},{ref_for:!0},i,{active:o.$route.path===i.route}),null,16,["active"]))),128))])):N("",!0)])}}}),Ds={class:"font-semibold uppercase text-sm"},Ts=D({__name:"SideBar",props:{visible:{type:Boolean},isLargeScreen:{type:Boolean}},setup(t){const e=O(),o=L(),n=Qe(),s=j(()=>{const a=n.params.studentId,i=n.params.testId,f=a?e.getStudent(a):null,m=i?o.getTest(i):null;return[{label:"Home",items:[{label:"Dashboard",icon:"pi pi-home",route:"/"}]},{label:"Register",items:[{label:"Grades",icon:"pi pi-objects-column",route:"/grades"},{label:"Tests",icon:"pi pi-book",route:"/tests",items:[...m?[{label:m?`${m.name}`:"test",icon:"pi pi-clipboard",route:`/tests/test/${i}`}]:[]]},{label:"Students",icon:"pi pi-users",route:"/students",items:[...f?[{label:f?`${f.name} ${f.surname}`:"student",icon:"pi pi-user",route:`/students/student/${a}`}]:[]]},{label:"Settings",icon:"pi pi-cog",route:"/settings"}]}]});return(a,i)=>(y(),B("nav",{class:de(["fixed w-64 flex flex-col overflow-auto transition-all duration-500 ease-in-out z-30",{"card m-4 h-[calc(100vh-6rem)] top-16":a.isLargeScreen,"bg-white h-full top-0 p-4":!a.isLargeScreen,"left-[-18rem]":!a.visible,"left-0":a.visible}])},[(y(!0),B(J,null,ue(s.value,f=>(y(),B("div",{key:f.label,class:"space-y-1"},[c("h3",Ds,M(f.label),1),c("ul",null,[(y(!0),B(J,null,ue(f.items,m=>(y(),S(Ps,qe({key:m.route},{ref_for:!0},m,{active:a.$route.path===m.route,onClick:i[0]||(i[0]=u=>a.$emit("select"))}),null,16,["active"]))),128))])]))),128))],2))}}),te=(t,e)=>{const o=t.__vccOpts||t;for(const[n,s]of e)o[n]=s;return o},Cs={},Ms={class:"fixed w-full h-16 flex items-center border-b-2 border-primary-border p-4 pl-6 shadow-md bg-topbar-background z-10 gap-4"};function $s(t,e){const o=b("Button");return y(),B("header",Ms,[r(o,{icon:"pi pi-bars",severity:"secondary",variant:"text",rounded:"","aria-label":"Bookmark",onClick:e[0]||(e[0]=n=>t.$emit("toggle-sidebar"))}),e[1]||(e[1]=c("h3",null,"Class Register",-1))])}const ks=te(Cs,[["render",$s]]),Gs={class:"min-h-full"},qs={key:0,class:"fixed top-0 left-0 w-full h-full bg-black/40 z-[9999] flex items-center justify-center"},Fs=D({__name:"DefaultLayout",setup(t){const e=re(),o=w(!0),n=w(window.innerWidth>=1280),s=()=>{const i=n.value;n.value=window.innerWidth>=1280,!i&&n.value&&(o.value=!0),i&&!n.value&&(o.value=!1)};window.addEventListener("resize",s),E(()=>{n.value&&(o.value=!0),n.value||(o.value=!1)});const a=()=>{o.value=!o.value};return(i,f)=>{const m=b("ProgressSpinner"),u=b("router-view"),d=b("ConfirmDialog"),l=b("Toast");return y(),B(J,null,[c("div",Gs,[r(Ye,null,{default:g(()=>[o.value&&!n.value?(y(),B("div",{key:0,class:"fixed inset-0 bg-black/50 z-20",onClick:a})):N("",!0)]),_:1}),r(ks,{onToggleSidebar:a}),r(Ts,{visible:o.value,isLargeScreen:n.value,onSelect:f[0]||(f[0]=p=>n.value?null:a())},null,8,["visible","isLargeScreen"]),ae(e).isLoading?(y(),B("div",qs,[r(m,{style:{width:"200px",height:"200px"},strokeWidth:"4",animationDuration:".8s"})])):(y(),B("div",{key:1,class:de(["pt-16 transition-all duration-500 ease-in-out",{"ml-0":!o.value,"ml-72":o.value&&n.value}])},[r(u)],2))]),r(d,{draggable:!1}),r(l)],64)}}}),As=te(Fs,[["__scopeId","data-v-4519c803"]]),Bs={},Ns={class:"card"},Rs={class:"mb-2"};function Vs(t,e){return y(),B("div",Ns,[c("div",Rs,[ye(t.$slots,"header")]),ye(t.$slots,"body")])}const A=te(Bs,[["render",Vs]]),Ws={class:"relative w-full h-[90%]"},Ls=D({__name:"ClassPassRate",setup(t){const e=O(),o=L(),n=W(),s=w(),a=w(),i=()=>{let u=0,d=0,l=0,p=0;o.tests.forEach(v=>{e.students.forEach(h=>{const x=n.getGrade(h.id,v.id);x?!v.requiredPoints||x.points>=v.requiredPoints?u++:d++:v.isMandatory?l++:p++})}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[u,d,l,p],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},f=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return E(()=>{i(),f()}),(u,d)=>{const l=b("Chart");return y(),S(A,null,{header:g(()=>d[0]||(d[0]=[c("h3",null,"Class pass rate",-1)])),body:g(()=>[c("div",Ws,[r(l,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[390px]"},null,8,["data","options"])])]),_:1})}}}),Es={class:"flex flex-col justify-center items-center w-fit"},U=D({__name:"PerformanceCard",props:{title:{},value:{},max:{}},setup(t){const e=t;return(o,n)=>{const s=b("Knob");return y(),B("div",Es,[c("h4",null,M(o.title),1),r(s,{modelValue:e.value,size:200,max:o.max,readonly:""},null,8,["modelValue","max"])])}}}),Os={class:"flex justify-evenly flex-wrap gap-4 mt-2"},zs=D({__name:"ClassPerformance",props:{classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:g(()=>n[0]||(n[0]=[c("h3",null,"Class performance",-1)])),body:g(()=>[c("div",Os,[r(U,{title:"Weighted Average",value:e.classPerformance.weightedAverage},null,8,["value"]),r(U,{title:"Median",value:e.classPerformance.median},null,8,["value"]),r(U,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:50},null,8,["value"]),r(U,{title:"Max",value:e.classPerformance.max},null,8,["value"]),r(U,{title:"Min",value:e.classPerformance.min},null,8,["value"])])]),_:1}))}}),Us={class:"relative w-full h-[90%]"},js=D({__name:"FinalGradeStats",setup(t){const e=O(),o=L(),n=W(),s=oe(),a=w(),i=w(),f=()=>{const d=e.students,l=o.tests,p=n.grades,v=s.gradeThresholds.slice().sort((_,I)=>_.minPercentage-I.minPercentage),h={},x={};v.forEach(_=>{h[_.name]=0,x[_.name]=0});for(const _ of d){const I=Be(p,l,_.id),T=v.slice().sort((G,V)=>V.minPercentage-G.minPercentage).find(G=>I>=G.minPercentage);T&&(_.gender==="Male"?h[T.name]++:_.gender==="Female"&&x[T.name]++)}a.value={labels:v.map(_=>_.name),datasets:[{label:"Male",data:v.map(_=>h[_.name]),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:v.map(_=>x[_.name]),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}},m=()=>{i.value={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Students number"},ticks:{stepSize:1,callback:function(d){return Number(d)%1===0?d:null}}},x:{title:{display:!0,text:"Grade"}}}}},u=()=>{f(),m()};return E(()=>{u()}),(d,l)=>{const p=b("Chart");return y(),S(A,null,{header:g(()=>l[0]||(l[0]=[c("h3",null,"Final grade stats",-1)])),body:g(()=>[c("div",Us,[r(p,{type:"bar",data:a.value,options:i.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),Js={class:"relative w-full h-[90%]"},Hs=D({__name:"MandatoryTestsCount",setup(t){const e=L(),o=w(),n=w(),s=()=>{let f=0,m=0;e.tests.forEach(u=>{u.isMandatory?f++:m++}),o.value={labels:["Mandatory","Optional"],datasets:[{data:[f,m],backgroundColor:["rgba(101, 219, 144, 0.6)","rgba(6, 182, 212, 0.6)"],borderColor:["rgb(101, 219, 144)","rgb(6, 182, 212)"],borderWidth:1}]}},a=()=>{n.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}};return E(()=>{s(),a()}),(f,m)=>{const u=b("Chart");return y(),S(A,null,{header:g(()=>m[0]||(m[0]=[c("h3",null,"Mandatory Tests Count",-1)])),body:g(()=>[c("div",Js,[r(u,{type:"bar",data:o.value,options:n.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),Ks={class:"relative w-full h-[90%]"},Qs=D({__name:"TestGenderComparison",setup(t){const e=O(),o=L(),n=W(),s=w(),a=w(),i=()=>{const u=o.tests,d=e.students,l=n.grades,p=[],v=[],h=[],x=[];u.forEach(_=>{p.push(k(Ie(l,d,_,"Male"))),v.push(k(Ie(l,d,_,"Female"))),h.push(k(ce(l,d,_.id,"Male"))),x.push(k(ce(l,d,_.id,"Female")))}),s.value={labels:u.map(_=>_.name),datasets:[{label:"Male",data:p,rawData:h,borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.3)"},{label:"Female",data:v,rawData:x,borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.3)"}]}},f=()=>{a.value={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,min:0,max:100}},plugins:{tooltip:{callbacks:{label:u=>{const d=u.dataset,l=u.formattedValue,p=d.rawData[u.dataIndex];return`${d.label}: ${p} (${l}%)`}}}}}};return E(()=>{i(),f()}),(u,d)=>{const l=b("Chart");return y(),S(A,null,{header:g(()=>d[0]||(d[0]=[c("h3",null,"Test comparision",-1)])),body:g(()=>[c("div",Ks,[r(l,{type:"radar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),Ys={class:"cards-section"},Zs={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},Xs=D({__name:"DashboardView",setup(t){O();const e=L(),o=W(),n=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),s=()=>{const a=e.tests,i=o.grades;n.value={weightedAverage:k(Ne(i,a)),median:k(Re(i,a)),standardDeviation:k(Ve(i,a)),min:k(We(i,a)),max:k(Le(i,a))}};return E(()=>{s()}),(a,i)=>(y(),B(J,null,[i[0]||(i[0]=c("h2",{class:"title-section"},"Dashboard",-1)),c("div",Ys,[c("div",Zs,[r(js,{class:"sm:col-span-2 lg:col-span-2"}),r(Ls,{class:"sm:col-span-1 lg:col-span-1"}),r(Hs,{class:"sm:col-span-1 lg:col-span-1"}),r(zs,{"class-performance":n.value,class:"sm:col-span-2 lg:col-span-2"},null,8,["class-performance"]),r(Qs,{class:"sm:col-span-2 lg:col-span-2"})])])],64))}}),ea={class:"flex flex-col gap-1"},ta={class:"flex justify-end gap-2 mt-4"},sa=D({__name:"EditGradeDialog",props:ie({studentId:{},testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=L(),o=W(),n=Z(t,"visible"),s=t,a=Q({name:"",maxPoints:0}),i=Q({score:null}),f=async l=>{if(l){const p=e.getTest(s.testId);p&&Object.assign(a,{name:p.name,maxPoints:p.maxPoints});const h=o.getGrade(s.studentId,s.testId)?.points??null;i.score=h,await me(),i.score=null}};X(()=>n.value,l=>{f(l)});const m=()=>{n.value=!1},u=j(()=>ee($.object({score:$.number("Score is required").min(0,"Score cannot be less than 0").max(a.maxPoints,`Score cannot be greater than ${a.maxPoints}`).nullable()}))),d=l=>{if(l.valid){const p=l.states.score?.value;if(typeof p=="number"||p===null){const v={studentId:s.studentId,testId:s.testId,points:p};p!==void 0?o.updateGrade(v):o.deleteGrade(s.studentId,s.testId),m()}else console.error("Wrong data from form!")}};return(l,p)=>{const v=b("InputNumber"),h=b("FloatLabel"),x=b("Message"),_=b("Button"),I=b("Form"),T=b("Dialog");return y(),S(T,{header:"Edit Grade",visible:n.value,"onUpdate:visible":p[0]||(p[0]=G=>n.value=G),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[r(I,{"initial-values":i,resolver:u.value,onSubmit:d,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(G=>[c("h5",null,"Number must be between 0 and "+M(a.maxPoints),1),c("div",ea,[r(h,{variant:"on"},{default:g(()=>[r(v,{id:"score",name:"score",class:"w-full",variant:"filled",min:0,max:a.maxPoints,maxFractionDigits:1,step:.1,allowEmpty:!0},null,8,["max"]),p[1]||(p[1]=c("label",{for:"score"},"Score",-1))]),_:1,__:[1]}),G.score?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(G.score.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",ta,[r(_,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),r(_,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initial-values","resolver"])]),_:1},8,["visible"])}}}),aa={class:"flex flex-wrap gap-2 items-center justify-between"},na={class:"w-full cursor-pointer px-3 py-4"},oa=["onClick"],ia=D({__name:"GradesDatatable",setup(t){const e=re(),o=L(),n=he(),s=W(),a=w(),i=w(!1),f=w({}),m=()=>{f.value.fullName={operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]};for(const x of e.testColumns)f.value[x.field]||(f.value[x.field]={operator:ne.AND,constraints:[{value:null,matchMode:Y.EQUALS}]})};m(),E(()=>{a.value=n.settings?.editWithDialog}),X(()=>e.testColumns,x=>{const _=x.map(I=>I.field);for(const I of x)f.value[I.field]||(f.value[I.field]={operator:ne.AND,constraints:[{value:null,matchMode:Y.EQUALS}]});for(const I in f.value)I!=="fullName"&&!_.includes(I)&&delete f.value[I]},{immediate:!0});const u=()=>{m()},d=Q({studentId:"",testId:""}),l=(x,_)=>{a.value&&(d.studentId=x,d.testId=_,i.value=!0)},p=x=>{const{data:_,newValue:I,field:T}=x,G={studentId:_.studentId,testId:T,points:I},V=o.getTest(G.testId);if(V)if(I!=null){if(!v(G.points,V.maxPoints))return;s.updateGrade(G)}else s.deleteGrade(G.studentId,G.testId)},v=(x,_)=>x>=0&&x<=_,h=x=>{const _=o.getTest(x);return _?`Number must be between 0 and ${_.maxPoints}`:"No test info"};return(x,_)=>{const I=b("Button"),T=b("InputText"),G=b("Column"),V=b("InputNumber"),z=b("DataTable"),fe=Ze("tooltip");return y(),B(J,null,[r(z,{value:ae(e).studentGrades,editMode:"cell",class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:f.value,"onUpdate:filters":_[1]||(_[1]=q=>f.value=q),filterDisplay:"menu",onCellEditComplete:p},{header:g(()=>[c("div",aa,[r(I,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:_[0]||(_[0]=q=>u())})])]),empty:g(()=>_[3]||(_[3]=[c("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:g(()=>[r(G,{sortable:"",field:"fullName",header:"Student",filterField:"fullName",frozen:""},{body:g(({data:q})=>[c("div",na,M(q.fullName),1)]),filter:g(({filterModel:q})=>[r(T,{modelValue:q.value,"onUpdate:modelValue":H=>q.value=H,type:"text",placeholder:"Search by FullName"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),(y(!0),B(J,null,ue(ae(e).testColumns,q=>(y(),S(G,{sortable:"",key:q.field,field:q.field,header:q.header,filterField:q.field,dataType:"numeric"},Xe({body:g(({data:H})=>[c("div",{class:"w-full min-h-1 cursor-pointer px-3 py-4",onClick:se=>l(H.studentId,q.field)},M(ae(s).getGrade(H.studentId,q.field)?.points??"-"),9,oa)]),filter:g(({filterModel:H})=>[r(V,{modelValue:H.value,"onUpdate:modelValue":se=>H.value=se},null,8,["modelValue","onUpdate:modelValue"])]),_:2},[a.value?void 0:{name:"editor",fn:g(({data:H,field:se})=>[et(r(V,{modelValue:H[se],"onUpdate:modelValue":Ue=>H[se]=Ue,min:0,autofocus:"",fluid:"",allowEmpty:!0,defaultValue:H[se]===-1?null:H[se]},null,8,["modelValue","onUpdate:modelValue","defaultValue"]),[[fe,h(se),void 0,{top:!0}]])]),key:"0"}]),1032,["field","header","filterField"]))),128))]),_:1},8,["value","filters"]),r(sa,{visible:i.value,"onUpdate:visible":_[2]||(_[2]=q=>i.value=q),studentId:d.studentId,testId:d.testId},null,8,["visible","studentId","testId"])],64)}}}),la=te(ia,[["__scopeId","data-v-2c645f2e"]]),ra={class:"cards-section"},da={class:"flex flex-col"},ua={class:"flex justify-center"},ca=D({__name:"GradesView",setup(t){return(e,o)=>(y(),B(J,null,[o[1]||(o[1]=c("h2",{class:"title-section"},"Grades",-1)),c("div",ra,[r(A,null,{header:g(()=>o[0]||(o[0]=[c("h3",null,"List of grades",-1)])),body:g(()=>[c("div",da,[c("div",ua,[r(la)])])]),_:1})])],64))}}),ma={class:"flex flex-wrap gap-2 items-center justify-between"},pa={class:"w-full h-full cursor-pointer px-3 py-4"},fa={class:"w-full h-full cursor-pointer px-3 py-4"},ga=D({__name:"StudentsDatatable",setup(t){const e=O(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:Y.CONTAINS},name:{operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]},surname:{operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]}}};n();const s=()=>{n()},a=i=>{_e.push(`/students/student/${i.data.id}`)};return(i,f)=>{const m=b("Button"),u=b("InputIcon"),d=b("InputText"),l=b("IconField"),p=b("Column"),v=b("DataTable");return y(),S(v,{value:ae(e).students,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":f[2]||(f[2]=h=>o.value=h),filterDisplay:"menu",globalFilterFields:["name","surname"],onRowSelect:a,selectionMode:"single"},{header:g(()=>[c("div",ma,[r(m,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:f[0]||(f[0]=h=>s())}),r(l,null,{default:g(()=>[r(u,null,{default:g(()=>f[3]||(f[3]=[c("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),r(d,{modelValue:o.value.global.value,"onUpdate:modelValue":f[1]||(f[1]=h=>o.value.global.value=h),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:g(()=>f[4]||(f[4]=[c("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:g(()=>[r(p,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:g(({data:h})=>[c("div",pa,M(h.name),1)]),filter:g(({filterModel:h})=>[r(d,{modelValue:h.value,"onUpdate:modelValue":x=>h.value=x,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(p,{sortable:"",field:"surname",header:"Surname",filterField:"surname"},{body:g(({data:h})=>[c("div",fa,M(h.surname),1)]),filter:g(({filterModel:h})=>[r(d,{modelValue:h.value,"onUpdate:modelValue":x=>h.value=x,type:"text",placeholder:"Search by Surname"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])}}}),va=te(ga,[["__scopeId","data-v-dcf1d4ea"]]);function Ee(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.maxPoints=="number"&&typeof t.weight=="number"&&(typeof t.requiredPoints=="number"||t.requiredPoints===null)}function Oe(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.surname=="string"}function ze(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.minPercentage=="number"}const ba={class:"flex flex-col gap-1"},ha={class:"flex flex-col gap-1"},_a={class:"flex flex-col gap-1"},ya={class:"flex justify-end gap-2 mt-4"},xa=D({__name:"NewStudentDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=O(),o=K(),n=Z(t,"visible"),s=w(["Male","Female"]),a=Q({name:"",surname:"",gender:"Male"}),i=w(ee($.object({name:$.string("Name is required").min(1,"Name is required"),surname:$.string("Surname is required").min(1,"Surname is required"),gender:$.enum(["Male","Female"],"Gender is required")}))),f=()=>{n.value=!1},m=u=>{if(u.valid){const d={name:u.states.name.value,surname:u.states.surname.value,gender:u.states.gender.value};Oe(d)?(e.addStudent(d),o.add({severity:"success",summary:"Success",detail:"Successfully added student.",life:3e3}),f()):console.error("Wrong data from form!")}};return(u,d)=>{const l=b("InputText"),p=b("FloatLabel"),v=b("Message"),h=b("SelectButton"),x=b("Button"),_=b("Form"),I=b("Dialog");return y(),S(I,{header:"Add Student",visible:n.value,"onUpdate:visible":d[0]||(d[0]=T=>n.value=T),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[r(_,{resolver:i.value,onSubmit:m,"initial-values":a,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(T=>[c("div",ba,[r(p,{variant:"on"},{default:g(()=>[r(l,{id:"name",name:"name",variant:"filled",class:"w-60"}),d[1]||(d[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),T.name?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(T.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",ha,[r(p,{variant:"on"},{default:g(()=>[r(l,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),d[2]||(d[2]=c("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),T.surname?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(T.surname.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",_a,[r(h,{name:"gender",options:s.value,allowEmpty:!1},null,8,["options"]),T.gender?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(T.gender.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",ya,[r(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:f}),r(x,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),wa={class:"cards-section"},Ia={class:"mt-2 mb-4"},Sa=D({__name:"StudentsListView",setup(t){const e=w(!1);return(o,n)=>{const s=b("Button");return y(),B(J,null,[n[3]||(n[3]=c("h2",{class:"title-section"},"Students",-1)),c("div",wa,[r(A,null,{header:g(()=>n[2]||(n[2]=[c("h3",null,"List of students",-1)])),body:g(()=>[c("div",Ia,[r(s,{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=a=>e.value=!0)})]),r(va)]),_:1})]),r(xa,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=a=>e.value=a)},null,8,["visible"])],64)}}}),Pa={class:"flex flex-col gap-1"},Da={class:"flex flex-col gap-1"},Ta={class:"flex flex-col gap-1"},Ca={class:"flex justify-end gap-2 mt-4"},Ma=D({__name:"EditPersonalDataDialog",props:ie({studentId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=O(),o=K(),n=t,s=Z(t,"visible"),a=w(["Male","Female"]),i=Q({name:"",surname:"",gender:"Male"}),f=w(ee($.object({name:$.string("Name is required").min(1,"Name is required"),surname:$.string("Surname is required").min(1,"Surname is required"),gender:$.enum(["Male","Female"],"Gender is required")}))),m=()=>{s.value=!1},u=l=>{if(l.valid){const p={name:l.states.name.value,surname:l.states.surname.value,gender:l.states.gender.value};Oe(p)?(e.updateStudent(n.studentId,p),o.add({severity:"success",summary:"Success",detail:"Successfully edited student.",life:3e3}),m()):console.error("Wrong data from form!")}},d=l=>{if(l){const p=e.getStudent(n.studentId);p&&Object.assign(i,p)}};return X(s,l=>{d(l)}),(l,p)=>{const v=b("InputText"),h=b("FloatLabel"),x=b("Message"),_=b("SelectButton"),I=b("Button"),T=b("Form"),G=b("Dialog");return y(),S(G,{header:"Edit Student",visible:s.value,"onUpdate:visible":p[0]||(p[0]=V=>s.value=V),modal:""},{default:g(()=>[r(T,{resolver:f.value,onSubmit:u,"initial-values":i,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(V=>[c("div",Pa,[r(h,{variant:"on"},{default:g(()=>[r(v,{id:"name",name:"name",variant:"filled",class:"w-60"}),p[1]||(p[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),V.name?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(V.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Da,[r(h,{variant:"on"},{default:g(()=>[r(v,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),p[2]||(p[2]=c("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),V.surname?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(V.surname.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Ta,[r(_,{name:"gender",options:a.value,allowEmpty:!1},null,8,["options"]),V.gender?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(V.gender.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Ca,[r(I,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),r(I,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),$a={class:"flex flex-wrap justify-evenly pb-6"},ka={class:"flex flex-col justify-center items-center gap-1"},Ga={class:"flex flex-col justify-center items-center gap-1"},qa=D({__name:"ActionsStudent",props:{studentId:{}},setup(t){const e=O(),o=pe(),n=K(),s=Fe(),a=t,i=w(!1),f=()=>{o.require({message:"Are you sure you want to proceed? The student will be deleted.",header:"Delete student",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteStudent(a.studentId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted student",life:3e3}),s.push("/students")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete student",life:3e3})}}})};return(m,u)=>{const d=b("Button");return y(),S(A,null,{header:g(()=>u[3]||(u[3]=[c("h3",null,"Actions",-1)])),body:g(()=>[c("div",$a,[c("div",ka,[u[4]||(u[4]=c("h4",null,"Edit student data",-1)),r(d,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:u[0]||(u[0]=l=>i.value=!0)})]),c("div",Ga,[u[5]||(u[5]=c("h4",null,"Delete student",-1)),r(d,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:u[1]||(u[1]=l=>f())})])]),r(Ma,{studentId:m.studentId,visible:i.value,"onUpdate:visible":u[2]||(u[2]=l=>i.value=l)},null,8,["studentId","visible"])]),_:1})}}}),Fa={class:"relative w-full h-[90%]"},Aa=D({__name:"ComparisionClass",props:{individualData:{},classData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Individual",data:[e.individualData.weightedAverage,e.individualData.median,e.individualData.standardDeviation,e.individualData.min,e.individualData.max],backgroundColor:"rgba(101, 219, 144, 0.6)",borderColor:"rgb(101, 219, 144)",borderWidth:1},{label:"Class",data:[e.classData.weightedAverage,e.classData.median,e.classData.standardDeviation,e.classData.min,e.classData.max],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0,max:100}}});return E(()=>{o.value=s(),n.value=a()}),(f,m)=>{const u=b("Chart");return y(),S(A,null,{header:g(()=>m[0]||(m[0]=[c("h3",null,"Class Comparison",-1)])),body:g(()=>[c("div",Fa,[r(u,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}});function Ge(t,e,o,n){const a=t.filter(d=>d.studentId===n).map(d=>{const l=e.find(p=>p.id===d.testId);if(!l)throw new Error(`Test ${d.testId} not found`);return{...l,points:d.points}}),i=a.reduce((d,l)=>d+l.weight,0),m=a.reduce((d,l)=>d+l.points/l.maxPoints*100*l.weight,0)/i,u=o.filter(d=>m>=d.minPercentage).sort((d,l)=>l.minPercentage-d.minPercentage)[0];return u?u.name:"—"}const Ba={class:"flex-1 flex justify-center items-center"},Na={class:"text-[clamp(1rem,5vw,4rem)] leading-none"},Ra={class:"mt-auto"},Va=D({__name:"FinalGradeResult",props:{studentId:{}},setup(t){const e=O(),o=L(),n=W(),s=oe(),a=t,i=w(Ge(n.grades,o.tests,s.gradeThresholds,a.studentId)),f=j(()=>{const m=e.students,u=m.length||1,l=100-m.filter(h=>Ge(n.grades,o.tests,s.gradeThresholds,h.id)>i.value).length/u*100,p=Math.round(l),v=100-p;return[{label:"Lower or equal",color:"#60a5fa",value:p},{label:"Higher",color:"#fbbf24",value:v}]});return(m,u)=>{const d=b("MeterGroup");return y(),S(A,{class:"flex flex-col"},{header:g(()=>u[0]||(u[0]=[c("h3",null,"Final Grade",-1)])),body:g(()=>[c("div",Ba,[c("h4",Na,M(i.value),1)]),c("div",Ra,[u[1]||(u[1]=c("p",{class:"text-center my-2"},"Compared to other students' grades",-1)),r(d,{value:f.value},null,8,["value"])])]),_:1})}}}),Wa=D({__name:"PersonalData",props:{name:{},surname:{},gender:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:g(()=>n[0]||(n[0]=[c("h3",null,"Personal Data",-1)])),body:g(()=>[c("h4",null,"Name: "+M(e.name),1),c("h4",null,"Surname: "+M(e.surname),1),c("h4",null,"Gender: "+M(e.gender),1)]),_:1}))}}),La={class:"flex-1 min-w-64 h-fit"},Ea={class:"relative w-full h-[400px]"},ve=4,Oa=D({__name:"StudentResults",props:{studentId:{}},setup(t){const e=L(),o=W(),n=t,s=w(),a=w(),i=w(0),f=w(0),m=()=>{const p=o.grades.filter(_=>_.studentId===n.studentId).map(_=>{const I=e.tests.find(G=>G.id===_.testId),T=I?.maxPoints??100;return{testName:I?.name??"Unknown Test",score:_.points,maxScore:T,percentage:_.points/T*100}});f.value=p.length;const v=i.value*ve,h=v+ve,x=p.slice(v,h);s.value={labels:x.map(_=>_.testName),datasets:[{label:"Score",data:x.map(_=>_.percentage),originalScores:x.map(_=>_.score),maxScores:x.map(_=>_.maxScore),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},u=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:p=>{const v=p.dataset,h=p.dataIndex;return`${v.originalScores[h]} / ${v.maxScores[h]} points (${p.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},d=()=>{m(),u()};E(()=>{d()});const l=p=>{i.value=p.page,m()};return(p,v)=>{const h=b("Chart"),x=b("Paginator");return y(),S(A,null,{header:g(()=>v[0]||(v[0]=[c("h3",null,"Results",-1)])),body:g(()=>[c("div",La,[c("div",Ea,[r(h,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),r(x,{rows:ve,totalRecords:f.value,page:i.value,onPage:l},null,8,["totalRecords","page"])])]),_:1})}}}),za=D({__name:"StudentResultsDatatable",props:{studentId:{}},setup(t){const e=L(),o=W(),n=t,s=j(()=>o.grades.filter(i=>i.studentId===n.studentId).map(i=>{const f=e.tests.find(p=>p.id===i.testId);if(!f)return null;const m=f.maxPoints,u=f.requiredPoints??0,d=k(i.points/m*100),l=i.points>=u;return{testName:f?.name??"Unknown Test",points:i.points,percentage:d,maxPoints:m,status:l}})),a=i=>i?"success":"warn";return(i,f)=>{const m=b("Column"),u=b("Tag"),d=b("DataTable");return y(),S(A,null,{header:g(()=>f[0]||(f[0]=[c("h3",null,"Results - details",-1)])),body:g(()=>[r(d,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:g(()=>[r(m,{field:"testName",header:"Test"}),r(m,{field:"points",header:"Score"}),r(m,{field:"percentage",header:"Normalized Score (%)"}),r(m,{field:"maxPoints",header:"Max Points"}),r(m,{field:"status",header:"Status"},{body:g(({data:l})=>[r(u,{value:l.status?"passed":"failed",severity:a(l.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),Ua=te(za,[["__scopeId","data-v-f81559d1"]]),ja={class:"relative w-full h-[90%]"},Ja=D({__name:"StudentPassRate",props:{studentId:{}},setup(t){const e=L(),o=W(),n=t,s=w(),a=w(),i=()=>{let u=0,d=0,l=0,p=0;e.tests.forEach(v=>{const h=o.getGrade(n.studentId,v.id);h?!v.requiredPoints||h.points>=v.requiredPoints?u++:d++:v.isMandatory?l++:p++}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[u,d,l,p],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},f=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return E(()=>{i(),f()}),(u,d)=>{const l=b("Chart");return y(),S(A,null,{header:g(()=>d[0]||(d[0]=[c("h3",null,"Pass rate",-1)])),body:g(()=>[c("div",ja,[r(l,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),Ha={class:"flex justify-evenly flex-wrap gap-4 mt-2"},Ka=D({__name:"StudentPerformance",props:{individualPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:g(()=>n[0]||(n[0]=[c("h3",null,"Performance",-1)])),body:g(()=>[c("div",Ha,[r(U,{title:"Weighted Average",value:e.individualPerformance.weightedAverage},null,8,["value"]),r(U,{title:"Median",value:e.individualPerformance.median},null,8,["value"]),r(U,{title:"Standard Deviation",value:e.individualPerformance.standardDeviation,max:50},null,8,["value"]),r(U,{title:"Max",value:e.individualPerformance.max},null,8,["value"]),r(U,{title:"Min",value:e.individualPerformance.min},null,8,["value"])])]),_:1}))}}),Qa={class:"cards-section"},Ya={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},Za=D({__name:"StudentDetailsView",props:{studentId:{}},setup(t){const e=O(),o=L(),n=W(),s=t,a=w(),i=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),f=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=()=>{const u=e.getStudent(s.studentId);if(!u)return;const d=n.grades;a.value=u;const l=o.tests.filter(p=>n.grades.some(v=>v.studentId===s.studentId&&v.testId===p.id));i.value={weightedAverage:k(Be(d,l,s.studentId)),median:k(as(d,l,s.studentId)),standardDeviation:k(ns(d,l,s.studentId)),min:k(os(d,s.studentId,l)),max:k(is(d,s.studentId,l))},f.value={weightedAverage:k(Ne(d,l)),median:k(Re(d,l)),standardDeviation:k(Ve(d,l)),min:k(We(d,l)),max:k(Le(d,l))}};return E(()=>{m()}),X(()=>e.students,()=>{const u=e.getStudent(s.studentId);u&&(a.value=u)},{deep:!0}),(u,d)=>(y(),B(J,null,[d[0]||(d[0]=c("h2",{class:"title-section"},"Student Details",-1)),c("div",Qa,[a.value?(y(),B("div",Ya,[r(Wa,{name:a.value.name,surname:a.value.surname,gender:a.value.gender,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","surname","gender"]),r(qa,{"student-id":u.studentId,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["student-id"]),r(Va,{"student-id":u.studentId,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["student-id"]),r(Ja,{"student-id":a.value.id,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["student-id"]),r(Ka,{"individual-performance":i.value,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["individual-performance"]),r(Aa,{"individual-data":i.value,"class-data":f.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["individual-data","class-data"]),r(Oa,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["student-id"]),r(Ua,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["student-id"])])):N("",!0)])],64))}}),Xa={class:"flex flex-col gap-1"},en={class:"flex flex-col gap-1"},tn={class:"flex flex-col gap-1"},sn={class:"flex items-center gap-2"},an={class:"flex flex-col gap-1"},nn={class:"flex items-center gap-2"},on={class:"flex justify-end gap-2 mt-4"},ln=D({__name:"NewTestDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=L(),o=K(),n=Z(t,"visible"),s=Q({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),a=()=>{n.value=!1},i=async l=>{l&&(s.weight=1,await me(),s.weight=null)};X(()=>n.value,l=>{i(l)});const f={name:$.string().min(1,"Name is required"),maxPoints:$.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:$.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:$.boolean()},m=$.discriminatedUnion("isRequired",[$.object({...f,isRequired:$.literal(!0),requiredPoints:$.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(l=>l.requiredPoints<=l.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),$.object({...f,isRequired:$.literal(!1),requiredPoints:$.number().nullable().optional()})]),u=w(ee(m)),d=l=>{if(l.valid){const p={name:l.states.name.value,maxPoints:l.states.maxPoints.value,weight:l.states.weight.value,requiredPoints:l.states.isRequired.value?l.states.requiredPoints.value:null,isMandatory:l.states.isRequired.value?l.states.isMandatory.value:!1};Ee(p)?(e.addTest(p),o.add({severity:"success",summary:"Success",detail:"Successfully added test.",life:3e3}),a()):console.error("Wrong data from form!")}};return(l,p)=>{const v=b("InputText"),h=b("FloatLabel"),x=b("Message"),_=b("InputNumber"),I=b("Checkbox"),T=b("Button"),G=b("Form"),V=b("Dialog");return y(),S(V,{header:"Add Test",visible:n.value,"onUpdate:visible":p[0]||(p[0]=z=>n.value=z),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[r(G,{initialValues:s,resolver:u.value,onSubmit:d,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(z=>[c("div",Xa,[r(h,{variant:"on"},{default:g(()=>[r(v,{id:"name",name:"name",variant:"filled",class:"w-full"}),p[1]||(p[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),z.name?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(z.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",en,[r(h,{variant:"on"},{default:g(()=>[r(_,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),p[2]||(p[2]=c("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),z.maxPoints?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(z.maxPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",tn,[r(h,{variant:"on"},{default:g(()=>[r(_,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1}),p[3]||(p[3]=c("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),z.weight?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(z.weight.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",sn,[r(I,{id:"isRequired",name:"isRequired",binary:""}),p[4]||(p[4]=c("label",{for:"isRequired"},"Required",-1))]),c("div",an,[r(h,{variant:"on"},{default:g(()=>[r(_,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1,disabled:!z.isRequired?.value},null,8,["disabled"]),p[5]||(p[5]=c("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),z.requiredPoints?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(z.requiredPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",nn,[r(I,{id:"isMandatory",name:"isMandatory",binary:""}),p[6]||(p[6]=c("label",{for:"isMandatory"},"Mandatory",-1))]),c("div",on,[r(T,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),r(T,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),rn={class:"flex flex-wrap gap-2 items-center justify-between"},dn={class:"w-full h-full cursor-pointer px-3 py-4"},un={class:"w-full h-full cursor-pointer px-3 py-4"},cn={class:"w-full h-full cursor-pointer px-3 py-4"},mn=D({__name:"TestsDatatable",setup(t){const e=L(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:Y.CONTAINS},name:{operator:ne.AND,constraints:[{value:null,matchMode:Y.STARTS_WITH}]},weight:{operator:ne.AND,constraints:[{value:null,matchMode:Y.EQUALS}]},isMandatory:{value:null,matchMode:Y.EQUALS}}};n();const s=()=>{n()},a=f=>{_e.push(`/tests/test/${f.data.id}`)},i=f=>f?"success":"info";return(f,m)=>{const u=b("Button"),d=b("InputIcon"),l=b("InputText"),p=b("IconField"),v=b("Column"),h=b("Tag"),x=b("Checkbox"),_=b("DataTable");return y(),S(_,{value:ae(e).tests,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":m[2]||(m[2]=I=>o.value=I),filterDisplay:"menu",globalFilterFields:["name","weight","isMandatory"],onRowSelect:a,selectionMode:"single"},{header:g(()=>[c("div",rn,[r(u,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:m[0]||(m[0]=I=>s())}),r(p,null,{default:g(()=>[r(d,null,{default:g(()=>m[3]||(m[3]=[c("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),r(l,{modelValue:o.value.global.value,"onUpdate:modelValue":m[1]||(m[1]=I=>o.value.global.value=I),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:g(()=>m[4]||(m[4]=[c("div",{class:"w-full h-full px-3 py-4"}," No tests found. ",-1)])),default:g(()=>[r(v,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:g(({data:I})=>[c("div",dn,M(I.name),1)]),filter:g(({filterModel:I})=>[r(l,{modelValue:I.value,"onUpdate:modelValue":T=>I.value=T,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(v,{field:"weight",header:"Weight",filterField:"weight"},{body:g(({data:I})=>[c("div",un,M(I.weight),1)]),filter:g(({filterModel:I})=>[r(l,{modelValue:I.value,"onUpdate:modelValue":T=>I.value=T,type:"text",placeholder:"Search by Weight"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r(v,{field:"isMandatory",header:"Mandatory",dataType:"boolean"},{body:g(({data:I})=>[c("div",cn,[r(h,{value:I.isMandatory?"Yes":"No",severity:i(I.isMandatory)},null,8,["value","severity"])])]),filter:g(({filterModel:I})=>[m[5]||(m[5]=c("label",{for:"mandatory-filter",class:"font-bold"}," Mandatory ",-1)),r(x,{modelValue:I.value,"onUpdate:modelValue":T=>I.value=T,indeterminate:I.value===null,binary:"",inputId:"mandatory-filter"},null,8,["modelValue","onUpdate:modelValue","indeterminate"])]),_:1})]),_:1},8,["value","filters"])}}}),pn=te(mn,[["__scopeId","data-v-fcb8b915"]]),fn={class:"cards-section"},gn={class:"mb-4"},vn=D({__name:"TestsListView",setup(t){const e=w(!1);return(o,n)=>(y(),B(J,null,[n[3]||(n[3]=c("h2",{class:"title-section"},"Tests",-1)),c("div",fn,[r(A,null,{header:g(()=>n[2]||(n[2]=[c("h3",null,"List of tests",-1)])),body:g(()=>[c("div",gn,[r(ae(Ae),{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=s=>e.value=!0)})]),r(pn)]),_:1})]),r(ln,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=s=>e.value=s)},null,8,["visible"])],64))}}),bn={class:"flex flex-col gap-4"},hn={class:"flex flex-col gap-1"},_n=D({__name:"Export",setup(t){const e=re(),o=K(),n=async()=>{try{await e.exportToJson(),o.add({severity:"success",summary:"Success",detail:"Successfully saved data to json.",life:3e3})}catch(s){o.add({severity:"error",summary:"Error",detail:s.message,life:4e3})}};return(s,a)=>{const i=b("Button");return y(),S(A,null,{header:g(()=>a[1]||(a[1]=[c("h3",null,"Export",-1)])),body:g(()=>[c("div",bn,[c("div",hn,[a[2]||(a[2]=c("h4",null,"Save data",-1)),r(i,{label:"Save",icon:"pi pi-file-export",class:"w-fit",onClick:a[0]||(a[0]=f=>n())})])])]),_:1})}}}),yn={class:"flex flex-col gap-4 mt-2"},xn={class:"flex items-center gap-4"},wn=D({__name:"GeneralSettings",setup(t){const e=he(),o=w(),n=w([{name:"With dialog",code:"D"},{name:"With input",code:"I"}]);return E(()=>{e.settings?.editWithDialog?o.value={name:"With dialog",code:"D"}:o.value={name:"With input",code:"I"}}),X(o,()=>{o.value?.code==="D"?e.updateSettings({editWithDialog:!0}):e.updateSettings({editWithDialog:!1})},{deep:!0}),(s,a)=>{const i=b("Select");return y(),S(A,null,{header:g(()=>a[1]||(a[1]=[c("h3",null,"General",-1)])),body:g(()=>[c("div",yn,[c("div",xn,[a[2]||(a[2]=c("h5",null,"Editing grade:",-1)),r(i,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=f=>o.value=f),options:n.value,optionLabel:"name",placeholder:"Select",class:"w-full md:w-56"},null,8,["modelValue","options"])])])]),_:1})}}}),In={class:"flex flex-col gap-1"},Sn={class:"flex flex-col gap-1"},Pn={class:"flex justify-end gap-2 mt-4"},Dn=D({__name:"EditGradeThresholdDialog",props:ie({id:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=oe(),o=K(),n=t,s=Z(t,"visible"),a=Q({id:"",name:"",minPercentage:null}),i=w(ee($.object({name:$.string("Grade name is required").min(1,"Grade name is required"),minPercentage:$.number("Min percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),f=async d=>{if(d){const l=e.getGradeThreshold(n.id);l&&Object.assign(a,l),await me(),Object.assign(a,{name:"",minPercentage:null})}};X(s,d=>{f(d)});const m=()=>{s.value=!1},u=d=>{if(d.valid){const l={name:d.states.name.value,minPercentage:d.states.minPercentage.value};ze(l)?(e.updateGradeThreshold(n.id,l),o.add({severity:"success",summary:"Success",detail:"Successfully edited grade threshold.",life:3e3}),s.value=!1):console.error("Wrong data from form")}};return(d,l)=>{const p=b("InputText"),v=b("FloatLabel"),h=b("Message"),x=b("InputNumber"),_=b("Button"),I=b("Form"),T=b("Dialog");return y(),S(T,{header:"Edit Grade Threshold",visible:s.value,"onUpdate:visible":l[0]||(l[0]=G=>s.value=G),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[r(I,{initialValues:a,resolver:i.value,onSubmit:u,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(G=>[c("div",In,[r(v,{variant:"on"},{default:g(()=>[r(p,{id:"name",name:"name",variant:"filled",class:"w-full"}),l[1]||(l[1]=c("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),G.name?.invalid?(y(),S(h,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(G.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Sn,[r(v,{variant:"on"},{default:g(()=>[r(x,{id:"minPercentage",name:"minPercentage",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:0,step:1}),l[2]||(l[2]=c("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),G.minPercentage?.invalid?(y(),S(h,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(G.minPercentage.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Pn,[r(_,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:m}),r(_,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),Tn={class:"w-full px-3 py-4"},Cn={class:"w-full px-3 py-4"},Mn={class:"flex gap-3 w-full justify-center min-h-1 px-3 py-1"},$n=D({__name:"GradingScaleDatatable",setup(t){const e=oe(),o=pe(),n=K(),s=w(""),a=w(!1),i=j(()=>[...e.gradeThresholds].sort((u,d)=>d.minPercentage-u.minPercentage)),f=u=>{s.value=u,a.value=!0},m=u=>{o.require({message:"Are you sure you want to proceed? The grade threshold will be deleted.",header:"Delete grade threshold",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteGradeThreshold(u),n.add({severity:"success",summary:"Success",detail:"Succesfully deleted grade threshold",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete grade threshold",life:3e3})}}})};return(u,d)=>{const l=b("Column"),p=b("Button"),v=b("DataTable");return y(),B(J,null,[r(v,{value:i.value,scrollable:"",class:"custom-table"},{default:g(()=>[r(l,{field:"name",header:"Grade"},{body:g(({data:h})=>[c("div",Tn,M(h.name),1)]),_:1}),r(l,{field:"minPercentage",header:"Percentage"},{body:g(({data:h})=>[c("div",Cn,M(h.minPercentage),1)]),_:1}),r(l,{field:"actions",header:"Actions",class:"w-40"},{body:g(({data:h})=>[c("div",Mn,[r(p,{icon:"pi pi-file-edit",rounded:"",severity:"info","aria-label":"Edit",onClick:x=>f(h.id)},null,8,["onClick"]),r(p,{icon:"pi pi-times-circle",rounded:"",severity:"danger","aria-label":"Delete",onClick:x=>m(h.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"]),r(Dn,{id:s.value,visible:a.value,"onUpdate:visible":d[0]||(d[0]=h=>a.value=h)},null,8,["id","visible"])],64)}}}),kn=te($n,[["__scopeId","data-v-71cbc1fc"]]);function Gn(){return[{name:"Polish University",gradethresholds:[{name:"5.0",minPercentage:90},{name:"4.5",minPercentage:80},{name:"4.0",minPercentage:70},{name:"3.5",minPercentage:60},{name:"3.0",minPercentage:50},{name:"2.0",minPercentage:0}]},{name:"Polish",gradethresholds:[{name:"6",minPercentage:98},{name:"5",minPercentage:90},{name:"4",minPercentage:75},{name:"3",minPercentage:50},{name:"2",minPercentage:30},{name:"1",minPercentage:0}]},{name:"Japanese University",gradethresholds:[{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"Japanese",gradethresholds:[{name:"秀",minPercentage:90},{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"UK GCSE/A-Level",gradethresholds:[{name:"A*",minPercentage:90},{name:"A",minPercentage:80},{name:"B",minPercentage:70},{name:"C",minPercentage:60},{name:"D",minPercentage:50},{name:"E",minPercentage:40},{name:"F",minPercentage:30},{name:"G",minPercentage:20},{name:"U",minPercentage:0}]}]}const qn=D({__name:"SelectSystemDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=oe(),o=K(),n=Z(t,"visible"),s=Q(Gn()),a=w(ee(xe({system:tt([xe({name:at().min(1,"System is required.")}),st().refine(m=>!1,{message:"System is required."})])}))),i=()=>{n.value=!1},f=m=>{m.valid&&m.states.system&&(e.replaceGradeThresholds(m.states.system.value.gradethresholds),o.add({severity:"success",summary:"Success",detail:"Successfully changed grading system.",life:3e3}),i())};return(m,u)=>{const d=b("Listbox"),l=b("Message"),p=b("Button"),v=b("Form"),h=b("Dialog");return y(),S(h,{header:"Select Grading system",visible:n.value,"onUpdate:visible":u[0]||(u[0]=x=>n.value=x),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[r(v,{resolver:a.value,onSubmit:f,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(x=>[r(d,{name:"system",options:s,optionLabel:"name",virtualScrollerOptions:{itemSize:20},class:"w-full",listStyle:"height:250px",striped:"",fluid:""},null,8,["options"]),x.system?.invalid?(y(),S(l,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(x.system.error?.message),1)]),_:2},1024)):N("",!0),r(p,{label:"Select",type:"submit",autofocus:"",disabled:!x.system?.value},null,8,["disabled"])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),Fn={class:"flex flex-col gap-1"},An={class:"flex flex-col gap-1"},Bn={class:"flex justify-end gap-2 mt-4"},Nn=D({__name:"NewGradeThresholdDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=oe(),o=K(),n=Z(t,"visible"),s=w(ee($.object({name:$.string("Grade name is required").min(1,"Grade name is required"),minPercentage:$.number("Min Percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),a=()=>{n.value=!1},i=f=>{if(f.valid){const m={name:f.states.name.value,minPercentage:f.states.minPercentage.value};ze(m)?(e.addGradeThreshold(m),o.add({severity:"success",summary:"Success",detail:"Successfully added grade threshold.",life:3e3}),a()):console.error("Wrong data from form!")}};return(f,m)=>{const u=b("InputText"),d=b("FloatLabel"),l=b("Message"),p=b("InputNumber"),v=b("Button"),h=b("Form"),x=b("Dialog");return y(),S(x,{header:"New Grade Threshold",visible:n.value,"onUpdate:visible":m[0]||(m[0]=_=>n.value=_),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[r(h,{resolver:s.value,onSubmit:i,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(_=>[c("div",Fn,[r(d,{variant:"on"},{default:g(()=>[r(u,{id:"name",name:"name",variant:"filled",class:"w-full"}),m[1]||(m[1]=c("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),_.name?.invalid?(y(),S(l,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(_.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",An,[r(d,{variant:"on"},{default:g(()=>[r(p,{id:"minPercentage",name:"minPercentage",class:"w-full",variant:"filled",min:0,max:100,step:1}),m[2]||(m[2]=c("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),_.minPercentage?.invalid?(y(),S(l,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(_.minPercentage.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Bn,[r(v,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),r(v,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),Rn={class:"mt-2 mb-4 flex justify-between"},Vn=D({__name:"GradingThresholds",setup(t){const e=w(!1),o=w(!1);return(n,s)=>{const a=b("Button");return y(),S(A,null,{header:g(()=>s[4]||(s[4]=[c("h3",null,"Grading thresholds",-1)])),body:g(()=>[c("div",Rn,[r(a,{label:"New",icon:"pi pi-plus",onClick:s[0]||(s[0]=i=>o.value=!0)}),r(a,{variant:"outlined",label:"Select System",icon:"pi pi-graduation-cap",onClick:s[1]||(s[1]=i=>e.value=!0)})]),r(kn),r(qn,{visible:e.value,"onUpdate:visible":s[2]||(s[2]=i=>e.value=i)},null,8,["visible"]),r(Nn,{visible:o.value,"onUpdate:visible":s[3]||(s[3]=i=>o.value=i)},null,8,["visible"])]),_:1})}}}),Wn={class:"flex flex-col gap-4"},Ln={class:"flex flex-col gap-1"},En={class:"flex flex-col gap-1"},On=D({__name:"Import",setup(t){const e=re(),o=pe(),n=K(),s=w(null),a=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load demo data",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{try{await e.loadDemoData(),n.add({severity:"success",summary:"Success",detail:"Successfully loaded demo data",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to load demo data",life:3e3})}}})},i=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load data from device",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{s.value?.click()}})},f=async m=>{const u=m.target;if(!u.files?.length){n.add({severity:"info",summary:"Info",detail:"No file selected",life:3e3});return}const d=u.files[0];try{const l=await d.text();await e.importFromJson(l),n.add({severity:"success",summary:"Success",detail:"Successfully loaded data",life:3e3})}catch{n.add({severity:"error",summary:"Error",detail:"Failed to load data",life:3e3})}finally{u.value=""}};return(m,u)=>{const d=b("Button");return y(),S(A,null,{header:g(()=>u[2]||(u[2]=[c("h3",null,"Import",-1)])),body:g(()=>[c("div",Wn,[c("div",Ln,[u[3]||(u[3]=c("h4",null,"Load demo data",-1)),r(d,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:u[0]||(u[0]=l=>a())})]),c("div",En,[u[4]||(u[4]=c("h4",null,"Load data from device",-1)),r(d,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:u[1]||(u[1]=l=>i())}),c("input",{type:"file",ref_key:"fileInput",ref:s,accept:"application/json",class:"hidden",onChange:f},null,544)])])]),_:1})}}}),zn={class:"cards-section"},Un={class:"grid grid-cols-1 lg:grid-cols-2 auto-rows-auto w-full"},jn=D({__name:"SettingsView",setup(t){return(e,o)=>(y(),B(J,null,[o[0]||(o[0]=c("h2",{class:"title-section"},"Settings",-1)),c("div",zn,[c("div",Un,[r(wn,{class:"lg:col-span-2"}),r(Vn,{class:"lg:col-span-2 row-start-2"}),r(On,{class:"lg:row-start-3"}),r(_n,{class:"lg:row-start-3"})])])],64))}}),Jn={class:"flex flex-col gap-1"},Hn={class:"flex flex-col gap-1"},Kn={class:"flex flex-col gap-1"},Qn={class:"flex items-center gap-2"},Yn={class:"flex flex-col gap-1"},Zn={class:"flex items-center gap-2"},Xn={class:"flex justify-end gap-2 mt-4"},eo=D({__name:"EditTestDialog",props:ie({testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ie(["submit"],["update:visible"]),setup(t,{emit:e}){const o=L(),n=t,s=Z(t,"visible"),a=e,i=Q({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),f={name:$.string().min(1,"Name is required"),maxPoints:$.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:$.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:$.boolean()},m=$.discriminatedUnion("isRequired",[$.object({...f,isRequired:$.literal(!0),requiredPoints:$.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(v=>v.requiredPoints<=v.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),$.object({...f,isRequired:$.literal(!1),requiredPoints:$.number().nullable().optional()})]),u=w(ee(m)),d=()=>{s.value=!1},l=v=>{if(v.valid){const h={name:v.states.name.value,maxPoints:v.states.maxPoints.value,weight:v.states.weight.value,requiredPoints:v.states.isRequired.value?v.states.requiredPoints.value:null,isMandatory:v.states.isRequired.value?v.states.isMandatory.value:!1};Ee(h)?a("submit",h):console.error("Wrong data from form!")}},p=async v=>{if(v){const h=o.getTest(n.testId);h&&(Object.assign(i,h),i.isRequired=i.requiredPoints!==null),await me(),Object.assign(i,{name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1})}};return X(()=>s.value,v=>{p(v)}),(v,h)=>{const x=b("InputText"),_=b("FloatLabel"),I=b("Message"),T=b("InputNumber"),G=b("Checkbox"),V=b("Button"),z=b("Form"),fe=b("Dialog");return y(),S(fe,{header:"Edit test",visible:s.value,"onUpdate:visible":h[0]||(h[0]=q=>s.value=q),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[r(z,{initialValues:i,resolver:u.value,onSubmit:l,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(q=>[c("div",Jn,[r(_,{variant:"on"},{default:g(()=>[r(x,{id:"name",name:"name",variant:"filled",class:"w-full"}),h[1]||(h[1]=c("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),q.name?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(q.name.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Hn,[r(_,{variant:"on"},{default:g(()=>[r(T,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),h[2]||(h[2]=c("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),q.maxPoints?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(q.maxPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Kn,[r(_,{variant:"on"},{default:g(()=>[r(T,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),h[3]||(h[3]=c("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),q.weight?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(q.weight.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Qn,[r(G,{id:"isRequired",name:"isRequired",binary:""}),h[4]||(h[4]=c("label",{for:"isRequired"},"Required",-1))]),c("div",Yn,[r(_,{variant:"on"},{default:g(()=>[r(T,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1,disabled:!q.isRequired?.value},null,8,["disabled"]),h[5]||(h[5]=c("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),q.requiredPoints?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(q.requiredPoints.error?.message),1)]),_:2},1024)):N("",!0)]),c("div",Zn,[r(G,{id:"isMandatory",name:"isMandatory",binary:""}),h[6]||(h[6]=c("label",{for:"isMandatory"},"Mandatory",-1))]),c("div",Xn,[r(V,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:d}),r(V,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),to={class:"flex gap-1"},so={class:"flex gap-1"},ao={class:"flex gap-1"},no={class:"flex justify-end gap-2 mt-4"},oo=D({__name:"ChangeGradesDialog",props:ie({testId:{},editedTest:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=K(),o=L(),n=W(),s=t,a=Z(t,"visible"),i=Q({option:"Reduce"}),f=w(ee($.object({ingredient:$.string().min(1,{message:"Option is required."})}))),m=()=>{a.value=!1},u=async d=>{if(d.valid){let l=!1;const p=d.states.option.value;if(console.log(p),console.log(s.editedTest),console.log(o.getTest(s.testId)),p==="Reduce")await n.reduceGradesByTest(s.testId,s.editedTest.maxPoints),l=!0;else if(p==="Normalize"){const v=o.getTest(s.testId);v?(await n.normalizeGradesByTest(s.testId,v.maxPoints,s.editedTest.maxPoints),l=!0):console.error("Test doesn't exists!")}else p==="Delete"?(await n.deleteGradesByTest(s.testId),l=!0):console.error("Wrong data from form!");l&&(await o.updateTest(s.testId,s.editedTest),a.value=!1,e.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))}};return(d,l)=>{const p=b("RadioButton"),v=b("RadioButtonGroup"),h=b("Message"),x=b("Button"),_=b("Form"),I=b("Dialog");return y(),S(I,{header:"Change grades",visible:a.value,"onUpdate:visible":l[0]||(l[0]=T=>a.value=T),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[r(_,{initialValues:i,resolver:f.value,onSubmit:u,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(T=>[r(v,{name:"option",class:"flex flex-col gap-3 w-full"},{default:g(()=>[c("div",to,[r(p,{inputId:"reduce",value:"Reduce"}),l[1]||(l[1]=c("label",{for:"reduce"},"Reduce grades to new maximum points",-1))]),c("div",so,[r(p,{inputId:"normalize",value:"Normalize"}),l[2]||(l[2]=c("label",{for:"normalize"},"Normalize grades to new maximum points",-1))]),c("div",ao,[r(p,{inputId:"delete",value:"Delete"}),l[3]||(l[3]=c("label",{for:"delete"},"Delete all grades",-1))])]),_:1}),T.option?.invalid?(y(),S(h,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[R(M(T.option.error?.message),1)]),_:2},1024)):N("",!0),c("div",no,[r(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),r(x,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),io={class:"flex flex-wrap justify-evenly pb-6"},lo={class:"flex flex-col justify-center items-center gap-1"},ro={class:"flex flex-col justify-center items-center gap-1"},uo=D({__name:"ActionsTest",props:{testId:{},maxPoints:{}},setup(t){const e=L(),o=pe(),n=K(),s=Fe(),a=t,i=w(!1),f=w(!1),m=Q({name:"",maxPoints:1,weight:0,requiredPoints:null,isMandatory:!1}),u=()=>{o.require({message:"Are you sure you want to proceed? The test will be deleted.",header:"Delete test",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteTest(a.testId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted test",life:3e3}),s.push("/tests")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete test",life:3e3})}}})},d=l=>{Object.assign(m,l),i.value=!1,m.maxPoints!==a.maxPoints?f.value=!0:(e.updateTest(a.testId,m),n.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))};return(l,p)=>{const v=b("Button");return y(),S(A,null,{header:g(()=>p[4]||(p[4]=[c("h3",null,"Actions",-1)])),body:g(()=>[c("div",io,[c("div",lo,[p[5]||(p[5]=c("h4",null,"Edit test data",-1)),r(v,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:p[0]||(p[0]=h=>i.value=!0)})]),c("div",ro,[p[6]||(p[6]=c("h4",null,"Delete test",-1)),r(v,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:p[1]||(p[1]=h=>u())})])]),r(eo,{"test-id":l.testId,visible:i.value,"onUpdate:visible":p[2]||(p[2]=h=>i.value=h),onSubmit:d},null,8,["test-id","visible"]),r(oo,{"test-id":l.testId,editedTest:m,visible:f.value,"onUpdate:visible":p[3]||(p[3]=h=>f.value=h)},null,8,["test-id","editedTest","visible"])]),_:1})}}}),co=D({__name:"InfoData",props:{name:{},weight:{},requiredPoints:{},maxPoints:{},isMandatory:{type:Boolean}},setup(t){const e=t,o=n=>n?"success":"info";return(n,s)=>{const a=b("Tag");return y(),S(A,null,{header:g(()=>s[0]||(s[0]=[c("h3",null,"Info data",-1)])),body:g(()=>[c("h4",null,"Name: "+M(e.name),1),c("h4",null,"Weight: "+M(e.weight),1),c("h4",null,"Required points: "+M(e.requiredPoints??"-"),1),c("h4",null,"Max points: "+M(e.maxPoints),1),c("h4",null,[s[1]||(s[1]=R("Mandatory: ")),r(a,{value:n.isMandatory?"Yes":"No",severity:o(n.isMandatory)},null,8,["value","severity"])])]),_:1})}}}),mo={class:"flex justify-evenly flex-wrap gap-4 mt-2"},po=D({__name:"TestPerformance",props:{maxPoints:{},classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(A,null,{header:g(()=>n[0]||(n[0]=[c("h3",null,"Performance",-1)])),body:g(()=>[c("div",mo,[r(U,{title:"Weighted Average",value:e.classPerformance.weightedAverage,max:o.maxPoints},null,8,["value","max"]),r(U,{title:"Median",value:e.classPerformance.median,max:o.maxPoints},null,8,["value","max"]),r(U,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:o.maxPoints/2},null,8,["value","max"]),r(U,{title:"Max",value:e.classPerformance.max,max:o.maxPoints},null,8,["value","max"]),r(U,{title:"Min",value:e.classPerformance.min,max:o.maxPoints},null,8,["value","max"])])]),_:1}))}}),fo={class:"flex-1 min-w-64 h-fit"},go={class:"relative w-full h-[400px]"},be=4,vo=D({__name:"TestResults",props:{testId:{},maxScore:{}},setup(t){const e=O(),o=W(),n=t,s=w(),a=w(),i=w(0),f=w(0),m=()=>{const p=o.grades.filter(_=>_.testId===n.testId).map(_=>{const I=e.students.find(T=>T.id===_.studentId);return{name:I?.name,surname:I?.surname,score:_.points,percentage:_.points/n.maxScore*100}});f.value=p.length;const v=i.value*be,h=v+be,x=p.slice(v,h);s.value={labels:x.map(_=>`${_.name} ${_.surname}`),datasets:[{label:"Score",data:x.map(_=>_.percentage),scores:x.map(_=>_.score),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},u=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:p=>{const v=p.dataset,h=p.dataIndex;return`${v.scores[h]} / ${n.maxScore} points (${p.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},d=()=>{m(),u()};E(()=>{d()});const l=p=>{i.value=p.page,m()};return(p,v)=>{const h=b("Chart"),x=b("Paginator");return y(),S(A,null,{header:g(()=>v[0]||(v[0]=[c("h3",null,"Results",-1)])),body:g(()=>[c("div",fo,[c("div",go,[r(h,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),r(x,{rows:be,totalRecords:f.value,page:i.value,onPage:l},null,8,["totalRecords","page"])])]),_:1})}}}),bo=D({__name:"TestResultsDatatable",props:{testId:{},requiredPoints:{},maxPoints:{}},setup(t){const e=O(),o=W(),n=t,s=j(()=>o.grades.filter(i=>i.testId===n.testId).map(i=>{const f=e.students.find(d=>d.id===i.studentId);if(!f)return null;const m=k(i.points/n.maxPoints*100),u=n.requiredPoints!==null?i.points>=n.requiredPoints:!0;return{name:f.name,surname:f.surname,points:i.points,percentage:m,status:u}})),a=i=>i?"success":"warn";return(i,f)=>{const m=b("Column"),u=b("Tag"),d=b("DataTable");return y(),S(A,null,{header:g(()=>f[0]||(f[0]=[c("h3",null,"Results - details",-1)])),body:g(()=>[r(d,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:g(()=>[r(m,{field:"name",header:"Name"}),r(m,{field:"surname",header:"Surname"}),r(m,{field:"points",header:"Score"}),r(m,{field:"percentage",header:"Normalized Score (%)"}),r(m,{field:"status",header:"Status"},{body:g(({data:l})=>[r(u,{value:l.status?"passed":"failed",severity:a(l.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),ho=te(bo,[["__scopeId","data-v-67e41818"]]),_o={class:"relative w-full h-[90%]"},yo=D({__name:"TestPassRate",props:{testId:{},requiredPoints:{}},setup(t){const e=O(),o=W(),n=t,s=w(),a=w(),i=()=>{let u=0,d=0,l=0;return e.students.filter(p=>{const v=o.getGrade(p.id,n.testId);v?n.requiredPoints===null||v.points>=n.requiredPoints?u++:d++:l++}),{labels:["Passed","Failed","Not Taken"],datasets:[{data:[u,d,l],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(156, 163, 175)"],borderWidth:1}]}},f=()=>({indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}),m=()=>{s.value=i(),a.value=f()};return E(()=>{m()}),(u,d)=>{const l=b("Chart");return y(),S(A,null,{header:g(()=>d[0]||(d[0]=[c("h3",null,"Pass Rate",-1)])),body:g(()=>[c("div",_o,[r(l,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),xo={class:"relative w-full h-[90%]"},wo=D({__name:"TestPassRateByGender",props:{testId:{},requiredPoints:{}},setup(t){const e=O(),o=W(),n=t,s=w(),a=w(),i=()=>{const u=["Male","Female"],d={};u.forEach(l=>d[l]={passed:0,failed:0,notTaken:0}),e.students.forEach(l=>{const p=o.getGrade(l.id,n.testId),v=l.gender;p?n.requiredPoints===null||p.points>=n.requiredPoints?d[v].passed++:d[v].failed++:d[v].notTaken++}),s.value={labels:["Passed","Failed","Not taken"],datasets:[{label:"Male",data:[d.Male.passed,d.Male.failed,d.Male.notTaken],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1},{label:"Female",data:[d.Female.passed,d.Female.failed,d.Female.notTaken],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}},f=()=>{a.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}},m=()=>{i(),f()};return E(()=>{m()}),(u,d)=>{const l=b("Chart");return y(),S(A,null,{header:g(()=>d[0]||(d[0]=[c("h3",null,"Pass rate by gender",-1)])),body:g(()=>[c("div",xo,[r(l,{type:"bar",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),Io={class:"relative w-full h-[90%]"},So=D({__name:"TestPerformanceByGender",props:{maleData:{},femaleData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Male",data:[e.maleData.weightedAverage,e.maleData.median,e.maleData.standardDeviation,e.maleData.min,e.maleData.max],backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:[e.femaleData.weightedAverage,e.femaleData.median,e.femaleData.standardDeviation,e.femaleData.min,e.femaleData.max],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0}}});return E(()=>{o.value=s(),n.value=a()}),(f,m)=>{const u=b("Chart");return y(),S(A,null,{header:g(()=>m[0]||(m[0]=[c("h3",null,"Performance by gender",-1)])),body:g(()=>[c("div",Io,[r(u,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),Po={class:"cards-section"},Do={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},To=D({__name:"TestDetailsView",props:{testId:{}},setup(t){const e=O(),o=L(),n=W(),s=t,a=w(),i=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),f=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),u=()=>{const d=o.getTest(s.testId);if(!d)return;const l=e.students,p=n.grades;a.value=d,i.value={weightedAverage:k(Zt(p,s.testId)),median:k(Xt(p,s.testId)),standardDeviation:k(es(p,s.testId)),min:k(ts(p,s.testId)),max:k(ss(p,s.testId))},f.value={weightedAverage:k(ce(p,l,s.testId,"Male")),median:k(Se(p,l,s.testId,"Male")),standardDeviation:k(Pe(p,l,s.testId,"Male")),min:k(De(p,l,s.testId,"Male")),max:k(Te(p,l,s.testId,"Male"))},m.value={weightedAverage:k(ce(p,l,s.testId,"Female")),median:k(Se(p,l,s.testId,"Female")),standardDeviation:k(Pe(p,l,s.testId,"Female")),min:k(De(p,l,s.testId,"Female")),max:k(Te(p,l,s.testId,"Female"))}};return E(()=>{u()}),X(()=>o.tests,()=>{u()},{deep:!0}),(d,l)=>(y(),B(J,null,[l[0]||(l[0]=c("h2",{class:"title-section"},"Test Details",-1)),c("div",Po,[a.value?(y(),B("div",Do,[r(co,{name:a.value?.name,weight:a.value?.weight,"required-points":a.value?.requiredPoints,"max-points":a.value?.maxPoints,"is-mandatory":a.value?.isMandatory,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","weight","required-points","max-points","is-mandatory"]),r(uo,{"test-id":d.testId,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["test-id","max-points"]),r(yo,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["test-id","required-points"]),r(wo,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["test-id","required-points"]),r(po,{"class-performance":i.value,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["class-performance","max-points"]),r(So,{"male-data":f.value,"female-data":m.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["male-data","female-data"]),r(vo,{"test-id":a.value.id,"max-score":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["test-id","max-score"]),r(ho,{"test-id":a.value.id,"required-points":a.value.requiredPoints,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["test-id","required-points","max-points"])])):N("",!0)])],64))}}),Co=[{path:"/",component:As,children:[{path:"",component:Xs},{path:"grades",component:ca},{path:"tests",component:vn},{path:"tests/test/:testId",component:To,props:!0},{path:"students",component:Sa},{path:"students/student/:studentId",component:Za,props:!0},{path:"settings",component:jn}]}],_e=nt({history:ot("/Class-register/"),routes:Co}),C=it(Is),Mo=lt(jt,{semantic:{primary:{50:"{sky.50}",100:"{sky.100}",200:"{sky.200}",300:"{sky.300}",400:"{sky.400}",500:"{sky.500}",600:"{sky.600}",700:"{sky.700}",800:"{sky.800}",900:"{sky.900}",950:"{sky.950}"}}});C.use(rt,{theme:{preset:Mo,options:{cssLayer:{name:"primevue",order:"theme, base, primevue"}}}});C.directive("ripple",dt);C.directive("tooltip",ut);C.use(ct);C.use(mt);C.component("Button",Ae);C.component("ButtonGroup",pt);C.component("Column",ft);C.component("DataTable",gt);C.component("Dialog",vt);C.component("InputText",bt);C.component("InputNumber",ht);C.component("InputIcon",_t);C.component("IconField",yt);C.component("FloatLabel",xt);C.component("Menubar",wt);C.component("Message",It);C.component("Form",St);C.component("Toolbar",Pt);C.component("DataView",DataView);C.component("Accordion",Dt);C.component("AccordionPanel",Tt);C.component("AccordionHeader",Ct);C.component("AccordionContent",Mt);C.component("Knob",$t);C.component("Chart",kt);C.component("Select",Gt);C.component("ToggleSwitch",qt);C.component("ProgressSpinner",Ft);C.component("Listbox",At);C.component("MeterGroup",Bt);C.component("SelectButton",Nt);C.component("Checkbox",Rt);C.component("Paginator",Vt);C.component("ConfirmDialog",Wt);C.component("Toast",Lt);C.component("Tag",Et);C.component("RadioButton",Ot);C.component("RadioButtonGroup",zt);const $o=Ut();C.use($o);C.use(_e);C.mount("#app");
