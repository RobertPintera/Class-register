import{D as nt,d as de,r as w,c as X,v as R,e as ot,i as it,F as lt,a as P,o as O,b as rt,f as S,g as h,h as y,j as F,k as l,l as V,w as g,m as d,n as pe,t as $,p as J,q as fe,s as ze,u as dt,x as ut,y as ae,T as ct,z as $e,A as me,B as ne,C as ee,E as oe,G as ie,H as M,I as W,J as he,K as mt,L as pt,M as ft,N as te,O as re,P as Y,Q as _e,R as Pe,S as je,U as Me,V as gt,W as vt,X as ht,Y as _t,Z as bt,_ as yt,$ as xt,a0 as wt,a1 as It,a2 as St,a3 as Pt,a4 as Dt,a5 as Tt,a6 as Ct,a7 as kt,a8 as $t,a9 as Mt,aa as Gt,ab as qt,ac as Ft,ad as Bt,ae as At,af as Rt,ag as Nt,ah as Lt,ai as Vt,aj as Et,ak as Wt,al as zt,am as jt,an as Ut,ao as Ot,ap as Ht,aq as Jt,ar as Kt,as as Xt,at as Qt,au as Zt,av as Yt,aw as es,ax as ts,ay as ss,az as as,aA as ns,aB as os,aC as is,aD as ls,aE as rs}from"./vendor-DoVOf7Yi.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();class ds extends nt{students;tests;grades;thresholds;settings;constructor(){super("RegisterClassDatabase"),this.version(1).stores({students:"id",tests:"id",grades:"[studentId+testId], studentId, testId",thresholds:"id",settings:"id"}),this.students=this.table("students"),this.tests=this.table("tests"),this.grades=this.table("grades"),this.thresholds=this.table("thresholds"),this.settings=this.table("settings")}}const T=new ds;async function Ge(){return T.grades.toArray()}async function us(t){return T.grades.add(t)}async function xe(t,e,o){return T.grades.update([e,t],{...o})}async function cs(t,e){return T.grades.delete([t,e])}async function ms(t){await T.grades.where("testId").equals(t).delete()}function ps(t){return Math.round(t*10)/10}function q(t){return Math.round(t*100)/100}function fs(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?o.reduce((n,s)=>n+s,0)/o.length:0}function gs(t,e){const o=t.filter(s=>s.testId===e).map(s=>s.points).sort((s,a)=>s-a);if(!o.length)return 0;const n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function vs(t,e){const o=t.filter(a=>a.testId===e).map(a=>a.points);if(!o.length)return 0;const n=o.reduce((a,i)=>a+i,0)/o.length,s=o.reduce((a,i)=>a+Math.pow(i-n,2),0)/o.length;return Math.sqrt(s)}function hs(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.min(...o):0}function _s(t,e){const o=t.filter(n=>n.testId===e&&n.points!==void 0).map(n=>n.points);return o.length?Math.max(...o):0}function ve(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?s.reduce((a,i)=>a+i,0)/s.length:0}function qe(t,e,o,n){const s=t.filter(i=>i.testId===o.id&&i.points!==void 0).filter(i=>e.find(m=>m.id===i.studentId)?.gender===n).map(i=>i.points);return s.length?s.reduce((i,m)=>i+m,0)/s.length/o.maxPoints*100:0}function Fe(t,e,o,n){const s=t.filter(i=>i.testId===o&&i.points!==void 0).filter(i=>e.find(m=>m.id===i.studentId)?.gender===n).map(i=>i.points).sort((i,m)=>i-m);if(!s.length)return 0;const a=Math.floor(s.length/2);return s.length%2!==0?s[a]:(s[a-1]+s[a])/2}function Be(t,e,o,n){const s=t.filter(m=>m.testId===o&&m.points!==void 0).filter(m=>e.find(p=>p.id===m.studentId)?.gender===n).map(m=>m.points);if(!s.length)return 0;const a=s.reduce((m,p)=>m+p,0)/s.length,i=s.reduce((m,p)=>m+Math.pow(p-a,2),0)/s.length;return Math.sqrt(i)}function Ae(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.min(...s):0}function Re(t,e,o,n){const s=t.filter(a=>a.testId===o&&a.points!==void 0).filter(a=>e.find(i=>i.id===a.studentId)?.gender===n).map(a=>a.points);return s.length?Math.max(...s):0}function Ue(t,e,o){const n=t.filter(i=>i.studentId===o);if(!n.length)return 0;let s=0,a=0;for(const i of n){const m=e.find(p=>p.id===i.testId);m&&m.weight>0&&(s+=i.points/m.maxPoints*m.weight,a+=m.weight)}return a>0?s/a*100:0}function bs(t,e,o){const n=t.filter(a=>a.studentId===o).map(a=>{const i=e.find(m=>m.id===a.testId);return i&&i.maxPoints>0?a.points/i.maxPoints*100:0}).sort((a,i)=>a-i);if(!n.length)return 0;const s=Math.floor(n.length/2);return n.length%2!==0?n[s]:(n[s-1]+n[s])/2}function ys(t,e,o){const n=t.filter(i=>i.studentId===o).map(i=>{const m=e.find(p=>p.id===i.testId);return m&&m.maxPoints>0?i.points/m.maxPoints*100:0});if(!n.length)return 0;const s=n.reduce((i,m)=>i+m,0)/n.length,a=n.reduce((i,m)=>i+Math.pow(m-s,2),0)/n.length;return Math.sqrt(a)}function xs(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.min(...n):0}function ws(t,e,o){const n=t.filter(s=>s.studentId===e).map(s=>{const a=o.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100});return n.length?Math.max(...n):0}function Oe(t,e){let o=0,n=0;for(const s of e){const a=t.filter(m=>m.testId===s.id);if(a.length===0)continue;const i=a.reduce((m,p)=>m+p.points/s.maxPoints*100,0)/a.length;o+=i*s.weight,n+=s.weight}return n>0?o/n:0}function He(t,e){if(t.length===0)return 0;const o=t.map(s=>{const a=e.find(i=>i.id===s.testId);return!a||a.maxPoints===0?0:s.points/a.maxPoints*100}).sort((s,a)=>s-a),n=Math.floor(o.length/2);return o.length%2!==0?o[n]:(o[n-1]+o[n])/2}function Je(t,e){if(t.length===0)return 0;const o=t.map(a=>{const i=e.find(m=>m.id===a.testId);return!i||i.maxPoints===0?0:a.points/i.maxPoints*100}),n=o.reduce((a,i)=>a+i,0)/o.length,s=o.reduce((a,i)=>a+Math.pow(i-n,2),0)/o.length;return Math.sqrt(s)}function Ke(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.min(...o):0}function Xe(t,e){const o=t.filter(n=>e.some(s=>s.id===n.testId)).map(n=>{const s=e.find(a=>a.id===n.testId);return!s||s.maxPoints===0?0:n.points/s.maxPoints*100});return o.length?Math.max(...o):0}const z=de("grades",()=>{const t=w([]);return{grades:X(()=>t.value),updateGrade:async c=>{const u={...c},r=t.value.find(f=>f.studentId===u.studentId&&f.testId===u.testId);r?(r.points=u.points,await xe(r.testId,r.studentId,{points:r.points})):(t.value.push(u),await us(u))},deleteGrade:async(c,u)=>{await cs(c,u),t.value=t.value.filter(r=>!(r.studentId===c&&r.testId===u))},getGrade:(c,u)=>t.value.find(r=>r.studentId===c&&r.testId===u),setGrades:c=>{t.value=c},reduceGradesByTest:async(c,u)=>{const r=t.value.map(f=>f.testId===c&&f.points>u?{...f,points:u}:f);await Promise.all(r.filter(f=>f.testId===c).map(f=>xe(f.testId,f.studentId,{points:f.points}))),t.value=r},normalizeGradesByTest:async(c,u,r)=>{const f=t.value.map(v=>{if(v.testId===c){const _=ps(v.points/u*r);return{...v,points:_}}return v});await Promise.all(f.filter(v=>v.testId===c).map(v=>xe(v.testId,v.studentId,{points:v.points}))),t.value=f},deleteGradesByTest:async c=>{await ms(c),t.value=t.value.filter(u=>u.testId!==c)}}});async function Is(){if(await T.thresholds.count()===0){const e=[{id:R(),name:"5",minPercentage:90},{id:R(),name:"4.5",minPercentage:80},{id:R(),name:"4",minPercentage:70},{id:R(),name:"3.5",minPercentage:60},{id:R(),name:"3",minPercentage:50},{id:R(),name:"2",minPercentage:0}];await T.thresholds.bulkAdd(e)}}async function Ne(){return T.thresholds.toArray()}async function Ss(t){return T.thresholds.add(t)}async function Ps(t,e){return T.thresholds.update(t,e)}async function Ds(t){return T.thresholds.delete(t)}async function Ts(t){await T.transaction("rw",T.thresholds,async()=>{await T.thresholds.clear(),await T.thresholds.bulkAdd(t)})}const ue=de("gradeThresholds",()=>{const t=w([]);return{gradeThresholds:X(()=>t.value),addGradeThreshold:async p=>{const c={id:R(),...p};await Ss(c),t.value.push(c)},updateGradeThreshold:async(p,c)=>{await Ps(p,c);const u=t.value.findIndex(r=>r.id===p);u!==-1&&(t.value[u]={...t.value[u],...c})},deleteGradeThreshold:async p=>{await Ds(p),t.value=t.value.filter(c=>c.id!==p)},replaceGradeThresholds:async p=>{const c=p.map(u=>({id:R(),...u}));await Ts(c),t.value=c},getGradeThreshold:p=>t.value.find(c=>c.id===p),setGradeThresholds:p=>{t.value=p}}});async function Cs(){await T.settings.get("global")||await T.settings.add({id:"global",editWithDialog:!1})}async function Le(){return T.settings.get("global")}async function ks(t){return T.settings.update("global",t)}const De=de("settings",()=>{const t=w();return{settings:X(()=>t.value),updateSettings:async s=>{t.value&&(await ks(s),Object.assign(t.value,s))},setSettings:s=>{t.value=s}}});async function Ve(){return T.students.toArray()}async function $s(t){return T.students.add(t)}async function Ms(t,e){return T.students.update(t,e)}async function Gs(t){await T.transaction("rw",T.students,T.grades,async()=>{await T.grades.where("studentId").equals(t).delete(),await T.students.delete(t)})}const K=de("students",()=>{const t=z(),e=w([]);return{students:X(()=>e.value),addStudent:async p=>{const c={id:R(),...p};await $s(c),e.value.push(c)},updateStudent:async(p,c)=>{await Ms(p,c);const u=e.value.findIndex(r=>r.id===p);u!==-1&&(e.value[u]={...e.value[u],...c})},deleteStudent:async p=>{await Gs(p),e.value=e.value.filter(c=>c.id!==p),t.setGrades(t.grades.filter(c=>c.studentId!==p))},getStudent:p=>e.value.find(c=>c.id===p),setStudents:p=>{e.value=p}}});async function Ee(){return T.tests.toArray()}async function qs(t){return T.tests.add(t)}async function Fs(t,e){return T.tests.update(t,e)}async function Bs(t){await T.transaction("rw",T.tests,T.grades,async()=>{await T.grades.where("testId").equals(t).delete(),await T.tests.delete(t)})}const j=de("tests",()=>{const t=z(),e=w([]);return{tests:X(()=>e.value),addTest:async p=>{const c={id:R(),...p};await qs(c),e.value.push(c)},updateTest:async(p,c)=>{await Fs(p,c);const u=e.value.findIndex(r=>r.id===p);u!==-1&&(e.value[u]={...e.value[u],...c})},deleteTest:async p=>{await Bs(p),e.value=e.value.filter(c=>c.id!==p),t.setGrades(t.grades.filter(c=>c.testId!==p))},getTest:p=>e.value.find(c=>c.id===p),setTests:p=>{e.value=p}}});async function As(){await T.transaction("rw",T.students,T.tests,T.grades,async()=>{await T.students.clear(),await T.tests.clear(),await T.grades.clear();const t=[{id:R(),name:"Jan",surname:"Kowalski",gender:"Male"},{id:R(),name:"John",surname:"Smith",gender:"Male"},{id:R(),name:"William",surname:"Brown",gender:"Male"},{id:R(),name:"Daniel",surname:"Novak",gender:"Male"},{id:R(),name:"Katarzyna",surname:"Wiśniewska",gender:"Female"},{id:R(),name:"Emily",surname:"Johnson",gender:"Female"},{id:R(),name:"Sofia",surname:"Rossi",gender:"Female"},{id:R(),name:"Maria",surname:"Silva",gender:"Female"}],e=[{id:R(),name:"Math - Algebra",maxPoints:20,weight:3,requiredPoints:10,isMandatory:!0},{id:R(),name:"English - Grammar",maxPoints:15,weight:3,requiredPoints:8,isMandatory:!0},{id:R(),name:"History - Ancient Rome",maxPoints:25,weight:2,requiredPoints:null,isMandatory:!0},{id:R(),name:"Science - Physics Basics",maxPoints:30,weight:2,requiredPoints:15,isMandatory:!0},{id:R(),name:"Geography - Europe",maxPoints:20,weight:2,requiredPoints:12,isMandatory:!0},{id:R(),name:"Biology - Human Body",maxPoints:25,weight:2,requiredPoints:14,isMandatory:!0},{id:R(),name:"Computer Science - Basics",maxPoints:40,weight:2,requiredPoints:20,isMandatory:!1},{id:R(),name:"Art - Painting",maxPoints:50,weight:1,requiredPoints:null,isMandatory:!1},{id:R(),name:"Music - Jazz",maxPoints:50,weight:1,requiredPoints:20,isMandatory:!1},{id:R(),name:"Chemistry - Chemical Reactions",maxPoints:50,weight:3,requiredPoints:20,isMandatory:!1}],o=[{studentId:t[0].id,testId:e[0].id,points:20},{studentId:t[0].id,testId:e[1].id,points:14},{studentId:t[0].id,testId:e[2].id,points:23},{studentId:t[0].id,testId:e[3].id,points:27},{studentId:t[0].id,testId:e[4].id,points:19},{studentId:t[0].id,testId:e[5].id,points:18},{studentId:t[0].id,testId:e[6].id,points:37},{studentId:t[0].id,testId:e[7].id,points:46},{studentId:t[0].id,testId:e[9].id,points:47},{studentId:t[1].id,testId:e[0].id,points:16},{studentId:t[1].id,testId:e[1].id,points:7},{studentId:t[1].id,testId:e[2].id,points:21},{studentId:t[1].id,testId:e[3].id,points:20},{studentId:t[1].id,testId:e[5].id,points:17},{studentId:t[1].id,testId:e[6].id,points:25},{studentId:t[1].id,testId:e[8].id,points:30},{studentId:t[2].id,testId:e[0].id,points:18},{studentId:t[2].id,testId:e[1].id,points:12},{studentId:t[2].id,testId:e[2].id,points:24},{studentId:t[2].id,testId:e[3].id,points:25},{studentId:t[2].id,testId:e[4].id,points:15},{studentId:t[2].id,testId:e[5].id,points:23},{studentId:t[2].id,testId:e[6].id,points:38},{studentId:t[2].id,testId:e[7].id,points:40},{studentId:t[2].id,testId:e[8].id,points:48},{studentId:t[2].id,testId:e[9].id,points:19},{studentId:t[3].id,testId:e[0].id,points:17},{studentId:t[3].id,testId:e[1].id,points:6},{studentId:t[3].id,testId:e[2].id,points:19},{studentId:t[3].id,testId:e[3].id,points:27},{studentId:t[3].id,testId:e[5].id,points:10},{studentId:t[3].id,testId:e[7].id,points:25},{studentId:t[4].id,testId:e[0].id,points:20},{studentId:t[4].id,testId:e[1].id,points:15},{studentId:t[4].id,testId:e[2].id,points:23},{studentId:t[4].id,testId:e[3].id,points:29},{studentId:t[4].id,testId:e[4].id,points:18},{studentId:t[4].id,testId:e[5].id,points:24},{studentId:t[4].id,testId:e[6].id,points:39},{studentId:t[4].id,testId:e[9].id,points:45},{studentId:t[5].id,testId:e[0].id,points:5},{studentId:t[5].id,testId:e[1].id,points:8},{studentId:t[5].id,testId:e[2].id,points:18},{studentId:t[5].id,testId:e[3].id,points:12},{studentId:t[5].id,testId:e[4].id,points:9},{studentId:t[5].id,testId:e[8].id,points:45},{studentId:t[5].id,testId:e[9].id,points:30},{studentId:t[6].id,testId:e[0].id,points:11},{studentId:t[6].id,testId:e[1].id,points:13},{studentId:t[6].id,testId:e[2].id,points:14},{studentId:t[6].id,testId:e[3].id,points:25},{studentId:t[6].id,testId:e[5].id,points:19},{studentId:t[6].id,testId:e[6].id,points:36},{studentId:t[7].id,testId:e[0].id,points:15},{studentId:t[7].id,testId:e[1].id,points:6},{studentId:t[7].id,testId:e[2].id,points:10},{studentId:t[7].id,testId:e[3].id,points:21},{studentId:t[7].id,testId:e[4].id,points:11},{studentId:t[7].id,testId:e[5].id,points:24},{studentId:t[7].id,testId:e[6].id,points:10},{studentId:t[7].id,testId:e[7].id,points:47},{studentId:t[7].id,testId:e[8].id,points:40},{studentId:t[7].id,testId:e[9].id,points:42}];await T.students.bulkAdd(t),await T.tests.bulkAdd(e),await T.grades.bulkAdd(o)})}async function Rs(){return await ot(T,{prettyJson:!0})}async function Ns(t){const e=new Blob([t],{type:"application/json"});await T.transaction("rw",T.tables,async()=>{for(const o of T.tables)await o.clear()}),await it(T,e)}const ge=de("register",()=>{const t=w(!1),e=X(()=>t.value),o=z(),n=ue(),s=De(),a=K(),i=j(),m=async()=>{t.value||(t.value=!0,await Cs(),await Is(),n.setGradeThresholds(await Ne()),s.setSettings(await Le()??{id:"global",editWithDialog:!0}),a.setStudents(await Ve()),i.setTests(await Ee()),o.setGrades(await Ge()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},p=async()=>{e.value||(t.value=!0,await As(),n.setGradeThresholds(await Ne()),s.setSettings(await Le()??{id:"global",editWithDialog:!0}),a.setStudents(await Ve()),i.setTests(await Ee()),o.setGrades(await Ge()),await new Promise(v=>setTimeout(v,500)),t.value=!1)},c=async()=>{const v=await Rs();lt.saveAs(v,"register-class-data.json")},u=async v=>{await Ns(v),await m()},r=X(()=>i.tests.map(v=>({field:v.id,header:v.name}))),f=X(()=>a.students.map(v=>{const _={studentId:v.id,fullName:`${v.name} ${v.surname}`};for(const x of i.tests){const b=o.grades.find(I=>I.studentId===v.id&&I.testId===x.id);_[x.id]=b?b.points:-1}return _}));return{isLoading:e,testColumns:r,studentGrades:f,loadData:m,loadDemoData:p,exportToJson:c,importFromJson:u}}),Ls=P({__name:"App",setup(t){const e=ge(),o=window.matchMedia("(prefers-color-scheme: dark)"),n=s=>document.documentElement.classList.toggle("dark",s.matches);return O(()=>{document.documentElement.classList.toggle("dark",o.matches),o.addEventListener("change",n),console.log("Loading Data"),e.loadData()}),rt(()=>{o.removeEventListener("change",n)}),(s,a)=>{const i=h("router-view");return y(),S(i)}}}),Vs={key:0,class:"pl-6"},Es=P({__name:"SideBarItem",props:{label:{},icon:{},route:{},items:{},active:{type:Boolean}},setup(t){const e=t;return(o,n)=>{const s=h("router-link"),a=h("SideBarItem",!0);return y(),F("li",null,[l(s,{to:o.route},{default:g(()=>[d("div",{class:pe(["px-4 py-1 rounded-md hover:bg-sidebaritem-hover-background transition duration-75 space-x-2",{"bg-sidebaritem-active-background":o.active}])},[d("i",{class:pe(o.icon)},null,2),d("span",null,$(o.label),1)],2)]),_:1},8,["to"]),e.items?.length?(y(),F("ul",Vs,[(y(!0),F(J,null,fe(e.items,i=>(y(),S(a,ze({key:i.route},{ref_for:!0},i,{active:o.$route.path===i.route}),null,16,["active"]))),128))])):V("",!0)])}}}),Ws={class:"font-semibold uppercase text-sm"},zs=P({__name:"SideBar",props:{visible:{type:Boolean},isLargeScreen:{type:Boolean}},setup(t){const e=K(),o=j(),n=dt(),s=X(()=>{const a=n.params.studentId,i=n.params.testId,m=a?e.getStudent(a):null,p=i?o.getTest(i):null;return[{label:"Home",items:[{label:"Dashboard",icon:"pi pi-home",route:"/main/dashboard"}]},{label:"Register",items:[{label:"Grades",icon:"pi pi-objects-column",route:"/main/grades"},{label:"Tests",icon:"pi pi-book",route:"/main/tests",items:[...p?[{label:p?`${p.name}`:"test",icon:"pi pi-clipboard",route:`/main/tests/test/${i}`}]:[]]},{label:"Students",icon:"pi pi-users",route:"/main/students",items:[...m?[{label:m?`${m.name} ${m.surname}`:"student",icon:"pi pi-user",route:`/main/students/student/${a}`}]:[]]},{label:"Settings",icon:"pi pi-cog",route:"/main/settings"}]}]});return(a,i)=>(y(),F("nav",{class:pe(["fixed w-64 flex flex-col z-30 transition-[left,top] duration-500 ease-in-out",{"top-16":a.isLargeScreen,"top-0":!a.isLargeScreen,"left-[-18rem]":!a.visible,"left-0":a.visible}])},[d("div",{class:pe(["bg-sidebar-background w-full overflow-auto transition-colors duration-[var(--p-transition-duration)] ease-in-out",{"sidebar m-4 h-[calc(100vh-6rem)]":a.isLargeScreen,"h-[100vh] p-4":!a.isLargeScreen}])},[(y(!0),F(J,null,fe(s.value,m=>(y(),F("div",{key:m.label,class:"space-y-1"},[d("h3",Ws,$(m.label),1),d("ul",null,[(y(!0),F(J,null,fe(m.items,p=>(y(),S(Es,ze({key:p.route},{ref_for:!0},p,{active:a.$route.path===p.route,onClick:i[0]||(i[0]=c=>a.$emit("select"))}),null,16,["active"]))),128))])]))),128))],2)],2))}}),js="/Class-register/logo_class_register.svg",Qe=de("global",()=>{const t=ut({disableTransition:!1});return{isDark:X(()=>t.value),toggleDark:()=>{t.value=!t.value}}}),Us={class:"fixed justify-between w-full h-16 flex items-center border-b-2 border-primary-border p-4 pl-6 shadow-md bg-topbar-background z-10 gap-4"},Os={class:"flex items-center gap-4"},Ze=P({__name:"TopBar",props:{isToggleSidebar:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(t,{emit:e}){const o=Qe(),n=e,s=X(()=>o.isDark?"pi pi-moon":"pi pi-sun");return(a,i)=>{const m=h("Button"),p=h("router-link");return y(),F("header",Us,[d("div",Os,[a.isToggleSidebar?(y(),S(m,{key:0,icon:"pi pi-bars",severity:"secondary",variant:"text",rounded:"","aria-label":"Bookmark",onClick:i[0]||(i[0]=c=>n("toggle-sidebar"))})):V("",!0),l(p,{to:"/"},{default:g(()=>i[1]||(i[1]=[d("div",{class:"flex gap-2 justify-center items-center"},[d("img",{src:js,alt:"Logo",class:"h-full"}),d("h3",{class:"text-xl sm:text-2xl"},"Class Register")],-1)])),_:1,__:[1]})]),l(m,{icon:s.value,severity:"secondary",variant:"text",rounded:"","aria-label":"Bookmark",onClick:ae(o).toggleDark},null,8,["icon","onClick"])])}}}),Hs={class:"min-h-full"},Js={key:0,class:"fixed top-0 left-0 w-full h-full bg-black/40 z-[9999] flex items-center justify-center"},Ks=P({__name:"DefaultLayout",setup(t){const e=ge(),o=w(!0),n=w(window.innerWidth>=1280),s=()=>{const i=n.value;n.value=window.innerWidth>=1280,!i&&n.value&&(o.value=!0),i&&!n.value&&(o.value=!1)};window.addEventListener("resize",s),O(()=>{n.value&&(o.value=!0),n.value||(o.value=!1)});const a=()=>{o.value=!o.value};return(i,m)=>{const p=h("ProgressSpinner"),c=h("router-view"),u=h("ConfirmDialog"),r=h("Toast");return y(),F(J,null,[d("div",Hs,[l(ct,null,{default:g(()=>[o.value&&!n.value?(y(),F("div",{key:0,class:"fixed inset-0 bg-black/50 z-20",onClick:m[0]||(m[0]=f=>o.value=!1)})):V("",!0)]),_:1}),l(Ze,{"is-toggle-sidebar":!0,onToggleSidebar:a}),l(zs,{visible:o.value,isLargeScreen:n.value,onSelect:m[1]||(m[1]=f=>n.value?null:a())},null,8,["visible","isLargeScreen"]),ae(e).isLoading?(y(),F("div",Js,[l(p,{style:{width:"200px",height:"200px"},strokeWidth:"4",animationDuration:".8s"})])):(y(),F("div",{key:1,class:pe(["pt-16 transition-[margin-left] duration-500 ease-in-out",{"ml-0":!o.value,"ml-72":o.value&&n.value}])},[d("div",null,[l(c)])],2))]),l(u,{draggable:!1}),l(r)],64)}}}),se=(t,e)=>{const o=t.__vccOpts||t;for(const[n,s]of e)o[n]=s;return o},Xs=se(Ks,[["__scopeId","data-v-cf2b6b3e"]]),Qs={},Zs={class:"card"},Ys={class:"mb-2"};function ea(t,e){return y(),F("div",Zs,[d("div",Ys,[$e(t.$slots,"header")]),$e(t.$slots,"body")])}const N=se(Qs,[["render",ea]]),ta={class:"relative w-full h-[90%]"},sa=P({__name:"ClassPassRate",setup(t){const e=K(),o=j(),n=z(),s=w(),a=w(),i=()=>{let c=0,u=0,r=0,f=0;o.tests.forEach(v=>{e.students.forEach(_=>{const x=n.getGrade(_.id,v.id);x?!v.requiredPoints||x.points>=v.requiredPoints?c++:u++:v.isMandatory?r++:f++})}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[c,u,r,f],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},m=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return O(()=>{i(),m()}),(c,u)=>{const r=h("Chart");return y(),S(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Class pass rate",-1)])),body:g(()=>[d("div",ta,[l(r,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[390px]"},null,8,["data","options"])])]),_:1})}}}),aa={class:"flex flex-col justify-center items-center w-fit"},Q=P({__name:"PerformanceCard",props:{title:{},value:{},max:{}},setup(t){const e=t;return(o,n)=>{const s=h("Knob");return y(),F("div",aa,[d("h4",null,$(o.title),1),l(s,{modelValue:e.value,size:200,max:o.max,readonly:""},null,8,["modelValue","max"])])}}}),na={class:"flex justify-evenly flex-wrap gap-4 mt-2"},oa=P({__name:"ClassPerformance",props:{classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Class performance",-1)])),body:g(()=>[d("div",na,[l(Q,{title:"Weighted Average",value:e.classPerformance.weightedAverage},null,8,["value"]),l(Q,{title:"Median",value:e.classPerformance.median},null,8,["value"]),l(Q,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:50},null,8,["value"]),l(Q,{title:"Max",value:e.classPerformance.max},null,8,["value"]),l(Q,{title:"Min",value:e.classPerformance.min},null,8,["value"])])]),_:1}))}}),ia={class:"relative w-full h-[90%]"},la=P({__name:"FinalGradeStats",setup(t){const e=K(),o=j(),n=z(),s=ue(),a=w(),i=w(),m=()=>{const u=e.students,r=o.tests,f=n.grades,v=s.gradeThresholds.slice().sort((b,I)=>b.minPercentage-I.minPercentage),_={},x={};v.forEach(b=>{_[b.name]=0,x[b.name]=0});for(const b of u){const I=Ue(f,r,b.id),C=v.slice().sort((G,E)=>E.minPercentage-G.minPercentage).find(G=>I>=G.minPercentage);C&&(b.gender==="Male"?_[C.name]++:b.gender==="Female"&&x[C.name]++)}a.value={labels:v.map(b=>b.name),datasets:[{label:"Male",data:v.map(b=>_[b.name]),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:v.map(b=>x[b.name]),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}},p=()=>{i.value={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Students number"},ticks:{stepSize:1,callback:function(u){return Number(u)%1===0?u:null}}},x:{title:{display:!0,text:"Grade"}}}}},c=()=>{m(),p()};return O(()=>{c()}),(u,r)=>{const f=h("Chart");return y(),S(N,null,{header:g(()=>r[0]||(r[0]=[d("h3",null,"Final grade stats",-1)])),body:g(()=>[d("div",ia,[l(f,{type:"bar",data:a.value,options:i.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),ra={class:"relative w-full h-[90%]"},da=P({__name:"MandatoryTestsCount",setup(t){const e=j(),o=w(),n=w(),s=()=>{let m=0,p=0;e.tests.forEach(c=>{c.isMandatory?m++:p++}),o.value={labels:["Mandatory","Optional"],datasets:[{data:[m,p],backgroundColor:["rgba(101, 219, 144, 0.6)","rgba(6, 182, 212, 0.6)"],borderColor:["rgb(101, 219, 144)","rgb(6, 182, 212)"],borderWidth:1}]}},a=()=>{n.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}};return O(()=>{s(),a()}),(m,p)=>{const c=h("Chart");return y(),S(N,null,{header:g(()=>p[0]||(p[0]=[d("h3",null,"Mandatory Tests Count",-1)])),body:g(()=>[d("div",ra,[l(c,{type:"bar",data:o.value,options:n.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),ua={class:"relative w-full h-[90%]"},ca=P({__name:"TestGenderComparison",setup(t){const e=K(),o=j(),n=z(),s=w(),a=w(),i=()=>{const c=o.tests,u=e.students,r=n.grades,f=[],v=[],_=[],x=[];c.forEach(b=>{f.push(q(qe(r,u,b,"Male"))),v.push(q(qe(r,u,b,"Female"))),_.push(q(ve(r,u,b.id,"Male"))),x.push(q(ve(r,u,b.id,"Female")))}),s.value={labels:c.map(b=>b.name),datasets:[{label:"Male",data:f,rawData:_,borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.3)"},{label:"Female",data:v,rawData:x,borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.3)"}]}},m=()=>{a.value={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,min:0,max:100,ticks:{backdropColor:"transparent"}}},plugins:{tooltip:{callbacks:{label:c=>{const u=c.dataset,r=c.formattedValue,f=u.rawData[c.dataIndex];return`${u.label}: ${f} (${r}%)`}}}}}};return O(()=>{i(),m()}),(c,u)=>{const r=h("Chart");return y(),S(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Test comparision",-1)])),body:g(()=>[d("div",ua,[l(r,{type:"radar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),ma={class:"cards-section"},pa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},fa=P({__name:"DashboardView",setup(t){K();const e=j(),o=z(),n=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),s=()=>{const a=e.tests,i=o.grades;n.value={weightedAverage:q(Oe(i,a)),median:q(He(i,a)),standardDeviation:q(Je(i,a)),min:q(Ke(i,a)),max:q(Xe(i,a))}};return O(()=>{s()}),(a,i)=>(y(),F(J,null,[i[0]||(i[0]=d("h2",{class:"title-section"},"Dashboard",-1)),d("div",ma,[d("div",pa,[l(la,{class:"sm:col-span-2 lg:col-span-2"}),l(sa,{class:"sm:col-span-1 lg:col-span-1"}),l(da,{class:"sm:col-span-1 lg:col-span-1"}),l(oa,{"class-performance":n.value,class:"sm:col-span-2 lg:col-span-2"},null,8,["class-performance"]),l(ca,{class:"sm:col-span-2 lg:col-span-2"})])])],64))}}),ga={class:"flex flex-col gap-1"},va={class:"flex justify-end gap-2 mt-4"},ha=P({__name:"EditGradeDialog",props:me({studentId:{},testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=j(),o=z(),n=ne(t,"visible"),s=t,a=ee({name:"",maxPoints:0}),i=ee({score:null}),m=async r=>{if(r){const f=e.getTest(s.testId);f&&Object.assign(a,{name:f.name,maxPoints:f.maxPoints});const _=o.getGrade(s.studentId,s.testId)?.points??null;i.score=_,await he(),i.score=null}};oe(()=>n.value,r=>{m(r)});const p=()=>{n.value=!1},c=X(()=>ie(M.object({score:M.number("Score is required").min(0,"Score cannot be less than 0").max(a.maxPoints,`Score cannot be greater than ${a.maxPoints}`).nullable()}))),u=r=>{if(r.valid){const f=r.states.score?.value;if(typeof f=="number"||f===null){const v={studentId:s.studentId,testId:s.testId,points:f};f!==void 0?o.updateGrade(v):o.deleteGrade(s.studentId,s.testId),p()}else console.error("Wrong data from form!")}};return(r,f)=>{const v=h("InputNumber"),_=h("FloatLabel"),x=h("Message"),b=h("Button"),I=h("Form"),C=h("Dialog");return y(),S(C,{header:"Edit Grade",visible:n.value,"onUpdate:visible":f[0]||(f[0]=G=>n.value=G),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(I,{"initial-values":i,resolver:c.value,onSubmit:u,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(G=>[d("h5",null,"Number must be between 0 and "+$(a.maxPoints),1),d("div",ga,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"score",name:"score",class:"w-full",variant:"filled",min:0,max:a.maxPoints,maxFractionDigits:1,step:.1,allowEmpty:!0},null,8,["max"]),f[1]||(f[1]=d("label",{for:"score"},"Score",-1))]),_:1,__:[1]}),G.score?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(G.score.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",va,[l(b,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:p}),l(b,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initial-values","resolver"])]),_:1},8,["visible"])}}}),_a={class:"flex flex-wrap gap-2 items-center justify-between"},ba={class:"w-full cursor-pointer px-3 py-4"},ya=["onClick"],xa=P({__name:"GradesDatatable",setup(t){const e=ge(),o=j(),n=De(),s=z(),a=w(),i=w(!1),m=w({}),p=()=>{m.value.fullName={operator:re.AND,constraints:[{value:null,matchMode:te.STARTS_WITH}]};for(const x of e.testColumns)m.value[x.field]||(m.value[x.field]={operator:re.AND,constraints:[{value:null,matchMode:te.EQUALS}]})};p(),O(()=>{a.value=n.settings?.editWithDialog}),oe(()=>e.testColumns,x=>{const b=x.map(I=>I.field);for(const I of x)m.value[I.field]||(m.value[I.field]={operator:re.AND,constraints:[{value:null,matchMode:te.EQUALS}]});for(const I in m.value)I!=="fullName"&&!b.includes(I)&&delete m.value[I]},{immediate:!0});const c=()=>{p()},u=ee({studentId:"",testId:""}),r=(x,b)=>{a.value&&(u.studentId=x,u.testId=b,i.value=!0)},f=x=>{const{data:b,newValue:I,field:C}=x,G={studentId:b.studentId,testId:C,points:I},E=o.getTest(G.testId);if(E)if(I!=null){if(!v(G.points,E.maxPoints))return;s.updateGrade(G)}else s.deleteGrade(G.studentId,G.testId)},v=(x,b)=>x>=0&&x<=b,_=x=>{const b=o.getTest(x);return b?`Number must be between 0 and ${b.maxPoints}`:"No test info"};return(x,b)=>{const I=h("Button"),C=h("InputText"),G=h("Column"),E=h("InputNumber"),U=h("DataTable"),ce=ft("tooltip");return y(),F(J,null,[l(U,{value:ae(e).studentGrades,editMode:"cell",class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:m.value,"onUpdate:filters":b[1]||(b[1]=B=>m.value=B),filterDisplay:"menu",onCellEditComplete:f},{header:g(()=>[d("div",_a,[l(I,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:b[0]||(b[0]=B=>c())})])]),empty:g(()=>b[3]||(b[3]=[d("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:g(()=>[l(G,{sortable:"",field:"fullName",header:"Student",filterField:"fullName",frozen:""},{body:g(({data:B})=>[d("div",ba,$(B.fullName),1)]),filter:g(({filterModel:B})=>[l(C,{modelValue:B.value,"onUpdate:modelValue":D=>B.value=D,type:"text",placeholder:"Search by FullName"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),(y(!0),F(J,null,fe(ae(e).testColumns,B=>(y(),S(G,{sortable:"",key:B.field,field:B.field,header:B.header,filterField:B.field,dataType:"numeric"},mt({body:g(({data:D})=>[d("div",{class:"w-full min-h-1 cursor-pointer px-3 py-4",onClick:A=>r(D.studentId,B.field)},$(ae(s).getGrade(D.studentId,B.field)?.points??"-"),9,ya)]),filter:g(({filterModel:D})=>[l(E,{modelValue:D.value,"onUpdate:modelValue":A=>D.value=A},null,8,["modelValue","onUpdate:modelValue"])]),_:2},[a.value?void 0:{name:"editor",fn:g(({data:D,field:A})=>[pt(l(E,{modelValue:D[A],"onUpdate:modelValue":L=>D[A]=L,min:0,autofocus:"",fluid:"",allowEmpty:!0,defaultValue:D[A]===-1?null:D[A]},null,8,["modelValue","onUpdate:modelValue","defaultValue"]),[[ce,_(A),void 0,{top:!0}]])]),key:"0"}]),1032,["field","header","filterField"]))),128))]),_:1},8,["value","filters"]),l(ha,{visible:i.value,"onUpdate:visible":b[2]||(b[2]=B=>i.value=B),studentId:u.studentId,testId:u.testId},null,8,["visible","studentId","testId"])],64)}}}),wa=se(xa,[["__scopeId","data-v-fe46c1fc"]]),Ia={class:"cards-section"},Sa={class:"flex flex-col"},Pa={class:"flex justify-center"},Da=P({__name:"GradesView",setup(t){return(e,o)=>(y(),F(J,null,[o[1]||(o[1]=d("h2",{class:"title-section"},"Grades",-1)),d("div",Ia,[l(N,null,{header:g(()=>o[0]||(o[0]=[d("h3",null,"List of grades",-1)])),body:g(()=>[d("div",Sa,[d("div",Pa,[l(wa)])])]),_:1})])],64))}}),Ta={class:"flex flex-wrap gap-2 items-center justify-between"},Ca={class:"w-full h-full cursor-pointer px-3 py-4"},ka={class:"w-full h-full cursor-pointer px-3 py-4"},$a=P({__name:"StudentsDatatable",setup(t){const e=K(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:te.CONTAINS},name:{operator:re.AND,constraints:[{value:null,matchMode:te.STARTS_WITH}]},surname:{operator:re.AND,constraints:[{value:null,matchMode:te.STARTS_WITH}]}}};n();const s=()=>{n()},a=i=>{Te.push(`/main/students/student/${i.data.id}`)};return(i,m)=>{const p=h("Button"),c=h("InputIcon"),u=h("InputText"),r=h("IconField"),f=h("Column"),v=h("DataTable");return y(),S(v,{value:ae(e).students,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":m[2]||(m[2]=_=>o.value=_),filterDisplay:"menu",globalFilterFields:["name","surname"],onRowSelect:a,selectionMode:"single"},{header:g(()=>[d("div",Ta,[l(p,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:m[0]||(m[0]=_=>s())}),l(r,null,{default:g(()=>[l(c,null,{default:g(()=>m[3]||(m[3]=[d("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),l(u,{modelValue:o.value.global.value,"onUpdate:modelValue":m[1]||(m[1]=_=>o.value.global.value=_),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:g(()=>m[4]||(m[4]=[d("div",{class:"w-full h-full px-3 py-4"}," No students found. ",-1)])),default:g(()=>[l(f,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:g(({data:_})=>[d("div",Ca,$(_.name),1)]),filter:g(({filterModel:_})=>[l(u,{modelValue:_.value,"onUpdate:modelValue":x=>_.value=x,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(f,{sortable:"",field:"surname",header:"Surname",filterField:"surname"},{body:g(({data:_})=>[d("div",ka,$(_.surname),1)]),filter:g(({filterModel:_})=>[l(u,{modelValue:_.value,"onUpdate:modelValue":x=>_.value=x,type:"text",placeholder:"Search by Surname"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])}}}),Ma=se($a,[["__scopeId","data-v-2b7d8f3f"]]);function Ye(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.maxPoints=="number"&&typeof t.weight=="number"&&(typeof t.requiredPoints=="number"||t.requiredPoints===null)}function et(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.surname=="string"}function tt(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.minPercentage=="number"}const Ga={class:"flex flex-col gap-1"},qa={class:"flex flex-col gap-1"},Fa={class:"flex flex-col gap-1"},Ba={class:"flex justify-end gap-2 mt-4"},Aa=P({__name:"NewStudentDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=K(),o=Y(),n=ne(t,"visible"),s=w(["Male","Female"]),a=ee({name:"",surname:"",gender:"Male"}),i=w(ie(M.object({name:M.string("Name is required").min(1,"Name is required"),surname:M.string("Surname is required").min(1,"Surname is required"),gender:M.enum(["Male","Female"],"Gender is required")}))),m=()=>{n.value=!1},p=c=>{if(c.valid){const u={name:c.states.name.value,surname:c.states.surname.value,gender:c.states.gender.value};et(u)?(e.addStudent(u),o.add({severity:"success",summary:"Success",detail:"Successfully added student.",life:3e3}),m()):console.error("Wrong data from form!")}};return(c,u)=>{const r=h("InputText"),f=h("FloatLabel"),v=h("Message"),_=h("SelectButton"),x=h("Button"),b=h("Form"),I=h("Dialog");return y(),S(I,{header:"Add Student",visible:n.value,"onUpdate:visible":u[0]||(u[0]=C=>n.value=C),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(b,{resolver:i.value,onSubmit:p,"initial-values":a,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(C=>[d("div",Ga,[l(f,{variant:"on"},{default:g(()=>[l(r,{id:"name",name:"name",variant:"filled",class:"w-60"}),u[1]||(u[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),C.name?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(C.name.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",qa,[l(f,{variant:"on"},{default:g(()=>[l(r,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),u[2]||(u[2]=d("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),C.surname?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(C.surname.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Fa,[l(_,{name:"gender",options:s.value,allowEmpty:!1},null,8,["options"]),C.gender?.invalid?(y(),S(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(C.gender.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Ba,[l(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:m}),l(x,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),Ra={class:"cards-section"},Na={class:"mt-2 mb-4"},La=P({__name:"StudentsListView",setup(t){const e=w(!1);return(o,n)=>{const s=h("Button");return y(),F(J,null,[n[3]||(n[3]=d("h2",{class:"title-section"},"Students",-1)),d("div",Ra,[l(N,null,{header:g(()=>n[2]||(n[2]=[d("h3",null,"List of students",-1)])),body:g(()=>[d("div",Na,[l(s,{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=a=>e.value=!0)})]),l(Ma)]),_:1})]),l(Aa,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=a=>e.value=a)},null,8,["visible"])],64)}}}),Va={class:"flex flex-col gap-1"},Ea={class:"flex flex-col gap-1"},Wa={class:"flex flex-col gap-1"},za={class:"flex justify-end gap-2 mt-4"},ja=P({__name:"EditPersonalDataDialog",props:me({studentId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=K(),o=Y(),n=t,s=ne(t,"visible"),a=w(["Male","Female"]),i=ee({name:"",surname:"",gender:"Male"}),m=w(ie(M.object({name:M.string("Name is required").min(1,"Name is required"),surname:M.string("Surname is required").min(1,"Surname is required"),gender:M.enum(["Male","Female"],"Gender is required")}))),p=()=>{s.value=!1},c=r=>{if(r.valid){const f={name:r.states.name.value,surname:r.states.surname.value,gender:r.states.gender.value};et(f)?(e.updateStudent(n.studentId,f),o.add({severity:"success",summary:"Success",detail:"Successfully edited student.",life:3e3}),p()):console.error("Wrong data from form!")}},u=r=>{if(r){const f=e.getStudent(n.studentId);f&&Object.assign(i,f)}};return oe(s,r=>{u(r)}),(r,f)=>{const v=h("InputText"),_=h("FloatLabel"),x=h("Message"),b=h("SelectButton"),I=h("Button"),C=h("Form"),G=h("Dialog");return y(),S(G,{header:"Edit Student",visible:s.value,"onUpdate:visible":f[0]||(f[0]=E=>s.value=E),modal:""},{default:g(()=>[l(C,{resolver:m.value,onSubmit:c,"initial-values":i,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(E=>[d("div",Va,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"name",name:"name",variant:"filled",class:"w-60"}),f[1]||(f[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),E.name?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(E.name.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Ea,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"surname",name:"surname",variant:"filled",class:"w-60"}),f[2]||(f[2]=d("label",{for:"surname"},"Surname",-1))]),_:1,__:[2]}),E.surname?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(E.surname.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Wa,[l(b,{name:"gender",options:a.value,allowEmpty:!1},null,8,["options"]),E.gender?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(E.gender.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",za,[l(I,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:p}),l(I,{label:"Save",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver","initial-values"])]),_:1},8,["visible"])}}}),Ua={class:"flex flex-wrap justify-evenly pb-6"},Oa={class:"flex flex-col justify-center items-center gap-1"},Ha={class:"flex flex-col justify-center items-center gap-1"},Ja=P({__name:"ActionsStudent",props:{studentId:{}},setup(t){const e=K(),o=_e(),n=Y(),s=Pe(),a=t,i=w(!1),m=()=>{o.require({message:"Are you sure you want to proceed? The student will be deleted.",header:"Delete student",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteStudent(a.studentId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted student",life:3e3}),s.push("/students")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete student",life:3e3})}}})};return(p,c)=>{const u=h("Button");return y(),S(N,null,{header:g(()=>c[3]||(c[3]=[d("h3",null,"Actions",-1)])),body:g(()=>[d("div",Ua,[d("div",Oa,[c[4]||(c[4]=d("h4",null,"Edit student data",-1)),l(u,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:c[0]||(c[0]=r=>i.value=!0)})]),d("div",Ha,[c[5]||(c[5]=d("h4",null,"Delete student",-1)),l(u,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:c[1]||(c[1]=r=>m())})])]),l(ja,{studentId:p.studentId,visible:i.value,"onUpdate:visible":c[2]||(c[2]=r=>i.value=r)},null,8,["studentId","visible"])]),_:1})}}}),Ka={class:"relative w-full h-[90%]"},Xa=P({__name:"ComparisionClass",props:{individualData:{},classData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Individual",data:[e.individualData.weightedAverage,e.individualData.median,e.individualData.standardDeviation,e.individualData.min,e.individualData.max],backgroundColor:"rgba(101, 219, 144, 0.6)",borderColor:"rgb(101, 219, 144)",borderWidth:1},{label:"Class",data:[e.classData.weightedAverage,e.classData.median,e.classData.standardDeviation,e.classData.min,e.classData.max],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0,max:100}}});return O(()=>{o.value=s(),n.value=a()}),(m,p)=>{const c=h("Chart");return y(),S(N,null,{header:g(()=>p[0]||(p[0]=[d("h3",null,"Class Comparison",-1)])),body:g(()=>[d("div",Ka,[l(c,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}});function We(t,e,o,n){const a=t.filter(u=>u.studentId===n).map(u=>{const r=e.find(f=>f.id===u.testId);if(!r)throw new Error(`Test ${u.testId} not found`);return{...r,points:u.points}}),i=a.reduce((u,r)=>u+r.weight,0),p=a.reduce((u,r)=>u+r.points/r.maxPoints*100*r.weight,0)/i,c=o.filter(u=>p>=u.minPercentage).sort((u,r)=>r.minPercentage-u.minPercentage)[0];return c?c.name:"—"}const Qa={class:"flex-1 flex justify-center items-center"},Za={class:"text-[clamp(1rem,5vw,4rem)] leading-none"},Ya={class:"mt-auto"},en=P({__name:"FinalGradeResult",props:{studentId:{}},setup(t){const e=K(),o=j(),n=z(),s=ue(),a=t,i=w(We(n.grades,o.tests,s.gradeThresholds,a.studentId)),m=X(()=>{const p=e.students,c=p.length||1,r=100-p.filter(_=>We(n.grades,o.tests,s.gradeThresholds,_.id)>i.value).length/c*100,f=Math.round(r),v=100-f;return[{label:"Lower or equal",color:"#60a5fa",value:f},{label:"Higher",color:"#fbbf24",value:v}]});return(p,c)=>{const u=h("MeterGroup");return y(),S(N,{class:"flex flex-col"},{header:g(()=>c[0]||(c[0]=[d("h3",null,"Final Grade",-1)])),body:g(()=>[d("div",Qa,[d("h4",Za,$(i.value),1)]),d("div",Ya,[c[1]||(c[1]=d("p",{class:"text-center my-2"},"Compared to other students' grades",-1)),l(u,{value:m.value},null,8,["value"])])]),_:1})}}}),tn=P({__name:"PersonalData",props:{name:{},surname:{},gender:{}},setup(t){const e=t;return(o,n)=>(y(),S(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Personal Data",-1)])),body:g(()=>[d("h4",null,"Name: "+$(e.name),1),d("h4",null,"Surname: "+$(e.surname),1),d("h4",null,"Gender: "+$(e.gender),1)]),_:1}))}}),sn={class:"flex-1 min-w-64 h-fit"},an={class:"relative w-full h-[400px]"},we=4,nn=P({__name:"StudentResults",props:{studentId:{}},setup(t){const e=j(),o=z(),n=t,s=w(),a=w(),i=w(0),m=w(0),p=()=>{const f=o.grades.filter(b=>b.studentId===n.studentId).map(b=>{const I=e.tests.find(G=>G.id===b.testId),C=I?.maxPoints??100;return{testName:I?.name??"Unknown Test",score:b.points,maxScore:C,percentage:b.points/C*100}});m.value=f.length;const v=i.value*we,_=v+we,x=f.slice(v,_);s.value={labels:x.map(b=>b.testName),datasets:[{label:"Score",data:x.map(b=>b.percentage),originalScores:x.map(b=>b.score),maxScores:x.map(b=>b.maxScore),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},c=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:f=>{const v=f.dataset,_=f.dataIndex;return`${v.originalScores[_]} / ${v.maxScores[_]} points (${f.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},u=()=>{p(),c()};O(()=>{u()});const r=f=>{i.value=f.page,p()};return(f,v)=>{const _=h("Chart"),x=h("Paginator");return y(),S(N,null,{header:g(()=>v[0]||(v[0]=[d("h3",null,"Results",-1)])),body:g(()=>[d("div",sn,[d("div",an,[l(_,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),l(x,{rows:we,totalRecords:m.value,page:i.value,onPage:r},null,8,["totalRecords","page"])])]),_:1})}}}),on=P({__name:"StudentResultsDatatable",props:{studentId:{}},setup(t){const e=j(),o=z(),n=t,s=X(()=>o.grades.filter(i=>i.studentId===n.studentId).map(i=>{const m=e.tests.find(f=>f.id===i.testId);if(!m)return null;const p=m.maxPoints,c=m.requiredPoints??0,u=q(i.points/p*100),r=i.points>=c;return{testName:m?.name??"Unknown Test",points:i.points,percentage:u,maxPoints:p,status:r}})),a=i=>i?"success":"warn";return(i,m)=>{const p=h("Column"),c=h("Tag"),u=h("DataTable");return y(),S(N,null,{header:g(()=>m[0]||(m[0]=[d("h3",null,"Results - details",-1)])),body:g(()=>[l(u,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:g(()=>[l(p,{field:"testName",header:"Test"}),l(p,{field:"points",header:"Score"}),l(p,{field:"percentage",header:"Normalized Score (%)"}),l(p,{field:"maxPoints",header:"Max Points"}),l(p,{field:"status",header:"Status"},{body:g(({data:r})=>[l(c,{value:r.status?"passed":"failed",severity:a(r.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),ln=se(on,[["__scopeId","data-v-f81559d1"]]),rn={class:"relative w-full h-[90%]"},dn=P({__name:"StudentPassRate",props:{studentId:{}},setup(t){const e=j(),o=z(),n=t,s=w(),a=w(),i=()=>{let c=0,u=0,r=0,f=0;e.tests.forEach(v=>{const _=o.getGrade(n.studentId,v.id);_?!v.requiredPoints||_.points>=v.requiredPoints?c++:u++:v.isMandatory?r++:f++}),s.value={labels:["Passed","Failed","Not Taken - Mandatory","Not Taken"],datasets:[{data:[c,u,r,f],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(234, 179, 8, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(234, 179, 8)","rgb(156, 163, 175)"],borderWidth:1}]}},m=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}};return O(()=>{i(),m()}),(c,u)=>{const r=h("Chart");return y(),S(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Pass rate",-1)])),body:g(()=>[d("div",rn,[l(r,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),un={class:"flex justify-evenly flex-wrap gap-4 mt-2"},cn=P({__name:"StudentPerformance",props:{individualPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Performance",-1)])),body:g(()=>[d("div",un,[l(Q,{title:"Weighted Average",value:e.individualPerformance.weightedAverage},null,8,["value"]),l(Q,{title:"Median",value:e.individualPerformance.median},null,8,["value"]),l(Q,{title:"Standard Deviation",value:e.individualPerformance.standardDeviation,max:50},null,8,["value"]),l(Q,{title:"Max",value:e.individualPerformance.max},null,8,["value"]),l(Q,{title:"Min",value:e.individualPerformance.min},null,8,["value"])])]),_:1}))}}),mn={class:"cards-section"},pn={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},fn=P({__name:"StudentDetailsView",props:{studentId:{}},setup(t){const e=K(),o=j(),n=z(),s=t,a=w(),i=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),p=()=>{const c=e.getStudent(s.studentId);if(!c)return;const u=n.grades;a.value=c;const r=o.tests.filter(f=>n.grades.some(v=>v.studentId===s.studentId&&v.testId===f.id));i.value={weightedAverage:q(Ue(u,r,s.studentId)),median:q(bs(u,r,s.studentId)),standardDeviation:q(ys(u,r,s.studentId)),min:q(xs(u,s.studentId,r)),max:q(ws(u,s.studentId,r))},m.value={weightedAverage:q(Oe(u,r)),median:q(He(u,r)),standardDeviation:q(Je(u,r)),min:q(Ke(u,r)),max:q(Xe(u,r))}};return O(()=>{p()}),oe(()=>e.students,()=>{const c=e.getStudent(s.studentId);c&&(a.value=c)},{deep:!0}),(c,u)=>(y(),F(J,null,[u[0]||(u[0]=d("h2",{class:"title-section"},"Student Details",-1)),d("div",mn,[a.value?(y(),F("div",pn,[l(tn,{name:a.value.name,surname:a.value.surname,gender:a.value.gender,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","surname","gender"]),l(Ja,{"student-id":c.studentId,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["student-id"]),l(en,{"student-id":c.studentId,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["student-id"]),l(dn,{"student-id":a.value.id,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["student-id"]),l(cn,{"individual-performance":i.value,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["individual-performance"]),l(Xa,{"individual-data":i.value,"class-data":m.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["individual-data","class-data"]),l(nn,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["student-id"]),l(ln,{"student-id":a.value.id,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["student-id"])])):V("",!0)])],64))}}),gn={class:"flex flex-col gap-1"},vn={class:"flex flex-col gap-1"},hn={class:"flex flex-col gap-1"},_n={class:"flex items-center gap-2"},bn={class:"flex flex-col gap-1"},yn={class:"flex items-center gap-2"},xn={class:"flex justify-end gap-2 mt-4"},wn=P({__name:"NewTestDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=j(),o=Y(),n=ne(t,"visible"),s=ee({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),a=()=>{n.value=!1},i=async r=>{r&&(s.weight=1,await he(),s.weight=null)};oe(()=>n.value,r=>{i(r)});const m={name:M.string().min(1,"Name is required"),maxPoints:M.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:M.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:M.boolean()},p=M.discriminatedUnion("isRequired",[M.object({...m,isRequired:M.literal(!0),requiredPoints:M.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(r=>r.requiredPoints<=r.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),M.object({...m,isRequired:M.literal(!1),requiredPoints:M.number().nullable().optional()})]),c=w(ie(p)),u=r=>{if(r.valid){const f={name:r.states.name.value,maxPoints:r.states.maxPoints.value,weight:r.states.weight.value,requiredPoints:r.states.isRequired.value?r.states.requiredPoints.value:null,isMandatory:r.states.isRequired.value?r.states.isMandatory.value:!1};Ye(f)?(e.addTest(f),o.add({severity:"success",summary:"Success",detail:"Successfully added test.",life:3e3}),a()):console.error("Wrong data from form!")}};return(r,f)=>{const v=h("InputText"),_=h("FloatLabel"),x=h("Message"),b=h("InputNumber"),I=h("Checkbox"),C=h("Button"),G=h("Form"),E=h("Dialog");return y(),S(E,{header:"Add Test",visible:n.value,"onUpdate:visible":f[0]||(f[0]=U=>n.value=U),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(G,{initialValues:s,resolver:c.value,onSubmit:u,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(U=>[d("div",gn,[l(_,{variant:"on"},{default:g(()=>[l(v,{id:"name",name:"name",variant:"filled",class:"w-full"}),f[1]||(f[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),U.name?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(U.name.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",vn,[l(_,{variant:"on"},{default:g(()=>[l(b,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),f[2]||(f[2]=d("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),U.maxPoints?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(U.maxPoints.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",hn,[l(_,{variant:"on"},{default:g(()=>[l(b,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1}),f[3]||(f[3]=d("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),U.weight?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(U.weight.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",_n,[l(I,{id:"isRequired",name:"isRequired",binary:""}),f[4]||(f[4]=d("label",{for:"isRequired"},"Required",-1))]),d("div",bn,[l(_,{variant:"on"},{default:g(()=>[l(b,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1,disabled:!U.isRequired?.value},null,8,["disabled"]),f[5]||(f[5]=d("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),U.requiredPoints?.invalid?(y(),S(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(U.requiredPoints.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",yn,[l(I,{id:"isMandatory",name:"isMandatory",binary:""}),f[6]||(f[6]=d("label",{for:"isMandatory"},"Mandatory",-1))]),d("div",xn,[l(C,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),l(C,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),In={class:"flex flex-wrap gap-2 items-center justify-between"},Sn={class:"w-full h-full cursor-pointer px-3 py-4"},Pn={class:"w-full h-full cursor-pointer px-3 py-4"},Dn={class:"w-full h-full cursor-pointer px-3 py-4"},Tn=P({__name:"TestsDatatable",setup(t){const e=j(),o=w({}),n=()=>{o.value={global:{value:null,matchMode:te.CONTAINS},name:{operator:re.AND,constraints:[{value:null,matchMode:te.STARTS_WITH}]},weight:{operator:re.AND,constraints:[{value:null,matchMode:te.EQUALS}]},isMandatory:{value:null,matchMode:te.EQUALS}}};n();const s=()=>{n()},a=m=>{Te.push(`/main/tests/test/${m.data.id}`)},i=m=>m?"success":"info";return(m,p)=>{const c=h("Button"),u=h("InputIcon"),r=h("InputText"),f=h("IconField"),v=h("Column"),_=h("Tag"),x=h("Checkbox"),b=h("DataTable");return y(),S(b,{value:ae(e).tests,class:"custom-table",scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10,filters:o.value,"onUpdate:filters":p[2]||(p[2]=I=>o.value=I),filterDisplay:"menu",globalFilterFields:["name","weight","isMandatory"],onRowSelect:a,selectionMode:"single"},{header:g(()=>[d("div",In,[l(c,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:p[0]||(p[0]=I=>s())}),l(f,null,{default:g(()=>[l(u,null,{default:g(()=>p[3]||(p[3]=[d("i",{class:"pi pi-search"},null,-1)])),_:1,__:[3]}),l(r,{modelValue:o.value.global.value,"onUpdate:modelValue":p[1]||(p[1]=I=>o.value.global.value=I),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:g(()=>p[4]||(p[4]=[d("div",{class:"w-full h-full px-3 py-4"}," No tests found. ",-1)])),default:g(()=>[l(v,{sortable:"",field:"name",header:"Name",filterField:"name"},{body:g(({data:I})=>[d("div",Sn,$(I.name),1)]),filter:g(({filterModel:I})=>[l(r,{modelValue:I.value,"onUpdate:modelValue":C=>I.value=C,type:"text",placeholder:"Search by Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{field:"weight",header:"Weight",filterField:"weight"},{body:g(({data:I})=>[d("div",Pn,$(I.weight),1)]),filter:g(({filterModel:I})=>[l(r,{modelValue:I.value,"onUpdate:modelValue":C=>I.value=C,type:"text",placeholder:"Search by Weight"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{field:"isMandatory",header:"Mandatory",dataType:"boolean"},{body:g(({data:I})=>[d("div",Dn,[l(_,{value:I.isMandatory?"Yes":"No",severity:i(I.isMandatory)},null,8,["value","severity"])])]),filter:g(({filterModel:I})=>[p[5]||(p[5]=d("label",{for:"mandatory-filter",class:"font-bold"}," Mandatory ",-1)),l(x,{modelValue:I.value,"onUpdate:modelValue":C=>I.value=C,indeterminate:I.value===null,binary:"",inputId:"mandatory-filter"},null,8,["modelValue","onUpdate:modelValue","indeterminate"])]),_:1})]),_:1},8,["value","filters"])}}}),Cn=se(Tn,[["__scopeId","data-v-8df28073"]]),kn={class:"cards-section"},$n={class:"mb-4"},Mn=P({__name:"TestsListView",setup(t){const e=w(!1);return(o,n)=>(y(),F(J,null,[n[3]||(n[3]=d("h2",{class:"title-section"},"Tests",-1)),d("div",kn,[l(N,null,{header:g(()=>n[2]||(n[2]=[d("h3",null,"List of tests",-1)])),body:g(()=>[d("div",$n,[l(ae(je),{label:"New",icon:"pi pi-plus",onClick:n[0]||(n[0]=s=>e.value=!0)})]),l(Cn)]),_:1})]),l(wn,{visible:e.value,"onUpdate:visible":n[1]||(n[1]=s=>e.value=s)},null,8,["visible"])],64))}}),Gn={class:"flex flex-col gap-4"},qn={class:"flex flex-col gap-1"},Fn=P({__name:"Export",setup(t){const e=ge(),o=Y(),n=async()=>{try{await e.exportToJson(),o.add({severity:"success",summary:"Success",detail:"Successfully saved data to json.",life:3e3})}catch(s){o.add({severity:"error",summary:"Error",detail:s.message,life:4e3})}};return(s,a)=>{const i=h("Button");return y(),S(N,null,{header:g(()=>a[1]||(a[1]=[d("h3",null,"Export",-1)])),body:g(()=>[d("div",Gn,[d("div",qn,[a[2]||(a[2]=d("h4",null,"Save data",-1)),l(i,{label:"Save",icon:"pi pi-file-export",class:"w-fit",onClick:a[0]||(a[0]=m=>n())})])])]),_:1})}}}),Bn={class:"flex flex-col gap-4 mt-2"},An={class:"flex items-center gap-4"},Rn=P({__name:"GeneralSettings",setup(t){const e=De(),o=w(),n=w([{name:"With dialog",code:"D"},{name:"With input",code:"I"}]);return O(()=>{e.settings?.editWithDialog?o.value={name:"With dialog",code:"D"}:o.value={name:"With input",code:"I"}}),oe(o,()=>{o.value?.code==="D"?e.updateSettings({editWithDialog:!0}):e.updateSettings({editWithDialog:!1})},{deep:!0}),(s,a)=>{const i=h("Select");return y(),S(N,null,{header:g(()=>a[1]||(a[1]=[d("h3",null,"General",-1)])),body:g(()=>[d("div",Bn,[d("div",An,[a[2]||(a[2]=d("h5",null,"Editing grade:",-1)),l(i,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=m=>o.value=m),options:n.value,optionLabel:"name",placeholder:"Select",class:"w-full md:w-56"},null,8,["modelValue","options"])])])]),_:1})}}}),Nn={class:"flex flex-col gap-1"},Ln={class:"flex flex-col gap-1"},Vn={class:"flex justify-end gap-2 mt-4"},En=P({__name:"EditGradeThresholdDialog",props:me({id:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=ue(),o=Y(),n=t,s=ne(t,"visible"),a=ee({id:"",name:"",minPercentage:null}),i=w(ie(M.object({name:M.string("Grade name is required").min(1,"Grade name is required"),minPercentage:M.number("Min percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),m=async u=>{if(u){const r=e.getGradeThreshold(n.id);r&&Object.assign(a,r),await he(),Object.assign(a,{name:"",minPercentage:null})}};oe(s,u=>{m(u)});const p=()=>{s.value=!1},c=u=>{if(u.valid){const r={name:u.states.name.value,minPercentage:u.states.minPercentage.value};tt(r)?(e.updateGradeThreshold(n.id,r),o.add({severity:"success",summary:"Success",detail:"Successfully edited grade threshold.",life:3e3}),s.value=!1):console.error("Wrong data from form")}};return(u,r)=>{const f=h("InputText"),v=h("FloatLabel"),_=h("Message"),x=h("InputNumber"),b=h("Button"),I=h("Form"),C=h("Dialog");return y(),S(C,{header:"Edit Grade Threshold",visible:s.value,"onUpdate:visible":r[0]||(r[0]=G=>s.value=G),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[l(I,{initialValues:a,resolver:i.value,onSubmit:c,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(G=>[d("div",Nn,[l(v,{variant:"on"},{default:g(()=>[l(f,{id:"name",name:"name",variant:"filled",class:"w-full"}),r[1]||(r[1]=d("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),G.name?.invalid?(y(),S(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(G.name.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Ln,[l(v,{variant:"on"},{default:g(()=>[l(x,{id:"minPercentage",name:"minPercentage",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:0,step:1}),r[2]||(r[2]=d("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),G.minPercentage?.invalid?(y(),S(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(G.minPercentage.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Vn,[l(b,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:p}),l(b,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),Wn={class:"w-full px-3 py-4"},zn={class:"w-full px-3 py-4"},jn={class:"flex gap-3 w-full justify-center min-h-1 px-3 py-1"},Un=P({__name:"GradingScaleDatatable",setup(t){const e=ue(),o=_e(),n=Y(),s=w(""),a=w(!1),i=X(()=>[...e.gradeThresholds].sort((c,u)=>u.minPercentage-c.minPercentage)),m=c=>{s.value=c,a.value=!0},p=c=>{o.require({message:"Are you sure you want to proceed? The grade threshold will be deleted.",header:"Delete grade threshold",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteGradeThreshold(c),n.add({severity:"success",summary:"Success",detail:"Succesfully deleted grade threshold",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete grade threshold",life:3e3})}}})};return(c,u)=>{const r=h("Column"),f=h("Button"),v=h("DataTable");return y(),F(J,null,[l(v,{value:i.value,scrollable:"",class:"custom-table"},{default:g(()=>[l(r,{field:"name",header:"Grade"},{body:g(({data:_})=>[d("div",Wn,$(_.name),1)]),_:1}),l(r,{field:"minPercentage",header:"Percentage"},{body:g(({data:_})=>[d("div",zn,$(_.minPercentage),1)]),_:1}),l(r,{field:"actions",header:"Actions",class:"w-40"},{body:g(({data:_})=>[d("div",jn,[l(f,{icon:"pi pi-file-edit",rounded:"",severity:"info","aria-label":"Edit",onClick:x=>m(_.id)},null,8,["onClick"]),l(f,{icon:"pi pi-times-circle",rounded:"",severity:"danger","aria-label":"Delete",onClick:x=>p(_.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"]),l(En,{id:s.value,visible:a.value,"onUpdate:visible":u[0]||(u[0]=_=>a.value=_)},null,8,["id","visible"])],64)}}}),On=se(Un,[["__scopeId","data-v-71cbc1fc"]]);function Hn(){return[{name:"Polish University",gradethresholds:[{name:"5.0",minPercentage:90},{name:"4.5",minPercentage:80},{name:"4.0",minPercentage:70},{name:"3.5",minPercentage:60},{name:"3.0",minPercentage:50},{name:"2.0",minPercentage:0}]},{name:"Polish",gradethresholds:[{name:"6",minPercentage:98},{name:"5",minPercentage:90},{name:"4",minPercentage:75},{name:"3",minPercentage:50},{name:"2",minPercentage:30},{name:"1",minPercentage:0}]},{name:"Japanese University",gradethresholds:[{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"Japanese",gradethresholds:[{name:"秀",minPercentage:90},{name:"優",minPercentage:80},{name:"良",minPercentage:70},{name:"可",minPercentage:60},{name:"認",minPercentage:50},{name:"不可",minPercentage:0}]},{name:"UK GCSE/A-Level",gradethresholds:[{name:"A*",minPercentage:90},{name:"A",minPercentage:80},{name:"B",minPercentage:70},{name:"C",minPercentage:60},{name:"D",minPercentage:50},{name:"E",minPercentage:40},{name:"F",minPercentage:30},{name:"G",minPercentage:20},{name:"U",minPercentage:0}]}]}const Jn=P({__name:"SelectSystemDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=ue(),o=Y(),n=ne(t,"visible"),s=ee(Hn()),a=w(ie(Me({system:gt([Me({name:ht().min(1,"System is required.")}),vt().refine(p=>!1,{message:"System is required."})])}))),i=()=>{n.value=!1},m=p=>{p.valid&&p.states.system&&(e.replaceGradeThresholds(p.states.system.value.gradethresholds),o.add({severity:"success",summary:"Success",detail:"Successfully changed grading system.",life:3e3}),i())};return(p,c)=>{const u=h("Listbox"),r=h("Message"),f=h("Button"),v=h("Form"),_=h("Dialog");return y(),S(_,{header:"Select Grading system",visible:n.value,"onUpdate:visible":c[0]||(c[0]=x=>n.value=x),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[l(v,{resolver:a.value,onSubmit:m,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(x=>[l(u,{name:"system",options:s,optionLabel:"name",virtualScrollerOptions:{itemSize:20},class:"w-full",listStyle:"height:250px",striped:"",fluid:""},null,8,["options"]),x.system?.invalid?(y(),S(r,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(x.system.error?.message),1)]),_:2},1024)):V("",!0),l(f,{label:"Select",type:"submit",autofocus:"",disabled:!x.system?.value},null,8,["disabled"])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),Kn={class:"flex flex-col gap-1"},Xn={class:"flex flex-col gap-1"},Qn={class:"flex justify-end gap-2 mt-4"},Zn=P({__name:"NewGradeThresholdDialog",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:["update:visible"],setup(t){const e=ue(),o=Y(),n=ne(t,"visible"),s=w(ie(M.object({name:M.string("Grade name is required").min(1,"Grade name is required"),minPercentage:M.number("Min Percentage is required").min(0,"Min percentage cannot be less than 0").max(100,"Max percentage cannot be greater than 100")}))),a=()=>{n.value=!1},i=m=>{if(m.valid){const p={name:m.states.name.value,minPercentage:m.states.minPercentage.value};tt(p)?(e.addGradeThreshold(p),o.add({severity:"success",summary:"Success",detail:"Successfully added grade threshold.",life:3e3}),a()):console.error("Wrong data from form!")}};return(m,p)=>{const c=h("InputText"),u=h("FloatLabel"),r=h("Message"),f=h("InputNumber"),v=h("Button"),_=h("Form"),x=h("Dialog");return y(),S(x,{header:"New Grade Threshold",visible:n.value,"onUpdate:visible":p[0]||(p[0]=b=>n.value=b),modal:!0,draggable:!1,class:"w-80"},{default:g(()=>[l(_,{resolver:s.value,onSubmit:i,validateOnBlur:!0,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(b=>[d("div",Kn,[l(u,{variant:"on"},{default:g(()=>[l(c,{id:"name",name:"name",variant:"filled",class:"w-full"}),p[1]||(p[1]=d("label",{for:"name"},"Grade",-1))]),_:1,__:[1]}),b.name?.invalid?(y(),S(r,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(b.name.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Xn,[l(u,{variant:"on"},{default:g(()=>[l(f,{id:"minPercentage",name:"minPercentage",class:"w-full",variant:"filled",min:0,max:100,step:1}),p[2]||(p[2]=d("label",{for:"minPercentage"},"Min Percentage",-1))]),_:1,__:[2]}),b.minPercentage?.invalid?(y(),S(r,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(b.minPercentage.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",Qn,[l(v,{label:"Cancel",variant:"outlined",severity:"secondary",icon:"pi pi-times",onClick:a}),l(v,{label:"Add",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["resolver"])]),_:1},8,["visible"])}}}),Yn={class:"mt-2 mb-4 flex justify-between"},eo=P({__name:"GradingThresholds",setup(t){const e=w(!1),o=w(!1);return(n,s)=>{const a=h("Button");return y(),S(N,null,{header:g(()=>s[4]||(s[4]=[d("h3",null,"Grading thresholds",-1)])),body:g(()=>[d("div",Yn,[l(a,{label:"New",icon:"pi pi-plus",onClick:s[0]||(s[0]=i=>o.value=!0)}),l(a,{variant:"outlined",label:"Select System",icon:"pi pi-graduation-cap",onClick:s[1]||(s[1]=i=>e.value=!0)})]),l(On),l(Jn,{visible:e.value,"onUpdate:visible":s[2]||(s[2]=i=>e.value=i)},null,8,["visible"]),l(Zn,{visible:o.value,"onUpdate:visible":s[3]||(s[3]=i=>o.value=i)},null,8,["visible"])]),_:1})}}}),to={class:"flex flex-col gap-4"},so={class:"flex flex-col gap-1"},ao={class:"flex flex-col gap-1"},no=P({__name:"Import",setup(t){const e=ge(),o=_e(),n=Y(),s=w(null),a=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load demo data",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{try{await e.loadDemoData(),n.add({severity:"success",summary:"Success",detail:"Successfully loaded demo data",life:3e3})}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to load demo data",life:3e3})}}})},i=()=>{o.require({message:"Are you sure you want to proceed? Previous data will be deleted.",header:"Load data from device",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{label:"Load",icon:"pi pi-check"},accept:async()=>{s.value?.click()}})},m=async p=>{const c=p.target;if(!c.files?.length){n.add({severity:"info",summary:"Info",detail:"No file selected",life:3e3});return}const u=c.files[0];try{const r=await u.text();await e.importFromJson(r),n.add({severity:"success",summary:"Success",detail:"Successfully loaded data",life:3e3})}catch{n.add({severity:"error",summary:"Error",detail:"Failed to load data",life:3e3})}finally{c.value=""}};return(p,c)=>{const u=h("Button");return y(),S(N,null,{header:g(()=>c[2]||(c[2]=[d("h3",null,"Import",-1)])),body:g(()=>[d("div",to,[d("div",so,[c[3]||(c[3]=d("h4",null,"Load demo data",-1)),l(u,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:c[0]||(c[0]=r=>a())})]),d("div",ao,[c[4]||(c[4]=d("h4",null,"Load data from device",-1)),l(u,{label:"Load",icon:"pi pi-file-import",class:"w-fit",onClick:c[1]||(c[1]=r=>i())}),d("input",{type:"file",ref_key:"fileInput",ref:s,accept:"application/json",class:"hidden",onChange:m},null,544)])])]),_:1})}}}),oo={class:"cards-section"},io={class:"grid grid-cols-1 lg:grid-cols-2 auto-rows-auto w-full"},lo=P({__name:"SettingsView",setup(t){return(e,o)=>(y(),F(J,null,[o[0]||(o[0]=d("h2",{class:"title-section"},"Settings",-1)),d("div",oo,[d("div",io,[l(Rn,{class:"lg:col-span-2"}),l(eo,{class:"lg:col-span-2 row-start-2"}),l(no,{class:"lg:row-start-3"}),l(Fn,{class:"lg:row-start-3"})])])],64))}}),ro={class:"flex flex-col gap-1"},uo={class:"flex flex-col gap-1"},co={class:"flex flex-col gap-1"},mo={class:"flex items-center gap-2"},po={class:"flex flex-col gap-1"},fo={class:"flex items-center gap-2"},go={class:"flex justify-end gap-2 mt-4"},vo=P({__name:"EditTestDialog",props:me({testId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:me(["submit"],["update:visible"]),setup(t,{emit:e}){const o=j(),n=t,s=ne(t,"visible"),a=e,i=ee({name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1}),m={name:M.string().min(1,"Name is required"),maxPoints:M.number({message:"Max points is required"}).min(1,"Max points must be at least 1"),weight:M.number({message:"Weight is required"}).min(0,"Weight must be at least 0"),isMandatory:M.boolean()},p=M.discriminatedUnion("isRequired",[M.object({...m,isRequired:M.literal(!0),requiredPoints:M.number({message:"Min points is required"}).min(0,"Min points must be at least 0")}).refine(v=>v.requiredPoints<=v.maxPoints,{message:"Min points cannot be greater than max points",path:["requiredPoints"]}),M.object({...m,isRequired:M.literal(!1),requiredPoints:M.number().nullable().optional()})]),c=w(ie(p)),u=()=>{s.value=!1},r=v=>{if(v.valid){const _={name:v.states.name.value,maxPoints:v.states.maxPoints.value,weight:v.states.weight.value,requiredPoints:v.states.isRequired.value?v.states.requiredPoints.value:null,isMandatory:v.states.isRequired.value?v.states.isMandatory.value:!1};Ye(_)?a("submit",_):console.error("Wrong data from form!")}},f=async v=>{if(v){const _=o.getTest(n.testId);_&&(Object.assign(i,_),i.isRequired=i.requiredPoints!==null),await he(),Object.assign(i,{name:"",maxPoints:null,weight:null,isRequired:!1,requiredPoints:null,isMandatory:!1})}};return oe(()=>s.value,v=>{f(v)}),(v,_)=>{const x=h("InputText"),b=h("FloatLabel"),I=h("Message"),C=h("InputNumber"),G=h("Checkbox"),E=h("Button"),U=h("Form"),ce=h("Dialog");return y(),S(ce,{header:"Edit test",visible:s.value,"onUpdate:visible":_[0]||(_[0]=B=>s.value=B),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(U,{initialValues:i,resolver:c.value,onSubmit:r,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(B=>[d("div",ro,[l(b,{variant:"on"},{default:g(()=>[l(x,{id:"name",name:"name",variant:"filled",class:"w-full"}),_[1]||(_[1]=d("label",{for:"name"},"Name",-1))]),_:1,__:[1]}),B.name?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(B.name.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",uo,[l(b,{variant:"on"},{default:g(()=>[l(C,{id:"maxPoints",name:"maxPoints",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),_[2]||(_[2]=d("label",{for:"maxPoints"},"Max points",-1))]),_:1,__:[2]}),B.maxPoints?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(B.maxPoints.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",co,[l(b,{variant:"on"},{default:g(()=>[l(C,{id:"weight",name:"weight",class:"w-full",variant:"filled",min:0,max:1e4,maxFractionDigits:1,step:.1}),_[3]||(_[3]=d("label",{for:"weight"},"Weight",-1))]),_:1,__:[3]}),B.weight?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(B.weight.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",mo,[l(G,{id:"isRequired",name:"isRequired",binary:""}),_[4]||(_[4]=d("label",{for:"isRequired"},"Required",-1))]),d("div",po,[l(b,{variant:"on"},{default:g(()=>[l(C,{id:"requiredPoints",name:"requiredPoints",class:"w-full",variant:"filled",min:0,max:100,maxFractionDigits:1,step:.1,disabled:!B.isRequired?.value},null,8,["disabled"]),_[5]||(_[5]=d("label",{for:"requiredPoints"},"Min points",-1))]),_:2,__:[5]},1024),B.requiredPoints?.invalid?(y(),S(I,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(B.requiredPoints.error?.message),1)]),_:2},1024)):V("",!0)]),d("div",fo,[l(G,{id:"isMandatory",name:"isMandatory",binary:""}),_[6]||(_[6]=d("label",{for:"isMandatory"},"Mandatory",-1))]),d("div",go,[l(E,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:u}),l(E,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),ho={class:"flex gap-1"},_o={class:"flex gap-1"},bo={class:"flex gap-1"},yo={class:"flex justify-end gap-2 mt-4"},xo=P({__name:"ChangeGradesDialog",props:me({testId:{},editedTest:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=Y(),o=j(),n=z(),s=t,a=ne(t,"visible"),i=ee({option:"Reduce"}),m=w(ie(M.object({ingredient:M.string().min(1,{message:"Option is required."})}))),p=()=>{a.value=!1},c=async u=>{if(u.valid){let r=!1;const f=u.states.option.value;if(console.log(f),console.log(s.editedTest),console.log(o.getTest(s.testId)),f==="Reduce")await n.reduceGradesByTest(s.testId,s.editedTest.maxPoints),r=!0;else if(f==="Normalize"){const v=o.getTest(s.testId);v?(await n.normalizeGradesByTest(s.testId,v.maxPoints,s.editedTest.maxPoints),r=!0):console.error("Test doesn't exists!")}else f==="Delete"?(await n.deleteGradesByTest(s.testId),r=!0):console.error("Wrong data from form!");r&&(await o.updateTest(s.testId,s.editedTest),a.value=!1,e.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))}};return(u,r)=>{const f=h("RadioButton"),v=h("RadioButtonGroup"),_=h("Message"),x=h("Button"),b=h("Form"),I=h("Dialog");return y(),S(I,{header:"Change grades",visible:a.value,"onUpdate:visible":r[0]||(r[0]=C=>a.value=C),modal:!0,draggable:!1,class:"w-70"},{default:g(()=>[l(b,{initialValues:i,resolver:m.value,onSubmit:c,class:"flex flex-col gap-3 mt-2 w-full"},{default:g(C=>[l(v,{name:"option",class:"flex flex-col gap-3 w-full"},{default:g(()=>[d("div",ho,[l(f,{inputId:"reduce",value:"Reduce"}),r[1]||(r[1]=d("label",{for:"reduce"},"Reduce grades to new maximum points",-1))]),d("div",_o,[l(f,{inputId:"normalize",value:"Normalize"}),r[2]||(r[2]=d("label",{for:"normalize"},"Normalize grades to new maximum points",-1))]),d("div",bo,[l(f,{inputId:"delete",value:"Delete"}),r[3]||(r[3]=d("label",{for:"delete"},"Delete all grades",-1))])]),_:1}),C.option?.invalid?(y(),S(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:g(()=>[W($(C.option.error?.message),1)]),_:2},1024)):V("",!0),d("div",yo,[l(x,{label:"Cancel",severity:"secondary",variant:"outlined",icon:"pi pi-times",onClick:p}),l(x,{label:"Edit",icon:"pi pi-check",type:"submit",autofocus:""})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"])}}}),wo={class:"flex flex-wrap justify-evenly pb-6"},Io={class:"flex flex-col justify-center items-center gap-1"},So={class:"flex flex-col justify-center items-center gap-1"},Po=P({__name:"ActionsTest",props:{testId:{},maxPoints:{}},setup(t){const e=j(),o=_e(),n=Y(),s=Pe(),a=t,i=w(!1),m=w(!1),p=ee({name:"",maxPoints:1,weight:0,requiredPoints:null,isMandatory:!1}),c=()=>{o.require({message:"Are you sure you want to proceed? The test will be deleted.",header:"Delete test",icon:"pi pi-exclamation-triangle",rejectProps:{severity:"secondary",label:"Cancel",icon:"pi pi-times",outlined:!0},acceptProps:{severity:"danger",label:"Delete",icon:"pi pi-times-circle"},accept:async()=>{try{await e.deleteTest(a.testId),n.add({severity:"success",summary:"Success",detail:"Successfully deleted test",life:3e3}),s.push("/tests")}catch{n.add({severity:"danger",summary:"Error",detail:"Failed to delete test",life:3e3})}}})},u=r=>{Object.assign(p,r),i.value=!1,p.maxPoints!==a.maxPoints?m.value=!0:(e.updateTest(a.testId,p),n.add({severity:"success",summary:"Success",detail:"Successfully edited test",life:3e3}))};return(r,f)=>{const v=h("Button");return y(),S(N,null,{header:g(()=>f[4]||(f[4]=[d("h3",null,"Actions",-1)])),body:g(()=>[d("div",wo,[d("div",Io,[f[5]||(f[5]=d("h4",null,"Edit test data",-1)),l(v,{label:"Edit",icon:"pi pi-file-edit",class:"w-28",onClick:f[0]||(f[0]=_=>i.value=!0)})]),d("div",So,[f[6]||(f[6]=d("h4",null,"Delete test",-1)),l(v,{label:"Delete",icon:"pi pi pi-times-circle",severity:"danger",class:"w-28",onClick:f[1]||(f[1]=_=>c())})])]),l(vo,{"test-id":r.testId,visible:i.value,"onUpdate:visible":f[2]||(f[2]=_=>i.value=_),onSubmit:u},null,8,["test-id","visible"]),l(xo,{"test-id":r.testId,editedTest:p,visible:m.value,"onUpdate:visible":f[3]||(f[3]=_=>m.value=_)},null,8,["test-id","editedTest","visible"])]),_:1})}}}),Do=P({__name:"InfoData",props:{name:{},weight:{},requiredPoints:{},maxPoints:{},isMandatory:{type:Boolean}},setup(t){const e=t,o=n=>n?"success":"info";return(n,s)=>{const a=h("Tag");return y(),S(N,null,{header:g(()=>s[0]||(s[0]=[d("h3",null,"Info data",-1)])),body:g(()=>[d("h4",null,"Name: "+$(e.name),1),d("h4",null,"Weight: "+$(e.weight),1),d("h4",null,"Required points: "+$(e.requiredPoints??"-"),1),d("h4",null,"Max points: "+$(e.maxPoints),1),d("h4",null,[s[1]||(s[1]=W("Mandatory: ")),l(a,{value:n.isMandatory?"Yes":"No",severity:o(n.isMandatory)},null,8,["value","severity"])])]),_:1})}}}),To={class:"flex justify-evenly flex-wrap gap-4 mt-2"},Co=P({__name:"TestPerformance",props:{maxPoints:{},classPerformance:{}},setup(t){const e=t;return(o,n)=>(y(),S(N,null,{header:g(()=>n[0]||(n[0]=[d("h3",null,"Performance",-1)])),body:g(()=>[d("div",To,[l(Q,{title:"Weighted Average",value:e.classPerformance.weightedAverage,max:o.maxPoints},null,8,["value","max"]),l(Q,{title:"Median",value:e.classPerformance.median,max:o.maxPoints},null,8,["value","max"]),l(Q,{title:"Standard Deviation",value:e.classPerformance.standardDeviation,max:o.maxPoints/2},null,8,["value","max"]),l(Q,{title:"Max",value:e.classPerformance.max,max:o.maxPoints},null,8,["value","max"]),l(Q,{title:"Min",value:e.classPerformance.min,max:o.maxPoints},null,8,["value","max"])])]),_:1}))}}),ko={class:"relative w-full h-[90%]"},$o=P({__name:"TestPassRate",props:{testId:{},requiredPoints:{}},setup(t){const e=K(),o=z(),n=t,s=w(),a=w(),i=()=>{let c=0,u=0,r=0;return e.students.filter(f=>{const v=o.getGrade(f.id,n.testId);v?n.requiredPoints===null||v.points>=n.requiredPoints?c++:u++:r++}),{labels:["Passed","Failed","Not Taken"],datasets:[{data:[c,u,r],backgroundColor:["rgba(34, 197, 94, 0.6)","rgba(239, 68, 68, 0.6)","rgba(156, 163, 175, 0.6)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(156, 163, 175)"],borderWidth:1}]}},m=()=>({indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{align:"center",position:"bottom",labels:{usePointStyle:!0}}},layout:{padding:10},scales:{x:{display:!1},y:{display:!1}}}),p=()=>{s.value=i(),a.value=m()};return O(()=>{p()}),(c,u)=>{const r=h("Chart");return y(),S(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Pass Rate",-1)])),body:g(()=>[d("div",ko,[l(r,{type:"doughnut",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),Mo={class:"relative w-full h-[90%]"},Go=P({__name:"TestPassRateByGender",props:{testId:{},requiredPoints:{}},setup(t){const e=K(),o=z(),n=t,s=w(),a=w(),i=()=>{const c=["Male","Female"],u={};c.forEach(r=>u[r]={passed:0,failed:0,notTaken:0}),e.students.forEach(r=>{const f=o.getGrade(r.id,n.testId),v=r.gender;f?n.requiredPoints===null||f.points>=n.requiredPoints?u[v].passed++:u[v].failed++:u[v].notTaken++}),s.value={labels:["Passed","Failed","Not taken"],datasets:[{label:"Male",data:[u.Male.passed,u.Male.failed,u.Male.notTaken],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1},{label:"Female",data:[u.Female.passed,u.Female.failed,u.Female.notTaken],backgroundColor:"rgba(6, 182, 212, 0.6)",borderColor:"rgb(6, 182, 212)",borderWidth:1}]}},m=()=>{a.value={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}},p=()=>{i(),m()};return O(()=>{p()}),(c,u)=>{const r=h("Chart");return y(),S(N,null,{header:g(()=>u[0]||(u[0]=[d("h3",null,"Pass rate by gender",-1)])),body:g(()=>[d("div",Mo,[l(r,{type:"bar",data:s.value,options:a.value,class:"w-full h-full max-h-[360px]"},null,8,["data","options"])])]),_:1})}}}),qo={class:"relative w-full h-[90%]"},Fo=P({__name:"TestPerformanceByGender",props:{maleData:{},femaleData:{}},setup(t){const e=t,o=w(),n=w(),s=()=>({labels:["Weighted Average","Median","Standard Deviation","Min","Max"],datasets:[{label:"Male",data:[e.maleData.weightedAverage,e.maleData.median,e.maleData.standardDeviation,e.maleData.min,e.maleData.max],backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"Female",data:[e.femaleData.weightedAverage,e.femaleData.median,e.femaleData.standardDeviation,e.femaleData.min,e.femaleData.max],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]}),a=()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{min:0}}});return O(()=>{o.value=s(),n.value=a()}),(m,p)=>{const c=h("Chart");return y(),S(N,null,{header:g(()=>p[0]||(p[0]=[d("h3",null,"Performance by gender",-1)])),body:g(()=>[d("div",qo,[l(c,{type:"bar",data:o.value,options:n.value,class:"w-full h-full"},null,8,["data","options"])])]),_:1})}}}),Bo=P({__name:"TestResultsDatatable",props:{testId:{},requiredPoints:{},maxPoints:{}},setup(t){const e=K(),o=z(),n=t,s=X(()=>o.grades.filter(i=>i.testId===n.testId).map(i=>{const m=e.students.find(u=>u.id===i.studentId);if(!m)return null;const p=q(i.points/n.maxPoints*100),c=n.requiredPoints!==null?i.points>=n.requiredPoints:!0;return{name:m.name,surname:m.surname,points:i.points,percentage:p,status:c}})),a=i=>i?"success":"warn";return(i,m)=>{const p=h("Column"),c=h("Tag"),u=h("DataTable");return y(),S(N,null,{header:g(()=>m[0]||(m[0]=[d("h3",null,"Results - details",-1)])),body:g(()=>[l(u,{value:s.value,scrollable:"",removableSort:"",paginator:"",paginatorPosition:"bottom",rows:10},{default:g(()=>[l(p,{field:"name",header:"Name"}),l(p,{field:"surname",header:"Surname"}),l(p,{field:"points",header:"Score"}),l(p,{field:"percentage",header:"Normalized Score (%)"}),l(p,{field:"status",header:"Status"},{body:g(({data:r})=>[l(c,{value:r.status?"passed":"failed",severity:a(r.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])]),_:1})}}}),Ao=se(Bo,[["__scopeId","data-v-67e41818"]]),Ro={class:"flex-1 min-w-64 h-fit"},No={class:"relative w-full h-[400px]"},Ie=4,Lo=P({__name:"TestResults",props:{testId:{},maxScore:{}},setup(t){const e=K(),o=z(),n=t,s=w(),a=w(),i=w(0),m=w(0),p=()=>{const f=o.grades.filter(b=>b.testId===n.testId).map(b=>{const I=e.students.find(C=>C.id===b.studentId);return{name:I?.name,surname:I?.surname,score:b.points,percentage:b.points/n.maxScore*100}});m.value=f.length;const v=i.value*Ie,_=v+Ie,x=f.slice(v,_);s.value={labels:x.map(b=>`${b.name} ${b.surname}`),datasets:[{label:"Score",data:x.map(b=>b.percentage),scores:x.map(b=>b.score),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]}},c=()=>{a.value={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:f=>{const v=f.dataset,_=f.dataIndex;return`${v.scores[_]} / ${n.maxScore} points (${f.formattedValue}%)`}}}},scales:{x:{min:0,max:100}}}},u=()=>{p(),c()};O(()=>{u()});const r=f=>{i.value=f.page,p()};return(f,v)=>{const _=h("Chart"),x=h("Paginator");return y(),S(N,null,{header:g(()=>v[0]||(v[0]=[d("h3",null,"Results",-1)])),body:g(()=>[d("div",Ro,[d("div",No,[l(_,{type:"bar",data:s.value,options:a.value,class:"w-full h-full"},null,8,["data","options"])]),l(x,{rows:Ie,totalRecords:m.value,page:i.value,onPage:r},null,8,["totalRecords","page"])])]),_:1})}}}),Vo={class:"cards-section"},Eo={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 auto-rows-auto w-full"},Wo=P({__name:"TestDetailsView",props:{testId:{}},setup(t){const e=K(),o=j(),n=z(),s=t,a=w(),i=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),m=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),p=w({weightedAverage:0,median:0,standardDeviation:0,min:0,max:0}),c=()=>{const u=o.getTest(s.testId);if(!u)return;const r=e.students,f=n.grades;a.value=u,i.value={weightedAverage:q(fs(f,s.testId)),median:q(gs(f,s.testId)),standardDeviation:q(vs(f,s.testId)),min:q(hs(f,s.testId)),max:q(_s(f,s.testId))},m.value={weightedAverage:q(ve(f,r,s.testId,"Male")),median:q(Fe(f,r,s.testId,"Male")),standardDeviation:q(Be(f,r,s.testId,"Male")),min:q(Ae(f,r,s.testId,"Male")),max:q(Re(f,r,s.testId,"Male"))},p.value={weightedAverage:q(ve(f,r,s.testId,"Female")),median:q(Fe(f,r,s.testId,"Female")),standardDeviation:q(Be(f,r,s.testId,"Female")),min:q(Ae(f,r,s.testId,"Female")),max:q(Re(f,r,s.testId,"Female"))}};return O(()=>{c()}),oe(()=>o.tests,()=>{c()},{deep:!0}),(u,r)=>(y(),F(J,null,[r[0]||(r[0]=d("h2",{class:"title-section"},"Test Details",-1)),d("div",Vo,[a.value?(y(),F("div",Eo,[l(Do,{name:a.value?.name,weight:a.value?.weight,"required-points":a.value?.requiredPoints,"max-points":a.value?.maxPoints,"is-mandatory":a.value?.isMandatory,class:"sm:col-span-2 lg:col-span-2"},null,8,["name","weight","required-points","max-points","is-mandatory"]),l(Po,{"test-id":u.testId,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-1 lg:row-start-2"},null,8,["test-id","max-points"]),l($o,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-3 lg:row-start-1"},null,8,["test-id","required-points"]),l(Go,{"test-id":a.value.id,"required-points":a.value.requiredPoints,class:"lg:row-span-2 lg:col-start-4 lg:row-start-1"},null,8,["test-id","required-points"]),l(Co,{"class-performance":i.value,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-3"},null,8,["class-performance","max-points"]),l(Fo,{"male-data":m.value,"female-data":p.value,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-3"},null,8,["male-data","female-data"]),l(Lo,{"test-id":a.value.id,"max-score":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:row-start-4"},null,8,["test-id","max-score"]),l(Ao,{"test-id":a.value.id,"required-points":a.value.requiredPoints,"max-points":a.value.maxPoints,class:"sm:col-span-2 lg:col-span-2 lg:col-start-3 lg:row-start-4"},null,8,["test-id","required-points","max-points"])])):V("",!0)])],64))}}),zo={},jo={class:"p-4 w-full bg-footer-background justify-center text-center"};function Uo(t,e){return y(),F("footer",jo,e[0]||(e[0]=[d("p",null,[W("Project hosted on "),d("a",{href:"https://github.com/RobertPintera/Class-register",class:"hover:text-blue-600 underline"},"Github")],-1)]))}const Oo=se(zo,[["render",Uo]]),Ho={class:"pt-16"},Jo=P({__name:"HomeLayout",setup(t){return(e,o)=>{const n=h("router-view");return y(),F(J,null,[l(Ze,{"is-toggle-sidebar":!1}),d("div",Ho,[l(n)]),l(Oo)],64)}}}),Ko={},Xo={class:"px-12 lg:px-48 py-16 w-full flex flex-col gap-8 items-center justify-center bg-secondary-background"};function Qo(t,e){return y(),F("div",Xo,e[0]||(e[0]=[_t('<h1>Features</h1><div class="flex flex-wrap justify-center gap-y-6"><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Data management</h2><h4>Manage the full set of student and test information: create, edit, delete, and organize data in one convenient place.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Analysis of results</h2><h4>View clear statistics and reports to quickly assess individual student progress and overall class performance.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Browser data storage</h2><h4>All data is stored locally in the browser (IndexedDB), enabling offline use.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Flexible settings</h2><h4>Customize how grades are entered and edited to fit your workflow.</h4></div><div class="w-full sm:w-1/2 lg:w-1/3 px-8 mb-8 text-center"><h2>Export and import</h2><h4>Easily transfer data between devices by importing or exporting complete information in .json format.</h4></div></div>',2)]))}const Zo=se(Ko,[["render",Qo]]),Yo={class:"py-48 px-12 lg:px-48 w-full flex flex-col justify-center items-center gap-5 text-center"},ei=P({__name:"MainSection",setup(t){const e=Pe(),o=()=>{e.push("/main/dashboard")};return(n,s)=>{const a=h("Button");return y(),F("div",Yo,[s[0]||(s[0]=d("h1",{class:"text-6xl"},"Class register",-1)),s[1]||(s[1]=d("h2",null,"The offline tool to manage student grades and track their progress.",-1)),l(a,{label:"Start to use",size:"large",onClick:o})])}}}),ti={class:"relative flex justify-center gap-10 w-full"},si={class:"flex gap-8"},ai=["src","alt"],Se=32,ni=P({__name:"Carousel",setup(t){const e=[{alt:"Dashboard",src:new URL("/Class-register/assets/preview_dashboard-CRp4RkkV.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_dashboard_dark-CEzZsSK2.png",import.meta.url).href},{alt:"StudentDetails",src:new URL("/Class-register/assets/preview_studentDetails_1-PAPteEDK.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_studentDetails_1_dark-CHtWqfiZ.png",import.meta.url).href},{alt:"TestDetails",src:new URL("/Class-register/assets/preview_testDetails_1-BkK1pp58.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_testDetails_1_dark-jbl5XXj_.png",import.meta.url).href},{alt:"TestsList",src:new URL("/Class-register/assets/preview_testsList-nvfPi89z.png",import.meta.url).href,srcDark:new URL("/Class-register/assets/preview_testsList_dark-CSzK1hvS.png",import.meta.url).href}],o=Qe(),n=w(),s=w(0),a=w([]),i=w(0),m=w(0),p=()=>{s.value=(s.value+1)%a.value.length,ce()},c=()=>{s.value=(s.value-1+a.value.length)%a.value.length,ce()},u=()=>{a.value.forEach(L=>{L.width=L.ref.offsetWidth,L.startPosition=L.ref.offsetLeft});const D=a.value.map(L=>L.width),A=(e.length-1)*Se;i.value=D.reduce((L,H)=>L+H,0)+A,console.log(i.value)};function r(D,A=400){const L=performance.now(),H=m.value;function Z(le){const be=Math.min((le-L)/A,1),ye=1-Math.pow(1-be,3);m.value=H+(D-H)*ye,m.value=(m.value%i.value+i.value)%i.value,f(),be<1&&requestAnimationFrame(Z)}requestAnimationFrame(Z)}const f=()=>{n.value&&a.value.forEach((D,A)=>{const L=D.startPosition+m.value+D.width;L>i.value?D.ref.style.transform=`translateX(${m.value-i.value-Se}px)`:L<0?D.ref.style.transform=`translateX(${i.value-m.value+Se}px)`:D.ref.style.transform=`translateX(${m.value}px)`})},v=()=>{if(!n.value||a.value.length===0)return;const D=n.value.getBoundingClientRect(),A=D.width/2;let L=0,H=1/0;a.value.forEach((ye,st)=>{const Ce=ye.ref.getBoundingClientRect(),at=Ce.left-D.left+Ce.width/2,ke=Math.abs(at-A);ke<H&&(H=ke,L=st)});const Z=a.value[L].ref.getBoundingClientRect(),le=Z.left-D.left+Z.width/2;return{offsetToCenter:A-le,closestIndex:L}},_=D=>{if(!n.value)return;const A=n.value.getBoundingClientRect(),L=A.width/2,H=a.value[D].ref.getBoundingClientRect(),Z=H.left-A.left+H.width/2,le=L-Z;return s.value=D,le};let x=!1,b=0,I=0;const C=D=>{x=!0,b="touches"in D?D.touches[0].clientX:D.clientX,I=m.value,f()},G=D=>{if(!x)return;const L=("touches"in D?D.touches[0].clientX:D.clientX)-b;m.value=I+L,f()},E=()=>{if(!x)return;x=!1;const D=v();D&&(r(m.value+D.offsetToCenter),s.value=D?.closestIndex,f())},U=()=>{u();const D=_(s.value);D&&(m.value=m.value+D,m.value=(m.value%i.value+i.value)%i.value,f())},ce=()=>{const D=_(s.value);D&&(r(m.value+D),f())},B=()=>{const D=e.map((A,L)=>new Promise(H=>{const Z=new Image;Z.src=o.isDark?A.srcDark:A.src,Z.onload=()=>H(),Z.onerror=()=>H()}));return Promise.all(D)};return O(async()=>{await B(),U(),window.addEventListener("resize",U)}),bt(()=>{window.removeEventListener("resize",U)}),(D,A)=>{const L=h("Button");return y(),F("div",ti,[l(L,{icon:"pi pi-arrow-left",rounded:"",variant:"outlined",onClick:c,class:"absolute top-1/2 left-8 z-20"}),l(L,{icon:"pi pi-arrow-right",rounded:"",variant:"outlined",onClick:p,class:"absolute top-1/2 right-8 z-20"}),A[0]||(A[0]=d("div",{class:"absolute left-0 top-0 h-full w-full max-w-[10vw] bg-gradient-to-r from-primary-background to-transparent z-10 pointer-events-none"},null,-1)),A[1]||(A[1]=d("div",{class:"absolute right-0 top-0 h-full w-full max-w-[10vw] bg-gradient-to-l from-primary-background to-transparent z-10 pointer-events-none"},null,-1)),d("div",{ref_key:"container",ref:n,class:"relative overflow-hidden",onMousedown:C,onMousemove:G,onMouseup:E,onMouseleave:E,onTouchstart:C,onTouchmove:G,onTouchend:E},[d("ul",si,[(y(),F(J,null,fe(e,(H,Z)=>d("li",{key:Z,ref_for:!0,ref:le=>{le&&(a.value[Z]={ref:le,width:0,startPosition:0})},class:"flex-shrink-0"},[d("img",{src:ae(o).isDark?H.srcDark:H.src,alt:H.alt,class:"w-full min-w-[128px] max-w-[50vw] border-4 border-primary-border rounded-2xl select-none",draggable:!1},null,8,ai)])),64))])],544)])}}}),oi={class:"px-12 py-16 w-full flex flex-col gap-8 items-center justify-center"},ii=P({__name:"PresentationSection",setup(t){return(e,o)=>(y(),F("div",oi,[o[0]||(o[0]=d("h1",null,"Presentation",-1)),l(ni)]))}}),li=P({__name:"HomeView",setup(t){return(e,o)=>(y(),F(J,null,[l(ei),l(Zo),l(ii)],64))}}),ri=[{path:"/",component:Jo,children:[{path:"",component:li}]},{path:"/main",component:Xs,children:[{path:"dashboard",component:fa},{path:"grades",component:Da},{path:"tests",component:Mn},{path:"tests/test/:testId",component:Wo,props:!0},{path:"students",component:La},{path:"students/student/:studentId",component:fn,props:!0},{path:"settings",component:lo}]}],Te=yt({history:xt("/Class-register/"),routes:ri}),k=wt(Ls),di=It(rs,{semantic:{primary:{50:"{sky.50}",100:"{sky.100}",200:"{sky.200}",300:"{sky.300}",400:"{sky.400}",500:"{sky.500}",600:"{sky.600}",700:"{sky.700}",800:"{sky.800}",900:"{sky.900}",950:"{sky.950}"},colorScheme:{dark:{surface:{0:"#ffffff",800:"var(--color-second-border)",900:"var(--color-card)",950:"var(--color-card)"}}}}});k.use(St,{theme:{preset:di,options:{cssLayer:{name:"primevue",order:"base, primevue, theme"},darkModeSelector:".dark"}}});k.directive("ripple",Pt);k.directive("tooltip",Dt);k.use(Tt);k.use(Ct);k.component("Button",je);k.component("ButtonGroup",kt);k.component("Column",$t);k.component("DataTable",Mt);k.component("Dialog",Gt);k.component("InputText",qt);k.component("InputNumber",Ft);k.component("InputIcon",Bt);k.component("IconField",At);k.component("FloatLabel",Rt);k.component("Menubar",Nt);k.component("Message",Lt);k.component("Form",Vt);k.component("Toolbar",Et);k.component("DataView",DataView);k.component("Accordion",Wt);k.component("AccordionPanel",zt);k.component("AccordionHeader",jt);k.component("AccordionContent",Ut);k.component("Knob",Ot);k.component("Chart",Ht);k.component("Select",Jt);k.component("ToggleSwitch",Kt);k.component("ProgressSpinner",Xt);k.component("Listbox",Qt);k.component("MeterGroup",Zt);k.component("SelectButton",Yt);k.component("Checkbox",es);k.component("Paginator",ts);k.component("ConfirmDialog",ss);k.component("Toast",as);k.component("Tag",ns);k.component("RadioButton",os);k.component("RadioButtonGroup",is);const ui=ls();k.use(ui);k.use(Te);k.mount("#app");
